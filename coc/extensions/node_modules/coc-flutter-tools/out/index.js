!function(e,t){for(var n in t)e[n]=t[n]}(exports,function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=45)}([function(e,t){e.exports=require("coc.nvim")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Dispose=void 0;t.Dispose=class{constructor(){this.subscriptions=[]}push(...e){this.subscriptions.push(...e)}remove(e){this.subscriptions=this.subscriptions.filter(t=>e!==t||(t.dispose(),!1))}dispose(){this.subscriptions.length&&(this.subscriptions.forEach(e=>{e.dispose()}),this.subscriptions=[])}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProtocolNotificationType=t.ProtocolNotificationType0=t.ProtocolRequestType=t.ProtocolRequestType0=t.RegistrationType=void 0;const r=n(15);t.RegistrationType=class{constructor(e){this.method=e}};class i extends r.RequestType0{constructor(e){super(e)}}t.ProtocolRequestType0=i;class o extends r.RequestType{constructor(e){super(e,r.ParameterStructures.byName)}}t.ProtocolRequestType=o;class s extends r.NotificationType0{constructor(e){super(e)}}t.ProtocolNotificationType0=s;class a extends r.NotificationType{constructor(e){super(e,r.ParameterStructures.byName)}}t.ProtocolNotificationType=a},function(e,t){e.exports=require("path")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.logger=void 0;const r=n(0),i=n(5),o=n(1);class s extends o.Dispose{init(e){this._traceServer=e,"off"!==this._traceServer&&(this._outchannel=r.window.createOutputChannel("flutter"),this.push(this._outchannel))}set outchannel(e){this._outchannel=e}get outchannel(){return this._outchannel}get devOutchannel(){return this._devOutchannel||(this._devOutchannel=r.window.createOutputChannel(i.devLogName),this.push(this._devOutchannel)),this._devOutchannel}get traceServer(){return this._traceServer}getlog(e){return t=>{t&&this._outchannel&&this._outchannel.appendLine(`[${e}]: ${t}`)}}dispose(){super.dispose(),this._outchannel=void 0,this._devOutchannel=void 0,this._traceServer=void 0}}t.logger=new s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validVariableNameRegex=t.validClassNameRegex=t.validMethodNameRegex=t.devLogName=t.cmdPrefix=t.lineBreak=void 0,t.lineBreak=/\r?\n/,t.cmdPrefix="flutter",t.devLogName="flutter-dev",t.validMethodNameRegex=new RegExp("^[a-zA-Z_][a-zA-Z0-9_]*$"),t.validClassNameRegex=t.validMethodNameRegex,t.validVariableNameRegex=t.validMethodNameRegex},function(e,t){e.exports=require("os")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.string=t.stream=t.pattern=t.path=t.fs=t.errno=t.array=void 0;const r=n(56);t.array=r;const i=n(57);t.errno=i;const o=n(58);t.fs=o;const s=n(59);t.path=s;const a=n(60);t.pattern=a;const c=n(75);t.stream=c;const u=n(77);t.string=u},function(e,t,n){"use strict";let r;function i(){if(void 0===r)throw new Error("No runtime abstraction layer installed");return r}Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.install=function(e){if(void 0===e)throw new Error("No runtime abstraction layer provided");r=e}}(i||(i={})),t.default=i},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.notification=void 0;const i=n(0),o=n(1),s=n(48);class a extends o.Dispose{constructor(){super(),this.isSupportFloat=!1,this.top=1,this.maxWidth=60,this.messages=[],this.display=[],this.timeGap=1e3/30,this.init()}init(){return r(this,void 0,void 0,(function*(){const{nvim:e}=i.workspace;this.isSupportFloat=!!(yield e.call("exists","*nvim_open_win"));const t=yield e.getOption("columns");this.maxWidth=Math.min(this.maxWidth,t)}))}detect(){return r(this,void 0,void 0,(function*(){this.timer&&clearTimeout(this.timer);const{timeGap:e,display:t}=this;let{top:n}=this;this.display=[];for(const r of t)r.isInvalid?r.dispose():(yield r.update(e,n),n+=r.height,this.display.push(r));const{nvim:r}=i.workspace,o=(yield r.getOption("lines"))-1;for(;this.messages.length;){const e=this.messages[this.messages.length-1];if(n+e.height>o)break;this.messages.pop(),yield e.show(n),this.display.push(e),n+=e.height}this.timer=setTimeout(()=>{this.detect()},this.timeGap)}))}show(e,t=3e3){const n=[].concat(e);if(0!==n.length){if(!this.isSupportFloat)return i.window.showMessage(n.join("\n"));this.messages.push(new s.Message(n,this.maxWidth,t)),this.detect()}}dispose(){this.timer&&clearTimeout(this.timer),this.push(...this.display),this.messages=[],this.display=[],super.dispose()}}t.notification=new a},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.flutterSDK=void 0;const c=n(0),u=o(n(6)),l=n(3),d=a(n(50)),f=n(12),h=n(4).logger.getlog("sdk"),p=l.join("bin","snapshots","analysis_server.dart.snapshot"),m=l.join("bin","win32"===u.default.platform()?"dart.bat":"dart"),g=["~/snap/flutter/common/flutter","~/fvm/versions"];t.flutterSDK=new class{constructor(){this._sdkHome="",this._state=!1,this._dartHome="",this._analyzerSnapshotPath="",this._dartCommand=""}get sdkHome(){return this._sdkHome}get state(){return this._state}get dartHome(){return this._dartHome}get analyzerSnapshotPath(){return this._analyzerSnapshotPath}get dartCommand(){return this._dartCommand}get flutterCommand(){return this._flutterCommand||"flutter"}_hasValidFlutterSdk(){return s(this,void 0,void 0,(function*(){return(yield f.exists(this._sdkHome))&&(yield f.exists(l.join(this._sdkHome,"bin","flutter")))}))}getVersion(){return s(this,void 0,void 0,(function*(){if(this._dartCommand){const{stderr:e,stdout:t}=yield f.execCommand(this._dartCommand+" --version");if(e){const t=e.match(/version:\s+(\d+)\.(\d+)\.(\d+)/);if(t)return h(`dart version: v${t[1]}.${t[2]}.${t[3]}`),[parseFloat(t[1]),parseFloat(t[2]),parseFloat(t[3])]}else if(t){const e=t.match(/version:\s+(\d+)\.(\d+)\.(\d+)/);if(e)return h(`dart version: v${e[1]}.${e[2]}.${e[3]}`),[parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3])]}else h("Failed to get dart version")}}))}isVersionGreatOrEqualTo(e){return s(this,void 0,void 0,(function*(){const t=yield this.getVersion();return!!t&&t.every((t,n)=>t>=e[n])}))}init(e){return s(this,void 0,void 0,(function*(){this.config=e,yield this._init()}))}_init(){return s(this,void 0,void 0,(function*(){this._dartCommand=this.config.get("sdk.dart-command","");const e=this.config.get("sdk.dart-lookup","");this._fvmEnabled=this.config.get("fvm.enabled",!0),this._sdkHome=this.config.get("sdk.path","");let t=yield this._hasValidFlutterSdk();t&&(yield this.initFlutterCommandsFromSdkHome());try{this._fvmEnabled&&!t&&(yield this.initDartSdkHomeFromLocalFvm(),t=yield this._hasValidFlutterSdk()),t||(yield this.initDarkSdkHomeFromSearchPaths(),t=yield this._hasValidFlutterSdk()),t||(yield this.initDarkSdkHome(e),t=yield this._hasValidFlutterSdk()),yield this.initDartSdk(),this._state||(h("Dart SDK not found!"),h(JSON.stringify({dartHome:this._dartHome,analyzerSnapshotPath:this._analyzerSnapshotPath},null,2)))}catch(e){h(e.message||"find dart sdk error!"),h(e.stack)}}))}initDarkSdkHomeFromSearchPaths(){return s(this,void 0,void 0,(function*(){try{const e=yield this.findSdks();e.length>0&&(this._sdkHome=e[0].location,yield this.initFlutterCommandsFromSdkHome())}catch(e){h(`Error configuring sdk from searchPaths: ${e.message}}`)}}))}initDartSdkHomeFromLocalFvm(){return s(this,void 0,void 0,(function*(){try{const e=c.workspace.workspaceFolder?c.Uri.parse(c.workspace.workspaceFolder.uri).fsPath:c.workspace.cwd,t=l.join(e,".fvm","flutter_sdk");(yield f.exists(t))?(h("Found local fvm sdk"),this._sdkHome=t,yield this.initFlutterCommandsFromSdkHome()):h("No local fvm sdk")}catch(e){h(`Error configuring local fvm sdk: ${e.message}}`)}}))}initFlutterCommandsFromSdkHome(){return s(this,void 0,void 0,(function*(){this._flutterCommand=l.join(this._sdkHome,"bin","win32"===u.default.platform()?"flutter.bat":"flutter"),h("flutter command path => "+this.flutterCommand),(yield f.exists(this._flutterCommand))||h("flutter command path does not exist"),this._dartHome=l.join(this._sdkHome,"bin","cache","dart-sdk"),h("dart sdk home => "+this._dartHome),(yield f.exists(this._dartHome))||h("dart sdk home path does not exist")}))}initDarkSdkHome(e){return s(this,void 0,void 0,(function*(){try{let t;if(0==e.length)t=yield d.default("dart");else{const{stdout:n}=yield f.execCommand(e);if(t=n,0==n.length)throw new Error("dart lookup returned empty string")}h("which dart command => "+t),t&&(t=yield f.getRealPath(t),h("dart command path => "+t),this._dartHome=l.join(l.dirname(t),".."),h("dart sdk home => "+this._dartHome))}catch(e){h("dart command not found: "+e.message)}}))}initDartSdk(){return s(this,void 0,void 0,(function*(){if(this._analyzerSnapshotPath=l.join(this._dartHome,p),h("analyzer path => "+this._analyzerSnapshotPath),this._state=yield f.exists(this._analyzerSnapshotPath),!this._dartCommand&&(this._dartCommand=l.join(this.dartHome,m),"win32"===u.default.platform())){(yield f.exists(this._dartCommand))||(this._dartCommand=this._dartCommand.replace(/bat$/,"exe"))}h("dart command path => "+this._dartCommand)}))}execDartCommand(e,t={}){return f.execCommand(`${this.dartCommand} ${e}`,t)}execFlutterCommand(e,t={}){return f.execCommand(`${this.flutterCommand} ${e}`,t)}versionForSdk(e){return s(this,void 0,void 0,(function*(){const t=yield f.execCommand("cat "+l.join(e,"version"));if(!t.err)return t.stdout}))}sdkWithLookup(e,t){return s(this,void 0,void 0,(function*(){let n;if(0==e.length)n=(yield d.default("flutter")).trim();else{const{stdout:t}=yield f.execCommand(e);if(n=t.trim(),0==t.length)return}if(h("which flutter command => "+n),n){n=yield f.getRealPath(n),n=n.trim(),(n.toLowerCase().endsWith(l.join("bin","flutter"))||n.toLowerCase().endsWith(l.join("bin","flutter.bat")))&&(n=l.join(n,"..",".."));if(!(yield f.exists(l.join(n,"bin","flutter"))))return;const e=yield this.versionForSdk(n);if(e)return{location:n,version:e,isFvm:!1,isCurrent:t==n}}}))}findSdks(){return s(this,void 0,void 0,(function*(){const e=[],t=0==this.sdkHome.length?"":yield f.getRealPath(this.sdkHome),n=this.config.get("sdk.flutter-lookup",""),r=this.config.get("fvm.enabled",!0),i=u.homedir(),o=yield this.sdkWithLookup(n,t);o&&e.push(o);const s=[...this.config.get("sdk.searchPaths",[]),...g];h("searchPaths: "+s);for(let n of s){n=n.replace(/^~/,i).trim();if(yield f.exists(l.join(n,"bin","flutter"))){const r=yield this.versionForSdk(n);r&&!e.some(e=>e.location==n)&&e.push({location:n,isFvm:!1,version:r,isCurrent:n==t});continue}const r=yield f.readDir(n);for(const i of r){const r=l.join(n,i).trim();if(!(yield f.exists(l.join(r,"bin","flutter"))))continue;if(e.some(e=>e.location==r))continue;const o=yield this.versionForSdk(r);e.push({location:r,isFvm:!1,version:o||"unknown",isCurrent:r==t})}}if(r){let n=l.join(i,"fvm","versions");const r=l.join(i,"fvm",".settings");try{if(yield f.exists(r)){const e=yield f.readFile(r),t=JSON.parse(e.toString());"string"==typeof t.cachePath&&""!=t.cachePath.trim()&&(n=t.cachePath)}}catch(e){h("Failed to load fvm settings: "+e.message)}const o=yield f.readDir(n);for(const r of o){const i=l.join(n,r).trim();if(!(yield f.exists(l.join(i,"bin","flutter"))))continue;if(e.some(e=>e.location==i))continue;const o=yield this.versionForSdk(i);e.push({location:i,fvmVersion:r,isFvm:!0,version:o?`${r} (${o})`:r,isCurrent:i==t})}}return e}))}}},function(e,t){e.exports=require("fs")},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.readFile=t.readDir=t.getRealPath=t.isSymbolLink=t.execCommand=t.getFlutterWorkspaceFolder=t.findWorkspaceFolder=t.closestPath=t.findWorkspaceFolders=t.exists=void 0;const o=n(18),s=n(0),a=i(n(54)),c=i(n(11)),u=n(3),l=n(4);t.exists=e=>r(void 0,void 0,void 0,(function*(){return new Promise(t=>{c.default.exists(e,e=>{t(e)})})}));t.findWorkspaceFolders=(e,t)=>r(void 0,void 0,void 0,(function*(){return(yield a.default(t,{onlyFiles:!0,cwd:e,deep:10})).map(t=>u.join(e,u.dirname(t)))}));t.closestPath=e=>{if(e.length)return e.slice().sort((e,t)=>e.split(u.sep).length-t.split(u.sep).length)[0]};t.findWorkspaceFolder=(e,n)=>r(void 0,void 0,void 0,(function*(){return t.closestPath(yield t.findWorkspaceFolders(e,n))}));t.getFlutterWorkspaceFolder=()=>r(void 0,void 0,void 0,(function*(){const e=s.workspace.workspaceFolder?s.Uri.parse(s.workspace.workspaceFolder.uri).fsPath:s.workspace.cwd;return yield t.findWorkspaceFolder(e,["**/pubspec.yaml"])}));const d=l.logger.getlog("fs");t.execCommand=(e,t={})=>new Promise(n=>{d("executing command "+e);let r=0;o.exec(e,Object.assign({encoding:"utf-8"},t),(e,t="",i="")=>{n({code:r,err:e,stdout:t,stderr:i})}).on("exit",e=>e&&(r=e))});t.isSymbolLink=e=>r(void 0,void 0,void 0,(function*(){return new Promise(t=>{c.default.lstat(e,(e,n)=>{t({err:e,stats:n&&n.isSymbolicLink()})})})}));t.getRealPath=e=>r(void 0,void 0,void 0,(function*(){const{err:n,stats:r}=yield t.isSymbolLink(e);return!n&&r?new Promise(t=>{c.default.realpath(e,(n,r)=>{if(n)return t(e);t(r)})}):e}));t.readDir=(e,t)=>r(void 0,void 0,void 0,(function*(){return new Promise(n=>{c.default.readdir(e,t,(e,t)=>n(e?[]:t))})}));t.readFile=(e,t)=>r(void 0,void 0,void 0,(function*(){return new Promise((n,r)=>{c.default.readFile(e,t,(e,t)=>e?r(e):n(t))})}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(79),i=n(80),o=n(81);function s(e={}){return e instanceof o.default?e:new o.default(e)}t.Settings=o.default,t.stat=function(e,t,n){if("function"==typeof t)return r.read(e,s(),t);r.read(e,s(t),n)},t.statSync=function(e,t){const n=s(t);return i.read(e,n)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deleteCommandTitle=t.setCommandTitle=t.reduceSpace=t.formatMessage=void 0;const r=n(0),i=n(5);t.formatMessage=e=>e.trim().replace(/\s+/g," ").split(i.lineBreak);t.reduceSpace=e=>e.trim().replace(/\s+/g," ");t.setCommandTitle=(e,t)=>{r.commands.titles.set(e,t)};t.deleteCommandTitle=e=>{r.commands.titles.delete(e)}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.createMessageConnection=t.createServerSocketTransport=t.createClientSocketTransport=t.createServerPipeTransport=t.createClientPipeTransport=t.generateRandomPipeName=t.StreamMessageWriter=t.StreamMessageReader=t.SocketMessageWriter=t.SocketMessageReader=t.IPCMessageWriter=t.IPCMessageReader=void 0;const o=n(115);o.default.install();const s=n(41),a=n(3),c=n(6),u=n(122),l=n(123);i(n(41),t);class d extends s.AbstractMessageReader{constructor(e){super(),this.process=e;let t=this.process;t.on("error",e=>this.fireError(e)),t.on("close",()=>this.fireClose())}listen(e){return this.process.on("message",e),s.Disposable.create(()=>this.process.off("message",e))}}t.IPCMessageReader=d;class f extends s.AbstractMessageWriter{constructor(e){super(),this.process=e,this.errorCount=0;let t=this.process;t.on("error",e=>this.fireError(e)),t.on("close",()=>this.fireClose)}write(e){try{return"function"==typeof this.process.send&&this.process.send(e,void 0,void 0,t=>{t?(this.errorCount++,this.handleError(t,e)):this.errorCount=0}),Promise.resolve()}catch(t){return this.handleError(t,e),Promise.reject(t)}}handleError(e,t){this.errorCount++,this.fireError(e,t,this.errorCount)}end(){}}t.IPCMessageWriter=f;class h extends s.ReadableStreamMessageReader{constructor(e,t="utf-8"){super(o.default().stream.asReadableStream(e),t)}}t.SocketMessageReader=h;class p extends s.WriteableStreamMessageWriter{constructor(e,t){super(o.default().stream.asWritableStream(e),t),this.socket=e}dispose(){super.dispose(),this.socket.destroy()}}t.SocketMessageWriter=p;class m extends s.ReadableStreamMessageReader{constructor(e,t){super(o.default().stream.asReadableStream(e),t)}}t.StreamMessageReader=m;class g extends s.WriteableStreamMessageWriter{constructor(e,t){super(o.default().stream.asWritableStream(e),t)}}t.StreamMessageWriter=g;const y=process.env.XDG_RUNTIME_DIR,v=new Map([["linux",107],["darwin",103]]);t.generateRandomPipeName=function(){const e=u.randomBytes(21).toString("hex");if("win32"===process.platform)return`\\\\.\\pipe\\vscode-jsonrpc-${e}-sock`;let t;t=y?a.join(y,`vscode-ipc-${e}.sock`):a.join(c.tmpdir(),`vscode-${e}.sock`);const n=v.get(process.platform);return void 0!==n&&t.length>=n&&o.default().console.warn(`WARNING: IPC handle "${t}" is longer than ${n} characters.`),t},t.createClientPipeTransport=function(e,t="utf-8"){let n;const r=new Promise((e,t)=>{n=e});return new Promise((i,o)=>{let s=l.createServer(e=>{s.close(),n([new h(e,t),new p(e,t)])});s.on("error",o),s.listen(e,()=>{s.removeListener("error",o),i({onConnected:()=>r})})})},t.createServerPipeTransport=function(e,t="utf-8"){const n=l.createConnection(e);return[new h(n,t),new p(n,t)]},t.createClientSocketTransport=function(e,t="utf-8"){let n;const r=new Promise((e,t)=>{n=e});return new Promise((i,o)=>{const s=l.createServer(e=>{s.close(),n([new h(e,t),new p(e,t)])});s.on("error",o),s.listen(e,"127.0.0.1",()=>{s.removeListener("error",o),i({onConnected:()=>r})})})},t.createServerSocketTransport=function(e,t="utf-8"){const n=l.createConnection(e,"127.0.0.1");return[new h(n,t),new p(n,t)]},t.createMessageConnection=function(e,t,n,r){n||(n=s.NullLogger);const i=function(e){const t=e;return void 0!==t.read&&void 0!==t.addListener}(e)?new m(e):e,o=function(e){const t=e;return void 0!==t.write&&void 0!==t.addListener}(t)?new g(t):t;return s.ConnectionStrategy.is(r)&&(r={connectionStrategy:r}),s.createMessageConnection(i,o,n,r)}},function(e,t,n){"use strict";function r(e){return"string"==typeof e||e instanceof String}function i(e){return Array.isArray(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.stringArray=t.array=t.func=t.error=t.number=t.string=t.boolean=void 0,t.boolean=function(e){return!0===e||!1===e},t.string=r,t.number=function(e){return"number"==typeof e||e instanceof Number},t.error=function(e){return e instanceof Error},t.func=function(e){return"function"==typeof e},t.array=i,t.stringArray=function(e){return i(e)&&e.every(e=>r(e))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Emitter=t.Event=void 0;const r=n(8);!function(e){const t={dispose(){}};e.None=function(){return t}}(t.Event||(t.Event={}));class i{add(e,t=null,n){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(e),this._contexts.push(t),Array.isArray(n)&&n.push({dispose:()=>this.remove(e,t)})}remove(e,t=null){if(!this._callbacks)return;let n=!1;for(let r=0,i=this._callbacks.length;r<i;r++)if(this._callbacks[r]===e){if(this._contexts[r]===t)return this._callbacks.splice(r,1),void this._contexts.splice(r,1);n=!0}if(n)throw new Error("When adding a listener with a context, you should remove it with the same context")}invoke(...e){if(!this._callbacks)return[];const t=[],n=this._callbacks.slice(0),i=this._contexts.slice(0);for(let o=0,s=n.length;o<s;o++)try{t.push(n[o].apply(i[o],e))}catch(e){r.default().console.error(e)}return t}isEmpty(){return!this._callbacks||0===this._callbacks.length}dispose(){this._callbacks=void 0,this._contexts=void 0}}class o{constructor(e){this._options=e}get event(){return this._event||(this._event=(e,t,n)=>{this._callbacks||(this._callbacks=new i),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(e,t);const r={dispose:()=>{this._callbacks&&(this._callbacks.remove(e,t),r.dispose=o._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this))}};return Array.isArray(n)&&n.push(r),r}),this._event}fire(e){this._callbacks&&this._callbacks.invoke.call(this._callbacks,e)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}}t.Emitter=o,o._noop=function(){}},function(e,t){e.exports=require("child_process")},function(e,t){e.exports=require("util")},function(e,t,n){"use strict";const r=n(3),i="win32"===process.platform,{REGEX_BACKSLASH:o,REGEX_REMOVE_BACKSLASH:s,REGEX_SPECIAL_CHARS:a,REGEX_SPECIAL_CHARS_GLOBAL:c}=n(21);t.isObject=e=>null!==e&&"object"==typeof e&&!Array.isArray(e),t.hasRegexChars=e=>a.test(e),t.isRegexChar=e=>1===e.length&&t.hasRegexChars(e),t.escapeRegex=e=>e.replace(c,"\\$1"),t.toPosixSlashes=e=>e.replace(o,"/"),t.removeBackslashes=e=>e.replace(s,e=>"\\"===e?"":e),t.supportsLookbehinds=()=>{const e=process.version.slice(1).split(".").map(Number);return 3===e.length&&e[0]>=9||8===e[0]&&e[1]>=10},t.isWindows=e=>e&&"boolean"==typeof e.windows?e.windows:!0===i||"\\"===r.sep,t.escapeLast=(e,n,r)=>{const i=e.lastIndexOf(n,r);return-1===i?e:"\\"===e[i-1]?t.escapeLast(e,n,i-1):`${e.slice(0,i)}\\${e.slice(i)}`},t.removePrefix=(e,t={})=>{let n=e;return n.startsWith("./")&&(n=n.slice(2),t.prefix="./"),n},t.wrapOutput=(e,t={},n={})=>{let r=`${n.contains?"":"^"}(?:${e})${n.contains?"":"$"}`;return!0===t.negated&&(r=`(?:^(?!${r}).*$)`),r}},function(e,t,n){"use strict";const r=n(3),i={DOT_LITERAL:"\\.",PLUS_LITERAL:"\\+",QMARK_LITERAL:"\\?",SLASH_LITERAL:"\\/",ONE_CHAR:"(?=.)",QMARK:"[^/]",END_ANCHOR:"(?:\\/|$)",DOTS_SLASH:"\\.{1,2}(?:\\/|$)",NO_DOT:"(?!\\.)",NO_DOTS:"(?!(?:^|\\/)\\.{1,2}(?:\\/|$))",NO_DOT_SLASH:"(?!\\.{0,1}(?:\\/|$))",NO_DOTS_SLASH:"(?!\\.{1,2}(?:\\/|$))",QMARK_NO_DOT:"[^.\\/]",STAR:"[^/]*?",START_ANCHOR:"(?:^|\\/)"},o={...i,SLASH_LITERAL:"[\\\\/]",QMARK:"[^\\\\/]",STAR:"[^\\\\/]*?",DOTS_SLASH:"\\.{1,2}(?:[\\\\/]|$)",NO_DOT:"(?!\\.)",NO_DOTS:"(?!(?:^|[\\\\/])\\.{1,2}(?:[\\\\/]|$))",NO_DOT_SLASH:"(?!\\.{0,1}(?:[\\\\/]|$))",NO_DOTS_SLASH:"(?!\\.{1,2}(?:[\\\\/]|$))",QMARK_NO_DOT:"[^.\\\\/]",START_ANCHOR:"(?:^|[\\\\/])",END_ANCHOR:"(?:[\\\\/]|$)"};e.exports={MAX_LENGTH:65536,POSIX_REGEX_SOURCE:{alnum:"a-zA-Z0-9",alpha:"a-zA-Z",ascii:"\\x00-\\x7F",blank:" \\t",cntrl:"\\x00-\\x1F\\x7F",digit:"0-9",graph:"\\x21-\\x7E",lower:"a-z",print:"\\x20-\\x7E ",punct:"\\-!\"#$%&'()\\*+,./:;<=>?@[\\]^_`{|}~",space:" \\t\\r\\n\\v\\f",upper:"A-Z",word:"A-Za-z0-9_",xdigit:"A-Fa-f0-9"},REGEX_BACKSLASH:/\\(?![*+?^${}(|)[\]])/g,REGEX_NON_SPECIAL_CHARS:/^[^@![\].,$*+?^{}()|\\/]+/,REGEX_SPECIAL_CHARS:/[-*+?.^${}(|)[\]]/,REGEX_SPECIAL_CHARS_BACKREF:/(\\?)((\W)(\3*))/g,REGEX_SPECIAL_CHARS_GLOBAL:/([-*+?.^${}(|)[\]])/g,REGEX_REMOVE_BACKSLASH:/(?:\[.*?[^\\]\]|\\(?=.))/g,REPLACEMENTS:{"***":"*","**/**":"**","**/**/**":"**"},CHAR_0:48,CHAR_9:57,CHAR_UPPERCASE_A:65,CHAR_LOWERCASE_A:97,CHAR_UPPERCASE_Z:90,CHAR_LOWERCASE_Z:122,CHAR_LEFT_PARENTHESES:40,CHAR_RIGHT_PARENTHESES:41,CHAR_ASTERISK:42,CHAR_AMPERSAND:38,CHAR_AT:64,CHAR_BACKWARD_SLASH:92,CHAR_CARRIAGE_RETURN:13,CHAR_CIRCUMFLEX_ACCENT:94,CHAR_COLON:58,CHAR_COMMA:44,CHAR_DOT:46,CHAR_DOUBLE_QUOTE:34,CHAR_EQUAL:61,CHAR_EXCLAMATION_MARK:33,CHAR_FORM_FEED:12,CHAR_FORWARD_SLASH:47,CHAR_GRAVE_ACCENT:96,CHAR_HASH:35,CHAR_HYPHEN_MINUS:45,CHAR_LEFT_ANGLE_BRACKET:60,CHAR_LEFT_CURLY_BRACE:123,CHAR_LEFT_SQUARE_BRACKET:91,CHAR_LINE_FEED:10,CHAR_NO_BREAK_SPACE:160,CHAR_PERCENT:37,CHAR_PLUS:43,CHAR_QUESTION_MARK:63,CHAR_RIGHT_ANGLE_BRACKET:62,CHAR_RIGHT_CURLY_BRACE:125,CHAR_RIGHT_SQUARE_BRACKET:93,CHAR_SEMICOLON:59,CHAR_SINGLE_QUOTE:39,CHAR_SPACE:32,CHAR_TAB:9,CHAR_UNDERSCORE:95,CHAR_VERTICAL_LINE:124,CHAR_ZERO_WIDTH_NOBREAK_SPACE:65279,SEP:r.sep,extglobChars:e=>({"!":{type:"negate",open:"(?:(?!(?:",close:`))${e.STAR})`},"?":{type:"qmark",open:"(?:",close:")?"},"+":{type:"plus",open:"(?:",close:")+"},"*":{type:"star",open:"(?:",close:")*"},"@":{type:"at",open:"(?:",close:")"}}),globChars:e=>!0===e?o:i}},function(e,t){e.exports=require("stream")},function(e,t,n){"use strict";const r=n(24);e.exports=(e,t={})=>{let n=(e,i={})=>{let o=t.escapeInvalid&&r.isInvalidBrace(i),s=!0===e.invalid&&!0===t.escapeInvalid,a="";if(e.value)return(o||s)&&r.isOpenOrClose(e)?"\\"+e.value:e.value;if(e.value)return e.value;if(e.nodes)for(let t of e.nodes)a+=n(t);return a};return n(e)}},function(e,t,n){"use strict";t.isInteger=e=>"number"==typeof e?Number.isInteger(e):"string"==typeof e&&""!==e.trim()&&Number.isInteger(Number(e)),t.find=(e,t)=>e.nodes.find(e=>e.type===t),t.exceedsLimit=(e,n,r=1,i)=>!1!==i&&(!(!t.isInteger(e)||!t.isInteger(n))&&(Number(n)-Number(e))/Number(r)>=i),t.escapeNode=(e,t=0,n)=>{let r=e.nodes[t];r&&(n&&r.type===n||"open"===r.type||"close"===r.type)&&!0!==r.escaped&&(r.value="\\"+r.value,r.escaped=!0)},t.encloseBrace=e=>"brace"===e.type&&(e.commas>>0+e.ranges>>0==0&&(e.invalid=!0,!0)),t.isInvalidBrace=e=>"brace"===e.type&&(!(!0!==e.invalid&&!e.dollar)||(e.commas>>0+e.ranges>>0==0||!0!==e.open||!0!==e.close)&&(e.invalid=!0,!0)),t.isOpenOrClose=e=>"open"===e.type||"close"===e.type||(!0===e.open||!0===e.close),t.reduce=e=>e.reduce((e,t)=>("text"===t.type&&e.push(t.value),"range"===t.type&&(t.type="text"),e),[]),t.flatten=(...e)=>{const t=[],n=e=>{for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?n(i,t):void 0!==i&&t.push(i)}return t};return n(e),t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(85),i=n(88),o=n(89);function s(e={}){return e instanceof o.default?e:new o.default(e)}t.Settings=o.default,t.scandir=function(e,t,n){if("function"==typeof t)return r.read(e,s(),t);r.read(e,s(t),n)},t.scandirSync=function(e,t){const n=s(t);return i.read(e,n)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isFatalError=function(e,t){return null===e.errorFilter||!e.errorFilter(t)},t.isAppliedFilter=function(e,t){return null===e||e(t)},t.replacePathSegmentSeparator=function(e,t){return e.split(/[\\/]/).join(t)},t.joinPathSegments=function(e,t,n){return""===e?t:e+n+t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),i=n(97),o=n(100),s=n(101),a=n(102);t.default=class{constructor(e){this._settings=e,this.errorFilter=new s.default(this._settings),this.entryFilter=new o.default(this._settings,this._getMicromatchOptions()),this.deepFilter=new i.default(this._settings,this._getMicromatchOptions()),this.entryTransformer=new a.default(this._settings)}_getRootDirectory(e){return r.resolve(this._settings.cwd,e.base)}_getReaderOptions(e){const t="."===e.base?"":e.base;return{basePath:t,pathSegmentSeparator:"/",concurrency:this._settings.concurrency,deepFilter:this.deepFilter.getFilter(t,e.positive,e.negative),entryFilter:this.entryFilter.getFilter(e.positive,e.negative),errorFilter:this.errorFilter.getFilter(),followSymbolicLinks:this._settings.followSymbolicLinks,fs:this._settings.fs,stats:this._settings.stats,throwErrorOnBrokenSymbolicLink:this._settings.throwErrorOnBrokenSymbolicLink,transform:this.entryTransformer.getTransformer()}}_getMicromatchOptions(){return{dot:this._settings.dot,matchBase:this._settings.baseNameMatch,nobrace:!this._settings.braceExpansion,nocase:!this._settings.caseSensitiveMatch,noext:!this._settings.extglob,noglobstar:!this._settings.globstar,posix:!0,strictSlashes:!1}}}},function(e,t,n){var r=n(155);e.exports=r},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.devServer=void 0;const o=n(18),s=n(0),a=i(n(6)),c=n(9),u=n(10),l=n(5),d=n(1),f=n(12),h=n(4),p=h.logger.getlog("server");class m extends d.Dispose{constructor(){super(),this.onHandler=[],this.isAutoScroll=!1,this._onError=e=>{this.task=void 0,p("server error: "+e.message)},this._onExit=e=>{this.task=void 0;s.workspace.getConfiguration("flutter").get("autoHideDevLog",!1)&&this.outputChannel&&this.outputChannel.hide(),p("server exit with: "+e)},this.push({dispose:()=>{if(this.task)try{this.task.kill(),this.task=void 0}catch(e){p("dispose server error: "+e.message)}}})}devLog(e){this.outputChannel&&this.outputChannel.append(e)}get state(){return!!this.task&&this.task.stdin.writable}start(e){return r(this,void 0,void 0,(function*(){if(this.task&&this.task.stdin.writable)return c.notification.show("Flutter dev server is running!"),!1;const t=yield f.getFlutterWorkspaceFolder();if(!t)return c.notification.show("Flutter project workspaceFolder not found!"),!1;p("server start at: "+t),c.notification.show("Start flutter dev server..."),this.outputChannel?this.outputChannel.clear():this.outputChannel=h.logger.devOutchannel,this.task=o.spawn(u.flutterSDK.flutterCommand,e,{cwd:t,detached:!1,shell:"win32"===a.default.platform()||void 0}),this.task.on("exit",this._onExit),this.task.on("error",this._onError);return s.workspace.getConfiguration("flutter").get("autoOpenDevLog",!1)&&this.openDevLog(!0),this.onHandler.length&&(this.onHandler.forEach(e=>e()),this.onHandler=[]),!0}))}onExit(e){const t=()=>{this.task.on("exit",e)};this.task?t():this.onHandler.push(t)}onError(e){this.task?this.task.on("error",e):this.onHandler.push(()=>{this.task.on("error",e)})}onData(e,t){const n=()=>{this.task[e].on("data",e=>{const n=e.toString();this.devLog(n),t(n.split(l.lineBreak))})};this.task&&this.task[e]?n():this.onHandler.push(n)}onStdout(e){this.onData("stdout",e)}onStderr(e){this.onData("stderr",e)}sendCommand(e){e&&(this.task&&this.task.stdin.writable?this.task.stdin.write(e):c.notification.show("Flutter server is not running!"))}clearDevLog(){this.outputChannel&&this.outputChannel.clear()}openDevLog(e){return r(this,void 0,void 0,(function*(){const t=s.workspace.getConfiguration("flutter").get("openDevLogSplitCommand","");if(this.outputChannel)if(t){const n=yield s.workspace.nvim.window;yield s.workspace.nvim.command(`${t} output:///${l.devLogName}`),e||s.workspace.nvim.call("win_gotoid",[n.id])}else this.outputChannel.show(e);setTimeout(()=>{this.autoScrollLogWin()},1e3)}))}autoScrollLogWin(){return r(this,void 0,void 0,(function*(){if(this.isAutoScroll)return;this.isAutoScroll=!0;const e=yield s.workspace.nvim.buffers;for(const t of e){const e=yield t.name;if(p("bufName "+e),e==="output:///"+l.devLogName){if(!(yield t.attach(!1)))return p(`Attach buf ${e} error`),void(this.isAutoScroll=!1);this.isAutoScroll=!0,t.listen("lines",()=>r(this,void 0,void 0,(function*(){const e=yield s.workspace.nvim.windows;if(e&&e.length)for(const n of e)try{const e=yield n.buffer;if((yield e.name)==="output:///"+l.devLogName){const e=yield t.length,r=yield s.workspace.nvim.window;if(n.id===r.id)return;n.setCursor([e,0]);break}}catch(e){}}))),t.listen("detach",()=>{this.isAutoScroll&&(p("Unexpected detach buf "+e),this.isAutoScroll=!1)}),this.push(s.Disposable.create(()=>{if(this.isAutoScroll){this.isAutoScroll=!1;try{t.removeAllListeners(),t.detach()}catch(e){p("Detach error "+(e.message||e))}}}));break}}this.isAutoScroll=!1}))}}t.devServer=new m},function(e,t,n){"use strict";
/*!
 * fill-range <https://github.com/jonschlinkert/fill-range>
 *
 * Copyright (c) 2014-present, Jon Schlinkert.
 * Licensed under the MIT License.
 */const r=n(19),i=n(67),o=e=>null!==e&&"object"==typeof e&&!Array.isArray(e),s=e=>"number"==typeof e||"string"==typeof e&&""!==e,a=e=>Number.isInteger(+e),c=e=>{let t=""+e,n=-1;if("-"===t[0]&&(t=t.slice(1)),"0"===t)return!1;for(;"0"===t[++n];);return n>0},u=(e,t,n)=>{if(t>0){let n="-"===e[0]?"-":"";n&&(e=e.slice(1)),e=n+e.padStart(n?t-1:t,"0")}return!1===n?String(e):e},l=(e,t)=>{let n="-"===e[0]?"-":"";for(n&&(e=e.slice(1),t--);e.length<t;)e="0"+e;return n?"-"+e:e},d=(e,t,n,r)=>{if(n)return i(e,t,{wrap:!1,...r});let o=String.fromCharCode(e);return e===t?o:`[${o}-${String.fromCharCode(t)}]`},f=(e,t,n)=>{if(Array.isArray(e)){let t=!0===n.wrap,r=n.capture?"":"?:";return t?`(${r}${e.join("|")})`:e.join("|")}return i(e,t,n)},h=(...e)=>new RangeError("Invalid range arguments: "+r.inspect(...e)),p=(e,t,n)=>{if(!0===n.strictRanges)throw h([e,t]);return[]},m=(e,t,n=1,r={})=>{let i=Number(e),o=Number(t);if(!Number.isInteger(i)||!Number.isInteger(o)){if(!0===r.strictRanges)throw h([e,t]);return[]}0===i&&(i=0),0===o&&(o=0);let s=i>o,a=String(e),p=String(t),m=String(n);n=Math.max(Math.abs(n),1);let g=c(a)||c(p)||c(m),y=g?Math.max(a.length,p.length,m.length):0,v=!1===g&&!1===((e,t,n)=>"string"==typeof e||"string"==typeof t||!0===n.stringify)(e,t,r),_=r.transform||(e=>t=>!0===e?Number(t):String(t))(v);if(r.toRegex&&1===n)return d(l(e,y),l(t,y),!0,r);let b={negatives:[],positives:[]},R=[],w=0;for(;s?i>=o:i<=o;)!0===r.toRegex&&n>1?b[(S=i)<0?"negatives":"positives"].push(Math.abs(S)):R.push(u(_(i,w),y,v)),i=s?i-n:i+n,w++;var S;return!0===r.toRegex?n>1?((e,t)=>{e.negatives.sort((e,t)=>e<t?-1:e>t?1:0),e.positives.sort((e,t)=>e<t?-1:e>t?1:0);let n,r=t.capture?"":"?:",i="",o="";return e.positives.length&&(i=e.positives.join("|")),e.negatives.length&&(o=`-(${r}${e.negatives.join("|")})`),n=i&&o?`${i}|${o}`:i||o,t.wrap?`(${r}${n})`:n})(b,r):f(R,null,{wrap:!1,...r}):R},g=(e,t,n,r={})=>{if(null==t&&s(e))return[e];if(!s(e)||!s(t))return p(e,t,r);if("function"==typeof n)return g(e,t,1,{transform:n});if(o(n))return g(e,t,0,n);let i={...r};return!0===i.capture&&(i.wrap=!0),n=n||i.step||1,a(n)?a(e)&&a(t)?m(e,t,n,i):((e,t,n=1,r={})=>{if(!a(e)&&e.length>1||!a(t)&&t.length>1)return p(e,t,r);let i=r.transform||(e=>String.fromCharCode(e)),o=(""+e).charCodeAt(0),s=(""+t).charCodeAt(0),c=o>s,u=Math.min(o,s),l=Math.max(o,s);if(r.toRegex&&1===n)return d(u,l,!1,r);let h=[],m=0;for(;c?o>=s:o<=s;)h.push(i(o,m)),o=c?o-n:o+n,m++;return!0===r.toRegex?f(h,null,{wrap:!1,options:r}):h})(e,t,Math.max(Math.abs(n),1),i):null==n||o(n)?g(e,t,1,n):((e,t)=>{if(!0===t.strictRanges)throw new TypeError(`Expected step "${e}" to be a number`);return[]})(n,i)};e.exports=g},function(e,t,n){"use strict";e.exports=n(72)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(22),i=n(13),o=n(33),s=n(38);class a extends s.default{constructor(){super(...arguments),this._walkStream=o.walkStream,this._stat=i.stat}dynamic(e,t){return this._walkStream(e,t)}static(e,t){const n=e.map(this._getFullEntryPath,this),i=new r.PassThrough({objectMode:!0});i._write=(r,o,s)=>this._getEntry(n[r],e[r],t).then(e=>{null!==e&&t.entryFilter(e)&&i.push(e),r===n.length-1&&i.end(),s()}).catch(s);for(let e=0;e<n.length;e++)i.write(e);return i}_getEntry(e,t,n){return this._getStat(e).then(e=>this._makeEntry(e,t)).catch(e=>{if(n.errorFilter(e))return null;throw e})}_getStat(e){return new Promise((t,n)=>{this._stat(e,this._fsStatSettings,(e,r)=>null===e?t(r):n(e))})}}t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(83),i=n(93),o=n(94),s=n(96);function a(e={}){return e instanceof s.default?e:new s.default(e)}t.Settings=s.default,t.walk=function(e,t,n){if("function"==typeof t)return new r.default(e,a()).read(t);new r.default(e,a(t)).read(n)},t.walkSync=function(e,t){const n=a(t);return new o.default(e,n).read()},t.walkStream=function(e,t){const n=a(t);return new i.default(e,n).read()}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(84),i=n(25),o=n(91),s=n(26),a=n(37);class c extends a.default{constructor(e,t){super(e,t),this._settings=t,this._scandir=i.scandir,this._emitter=new r.EventEmitter,this._queue=o(this._worker.bind(this),this._settings.concurrency),this._isFatalError=!1,this._isDestroyed=!1,this._queue.drain=()=>{this._isFatalError||this._emitter.emit("end")}}read(){return this._isFatalError=!1,this._isDestroyed=!1,setImmediate(()=>{this._pushToQueue(this._root,this._settings.basePath)}),this._emitter}destroy(){if(this._isDestroyed)throw new Error("The reader is already destroyed");this._isDestroyed=!0,this._queue.killAndDrain()}onEntry(e){this._emitter.on("entry",e)}onError(e){this._emitter.once("error",e)}onEnd(e){this._emitter.once("end",e)}_pushToQueue(e,t){const n={directory:e,base:t};this._queue.push(n,e=>{null!==e&&this._handleError(e)})}_worker(e,t){this._scandir(e.directory,this._settings.fsScandirSettings,(n,r)=>{if(null!==n)return t(n,void 0);for(const t of r)this._handleEntry(t,e.base);t(null,void 0)})}_handleError(e){s.isFatalError(this._settings,e)&&(this._isFatalError=!0,this._isDestroyed=!0,this._emitter.emit("error",e))}_handleEntry(e,t){if(this._isDestroyed||this._isFatalError)return;const n=e.path;void 0!==t&&(e.path=s.joinPathSegments(t,e.name,this._settings.pathSegmentSeparator)),s.isAppliedFilter(this._settings.entryFilter,e)&&this._emitEntry(e),e.dirent.isDirectory()&&s.isAppliedFilter(this._settings.deepFilter,e)&&this._pushToQueue(n,e.path)}_emitEntry(e){this._emitter.emit("entry",e)}}t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=process.versions.node.split("."),i=parseInt(r[0],10),o=parseInt(r[1],10),s=i>10,a=10===i&&o>=10;t.IS_SUPPORT_READDIR_WITH_FILE_TYPES=s||a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(87);t.fs=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(26);t.default=class{constructor(e,t){this._root=e,this._settings=t,this._root=r.replacePathSegmentSeparator(e,t.pathSegmentSeparator)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),i=n(13),o=n(7);t.default=class{constructor(e){this._settings=e,this._fsStatSettings=new i.Settings({followSymbolicLink:this._settings.followSymbolicLinks,fs:this._settings.fs,throwErrorOnBrokenSymbolicLink:this._settings.followSymbolicLinks})}_getFullEntryPath(e){return r.resolve(this._settings.cwd,e)}_makeEntry(e,t){const n={name:t,path:t,dirent:o.fs.createDirentFromStats(t,e)};return this._settings.stats&&(n.stats=e),n}_isFatalError(e){return!o.errno.isEnoentCodeError(e)&&!this._settings.suppressErrors}}},function(e,t,n){"use strict";e.exports=n(15)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Disposable=void 0,function(e){e.create=function(e){return{dispose:e}}}(t.Disposable||(t.Disposable={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CancellationSenderStrategy=t.CancellationReceiverStrategy=t.ConnectionError=t.ConnectionErrors=t.LogTraceNotification=t.SetTraceNotification=t.TraceFormat=t.Trace=t.ProgressType=t.createMessageConnection=t.NullLogger=t.ConnectionOptions=t.ConnectionStrategy=t.WriteableStreamMessageWriter=t.AbstractMessageWriter=t.MessageWriter=t.ReadableStreamMessageReader=t.AbstractMessageReader=t.MessageReader=t.CancellationToken=t.CancellationTokenSource=t.Emitter=t.Event=t.Disposable=t.ParameterStructures=t.NotificationType9=t.NotificationType8=t.NotificationType7=t.NotificationType6=t.NotificationType5=t.NotificationType4=t.NotificationType3=t.NotificationType2=t.NotificationType1=t.NotificationType0=t.NotificationType=t.ErrorCodes=t.ResponseError=t.RequestType9=t.RequestType8=t.RequestType7=t.RequestType6=t.RequestType5=t.RequestType4=t.RequestType3=t.RequestType2=t.RequestType1=t.RequestType0=t.RequestType=t.RAL=void 0,t.CancellationStrategy=void 0;const r=n(42);Object.defineProperty(t,"RequestType",{enumerable:!0,get:function(){return r.RequestType}}),Object.defineProperty(t,"RequestType0",{enumerable:!0,get:function(){return r.RequestType0}}),Object.defineProperty(t,"RequestType1",{enumerable:!0,get:function(){return r.RequestType1}}),Object.defineProperty(t,"RequestType2",{enumerable:!0,get:function(){return r.RequestType2}}),Object.defineProperty(t,"RequestType3",{enumerable:!0,get:function(){return r.RequestType3}}),Object.defineProperty(t,"RequestType4",{enumerable:!0,get:function(){return r.RequestType4}}),Object.defineProperty(t,"RequestType5",{enumerable:!0,get:function(){return r.RequestType5}}),Object.defineProperty(t,"RequestType6",{enumerable:!0,get:function(){return r.RequestType6}}),Object.defineProperty(t,"RequestType7",{enumerable:!0,get:function(){return r.RequestType7}}),Object.defineProperty(t,"RequestType8",{enumerable:!0,get:function(){return r.RequestType8}}),Object.defineProperty(t,"RequestType9",{enumerable:!0,get:function(){return r.RequestType9}}),Object.defineProperty(t,"ResponseError",{enumerable:!0,get:function(){return r.ResponseError}}),Object.defineProperty(t,"ErrorCodes",{enumerable:!0,get:function(){return r.ErrorCodes}}),Object.defineProperty(t,"NotificationType",{enumerable:!0,get:function(){return r.NotificationType}}),Object.defineProperty(t,"NotificationType0",{enumerable:!0,get:function(){return r.NotificationType0}}),Object.defineProperty(t,"NotificationType1",{enumerable:!0,get:function(){return r.NotificationType1}}),Object.defineProperty(t,"NotificationType2",{enumerable:!0,get:function(){return r.NotificationType2}}),Object.defineProperty(t,"NotificationType3",{enumerable:!0,get:function(){return r.NotificationType3}}),Object.defineProperty(t,"NotificationType4",{enumerable:!0,get:function(){return r.NotificationType4}}),Object.defineProperty(t,"NotificationType5",{enumerable:!0,get:function(){return r.NotificationType5}}),Object.defineProperty(t,"NotificationType6",{enumerable:!0,get:function(){return r.NotificationType6}}),Object.defineProperty(t,"NotificationType7",{enumerable:!0,get:function(){return r.NotificationType7}}),Object.defineProperty(t,"NotificationType8",{enumerable:!0,get:function(){return r.NotificationType8}}),Object.defineProperty(t,"NotificationType9",{enumerable:!0,get:function(){return r.NotificationType9}}),Object.defineProperty(t,"ParameterStructures",{enumerable:!0,get:function(){return r.ParameterStructures}});const i=n(40);Object.defineProperty(t,"Disposable",{enumerable:!0,get:function(){return i.Disposable}});const o=n(17);Object.defineProperty(t,"Event",{enumerable:!0,get:function(){return o.Event}}),Object.defineProperty(t,"Emitter",{enumerable:!0,get:function(){return o.Emitter}});const s=n(43);Object.defineProperty(t,"CancellationTokenSource",{enumerable:!0,get:function(){return s.CancellationTokenSource}}),Object.defineProperty(t,"CancellationToken",{enumerable:!0,get:function(){return s.CancellationToken}});const a=n(117);Object.defineProperty(t,"MessageReader",{enumerable:!0,get:function(){return a.MessageReader}}),Object.defineProperty(t,"AbstractMessageReader",{enumerable:!0,get:function(){return a.AbstractMessageReader}}),Object.defineProperty(t,"ReadableStreamMessageReader",{enumerable:!0,get:function(){return a.ReadableStreamMessageReader}});const c=n(118);Object.defineProperty(t,"MessageWriter",{enumerable:!0,get:function(){return c.MessageWriter}}),Object.defineProperty(t,"AbstractMessageWriter",{enumerable:!0,get:function(){return c.AbstractMessageWriter}}),Object.defineProperty(t,"WriteableStreamMessageWriter",{enumerable:!0,get:function(){return c.WriteableStreamMessageWriter}});const u=n(120);Object.defineProperty(t,"ConnectionStrategy",{enumerable:!0,get:function(){return u.ConnectionStrategy}}),Object.defineProperty(t,"ConnectionOptions",{enumerable:!0,get:function(){return u.ConnectionOptions}}),Object.defineProperty(t,"NullLogger",{enumerable:!0,get:function(){return u.NullLogger}}),Object.defineProperty(t,"createMessageConnection",{enumerable:!0,get:function(){return u.createMessageConnection}}),Object.defineProperty(t,"ProgressType",{enumerable:!0,get:function(){return u.ProgressType}}),Object.defineProperty(t,"Trace",{enumerable:!0,get:function(){return u.Trace}}),Object.defineProperty(t,"TraceFormat",{enumerable:!0,get:function(){return u.TraceFormat}}),Object.defineProperty(t,"SetTraceNotification",{enumerable:!0,get:function(){return u.SetTraceNotification}}),Object.defineProperty(t,"LogTraceNotification",{enumerable:!0,get:function(){return u.LogTraceNotification}}),Object.defineProperty(t,"ConnectionErrors",{enumerable:!0,get:function(){return u.ConnectionErrors}}),Object.defineProperty(t,"ConnectionError",{enumerable:!0,get:function(){return u.ConnectionError}}),Object.defineProperty(t,"CancellationReceiverStrategy",{enumerable:!0,get:function(){return u.CancellationReceiverStrategy}}),Object.defineProperty(t,"CancellationSenderStrategy",{enumerable:!0,get:function(){return u.CancellationSenderStrategy}}),Object.defineProperty(t,"CancellationStrategy",{enumerable:!0,get:function(){return u.CancellationStrategy}});const l=n(8);t.RAL=l.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isResponseMessage=t.isNotificationMessage=t.isRequestMessage=t.NotificationType9=t.NotificationType8=t.NotificationType7=t.NotificationType6=t.NotificationType5=t.NotificationType4=t.NotificationType3=t.NotificationType2=t.NotificationType1=t.NotificationType0=t.NotificationType=t.RequestType9=t.RequestType8=t.RequestType7=t.RequestType6=t.RequestType5=t.RequestType4=t.RequestType3=t.RequestType2=t.RequestType1=t.RequestType=t.RequestType0=t.AbstractMessageSignature=t.ParameterStructures=t.ResponseError=t.ErrorCodes=void 0;const r=n(16);var i;!function(e){e.ParseError=-32700,e.InvalidRequest=-32600,e.MethodNotFound=-32601,e.InvalidParams=-32602,e.InternalError=-32603,e.jsonrpcReservedErrorRangeStart=-32099,e.serverErrorStart=e.jsonrpcReservedErrorRangeStart,e.MessageWriteError=-32099,e.MessageReadError=-32098,e.ServerNotInitialized=-32002,e.UnknownErrorCode=-32001,e.jsonrpcReservedErrorRangeEnd=-32e3,e.serverErrorEnd=e.jsonrpcReservedErrorRangeEnd}(i=t.ErrorCodes||(t.ErrorCodes={}));class o extends Error{constructor(e,t,n){super(t),this.code=r.number(e)?e:i.UnknownErrorCode,this.data=n,Object.setPrototypeOf(this,o.prototype)}toJson(){return{code:this.code,message:this.message,data:this.data}}}t.ResponseError=o;class s{constructor(e){this.kind=e}static is(e){return e===s.auto||e===s.byName||e===s.byPosition}toString(){return this.kind}}t.ParameterStructures=s,s.auto=new s("auto"),s.byPosition=new s("byPosition"),s.byName=new s("byName");class a{constructor(e,t){this.method=e,this.numberOfParams=t}get parameterStructures(){return s.auto}}t.AbstractMessageSignature=a;t.RequestType0=class extends a{constructor(e){super(e,0)}};t.RequestType=class extends a{constructor(e,t=s.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}};t.RequestType1=class extends a{constructor(e,t=s.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}};t.RequestType2=class extends a{constructor(e){super(e,2)}};t.RequestType3=class extends a{constructor(e){super(e,3)}};t.RequestType4=class extends a{constructor(e){super(e,4)}};t.RequestType5=class extends a{constructor(e){super(e,5)}};t.RequestType6=class extends a{constructor(e){super(e,6)}};t.RequestType7=class extends a{constructor(e){super(e,7)}};t.RequestType8=class extends a{constructor(e){super(e,8)}};t.RequestType9=class extends a{constructor(e){super(e,9)}};t.NotificationType=class extends a{constructor(e,t=s.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}};t.NotificationType0=class extends a{constructor(e){super(e,0)}};t.NotificationType1=class extends a{constructor(e,t=s.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}};t.NotificationType2=class extends a{constructor(e){super(e,2)}};t.NotificationType3=class extends a{constructor(e){super(e,3)}};t.NotificationType4=class extends a{constructor(e){super(e,4)}};t.NotificationType5=class extends a{constructor(e){super(e,5)}};t.NotificationType6=class extends a{constructor(e){super(e,6)}};t.NotificationType7=class extends a{constructor(e){super(e,7)}};t.NotificationType8=class extends a{constructor(e){super(e,8)}};t.NotificationType9=class extends a{constructor(e){super(e,9)}},t.isRequestMessage=function(e){const t=e;return t&&r.string(t.method)&&(r.string(t.id)||r.number(t.id))},t.isNotificationMessage=function(e){const t=e;return t&&r.string(t.method)&&void 0===e.id},t.isResponseMessage=function(e){const t=e;return t&&(void 0!==t.result||!!t.error)&&(r.string(t.id)||r.number(t.id)||null===t.id)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CancellationTokenSource=t.CancellationToken=void 0;const r=n(8),i=n(16),o=n(17);var s;!function(e){e.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:o.Event.None}),e.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:o.Event.None}),e.is=function(t){const n=t;return n&&(n===e.None||n===e.Cancelled||i.boolean(n.isCancellationRequested)&&!!n.onCancellationRequested)}}(s=t.CancellationToken||(t.CancellationToken={}));const a=Object.freeze((function(e,t){const n=r.default().timer.setTimeout(e.bind(t),0);return{dispose(){r.default().timer.clearTimeout(n)}}}));class c{constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?a:(this._emitter||(this._emitter=new o.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}}t.CancellationTokenSource=class{get token(){return this._token||(this._token=new c),this._token}cancel(){this._token?this._token.cancel():this._token=s.Cancelled}dispose(){this._token?this._token instanceof c&&this._token.dispose():this._token=s.None}}},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.statusBar=void 0;const i=n(0),o=n(1);class s extends o.Dispose{constructor(){super(...arguments),this.isLSPReady=!1,this.statusBar=void 0}get isInitialized(){return null!=this.statusBar}ready(){this.isLSPReady=!0,this.show("flutter",!1)}init(){this.statusBar=i.window.createStatusBarItem(0,{progress:!1}),this.push(this.statusBar),this.push(i.workspace.registerAutocmd({event:"BufEnter",request:!1,callback:()=>r(this,void 0,void 0,(function*(){if(this.isLSPReady){"dart"===(yield i.workspace.document).filetype?this.show("flutter"):this.hide()}}))}))}restartingLsp(){this.isLSPReady=!1,this.show("restartingLsp",!0)}show(e,t){this.statusBar&&(this.statusBar.text=e,void 0!==t&&(this.statusBar.isProgress=t),this.statusBar.show())}hide(){this.statusBar&&this.statusBar.hide()}progress(e=!0){this.statusBar&&(this.statusBar.isProgress=e)}dispose(){super.dispose(),this.statusBar=void 0}}t.statusBar=new s},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.activate=void 0;const i=n(0),o=n(4),s=n(46),a=n(112),c=n(145),u=n(153);t.activate=function(e){return r(this,void 0,void 0,(function*(){const t=i.workspace.getConfiguration("flutter");if(!t.get("enabled",!0))return;e.subscriptions.push(o.logger),o.logger.init(t.get("trace.server","off"));const n=new c.LspServer;e.subscriptions.push(n),e.subscriptions.push(new s.Commands(n)),e.subscriptions.push(new a.Providers),e.subscriptions.push(new u.SourceList(n))}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Commands=void 0;const r=n(1),i=n(47),o=n(109),s=n(110),a=n(111);class c extends r.Dispose{constructor(e){super(),this.push(new i.Dev,new o.Global,new a.LspCommands(e),new s.SuperCommand(e))}}t.Commands=c},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Dev=t.cmds=void 0;const i=n(0),o=n(9),s=n(29),a=n(107),c=n(14),u=n(5),l=n(1),d=n(4),f=n(14),h=n(108),p=d.logger.getlog("dev-command");t.cmds={hotReload:{cmd:"r",desc:"Hot reload"},hotRestart:{cmd:"R",desc:"Hot restart"},debugDumpAPP:{cmd:"w",desc:"You can dump the widget hierarchy of the app (debugDumpApp)",callback:()=>{s.devServer.openDevLog()}},debugDumpRenderTree:{cmd:"t",desc:"To dump the rendering tree of the app (debugDumpRenderTree)",callback:()=>{s.devServer.openDevLog()}},debugDumpLayerTree:{cmd:"L",desc:"For layers (debugDumpLayerTree)",callback:()=>{s.devServer.openDevLog()}},debugDumpSemanticsTraversalOrder:{cmd:"S",desc:"Accessibility (debugDumpSemantics) for traversal order"},debugDumpSemanticsHitTestOrder:{cmd:"U",desc:"Accessibility (debugDumpSemantics) for inverse hit test order"},showWidgetInspectorOverride:{cmd:"i",desc:"To toggle the widget inspector (WidgetsApp.showWidgetInspectorOverride)"},debugPaintSizeEnabled:{cmd:"p",desc:"To toggle the display of construction lines (debugPaintSizeEnabled)"},defaultTargetPlatform:{cmd:"o",desc:"To simulate different operating systems, (defaultTargetPlatform)"},elevationChecker:{cmd:"z",desc:"To toggle the elevation checker"},showPerformanceOverlay:{cmd:"P",desc:"To display the performance overlay (WidgetsApp.showPerformanceOverlay)"},debugProfileWidgetBuilds:{cmd:"a",desc:"To enable timeline events for all widget build methods, (debugProfileWidgetBuilds)"},screenshot:{cmd:"s",desc:"To save a screenshot to flutter.png"},detach:{cmd:"d",desc:"Detach server"},quit:{cmd:"q",desc:"Quit server"},copyProfilerUrl:{desc:"Copy the observatory debugger and profiler web page to the system clipboard (register +)",callback:e=>{e.copyProfilerUrl()}},openProfiler:{desc:"Observatory debugger and profiler web page",callback:e=>{e.openProfiler()}},openDevToolsProfiler:{desc:"Load DevTools page in an external web browser",callback:e=>{e.openDevToolsProfiler()}},clearDevLog:{desc:"Clear the flutter dev server log",callback:()=>{s.devServer.state&&s.devServer.clearDevLog()}},openDevLog:{desc:"Open flutter dev server log",callback:()=>{s.devServer.state&&s.devServer.openDevLog()}}};class m extends l.Dispose{constructor(){super(),this.cmds=[],this.onError=e=>{p(`devServer error: ${e.message}\n${e.stack}`),this.unRegisterCommands(),o.notification.show(""+e.message)},this.onExit=e=>{p("devServer exit with: "+e),this.unRegisterCommands(),0!==e&&1!==e&&o.notification.show("Flutter server exist with "+e)},this.shouldLayoutOutputFilter=!1,this.onStdout=e=>{e.forEach(e=>{const t=e.match(/^\s*An Observatory debugger and profiler on .* is available at:\s*(https?:\/\/127\.0\.0\.1:\d+\/.+\/)$/);if(t){this.profilerUrl=t[1];i.workspace.getConfiguration("flutter").get("runDevToolsAtStartup",!1)&&this.openDevToolsProfiler()}}),o.notification.show(this.filterInvalidLines(e))},this.onStderr=()=>{},["run","attach"].forEach(e=>{const t=`${u.cmdPrefix}.${e}`;this.push(i.commands.registerCommand(t,this[e+"Server"],this)),this.push((c.setCommandTitle(t,e+" flutter server"),{dispose(){c.deleteCommandTitle(t)}}))}),this.push(s.devServer),p("register dev command"),this.push(a.devToolsServer)}runServer(...e){this.execute("run",e)}attachServer(...e){this.execute("attach",e)}execute(e,t){return r(this,void 0,void 0,(function*(){p(`${e} dev server, devServer state: ${s.devServer.state}`);(yield s.devServer.start([e].concat(t)))&&(s.devServer.onError(this.onError),s.devServer.onExit(this.onExit),s.devServer.onStdout(this.onStdout),s.devServer.onStderr(this.onStderr),this.registerCommands())}))}registerCommands(){p("register commands"),this.cmds.push(...Object.keys(t.cmds).map(e=>{const n=`${u.cmdPrefix}.dev.${e}`;c.setCommandTitle(n,t.cmds[e].desc);const r=i.commands.registerCommand(n,this.execCmd(t.cmds[e]));return{dispose(){c.deleteCommandTitle(n),r.dispose()}}}))}unRegisterCommands(){p("unregister commands"),this.cmds&&this.cmds.forEach(e=>{e.dispose()}),this.cmds=[]}filterInvalidLines(e){return e.map(e=>f.reduceSpace(e)).filter(e=>this.shouldLayoutOutputFilter?(e.startsWith("flutter: ")&&(this.shouldLayoutOutputFilter=!1),!1):e.startsWith("flutter: ")?(this.shouldLayoutOutputFilter=!0,!0):!(""===e||/^[DIW]\//.test(e)||e.startsWith(" To hot reload")||e.startsWith("An Observatory debugger and profiler")||e.startsWith('For a more detailed help message, press "h"')||e.startsWith("Initializing hot reload")||e.startsWith("Performing hot reload")||e.startsWith("Reloaded ")||e.startsWith("Flutter run key commands.")||e.startsWith("r Hot reload. ")||e.startsWith("R Hot restart.")||e.startsWith("h Repeat this help message.")||e.startsWith('d Detach (terminate "flutter run" but leave application running).')||e.startsWith("c Clear the screen")||e.startsWith("q Quit (terminate the application on the device).")||e.startsWith("flutter: Another exception was thrown:")||e.startsWith("[VERBOSE-2:profiler_metrics_ios.mm")||e.startsWith("An Observatory debugger and profiler on")||/^flutter: #\d+ +.+$/.test(e)))}execCmd(e){return()=>{s.devServer.state?(e.cmd&&s.devServer.sendCommand(e.cmd),e.callback&&e.callback(this)):o.notification.show("Flutter server is not running!")}}copyProfilerUrl(){return r(this,void 0,void 0,(function*(){this.profilerUrl&&(s.devServer.state?i.workspace.nvim.command(`let @+='${this.profilerUrl}'`):o.notification.show("Flutter server is not running!"))}))}openProfiler(){if(this.profilerUrl){if(s.devServer.state)try{return h.opener(this.profilerUrl)}catch(e){p(`Open browser fail: ${e.message}\n${e.stack}`),o.notification.show("Open browser fail: "+(e.message||e))}o.notification.show("Flutter server is not running!")}}openDevToolsProfiler(){this.profilerUrl&&s.devServer.state&&(a.devToolsServer.state?this.launchDevToolsInBrowser():(a.devToolsServer.start(),a.devToolsServer.onStdout(()=>{this.launchDevToolsInBrowser()}),a.devToolsServer.onStderr(()=>{this.openDevToolsProfiler()})))}launchDevToolsInBrowser(){if(a.devToolsServer.state)try{const e=`http://${a.devToolsServer.devToolsUri}/#/?uri=ws${encodeURIComponent(this.profilerUrl)}`;return h.opener(e)}catch(e){p(`Open browser fail: ${e.message}\n${e.stack}`),o.notification.show("Open browser fail: "+(e.message||e))}}dispose(){super.dispose(),this.unRegisterCommands()}}t.Dev=m},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Message=void 0;const i=n(1),o=n(49);class s extends i.Dispose{constructor(e,t,n=1e3){super(),this.lines=e,this._time=n,this.top=0,this.width=0,this.height=0;for(const n of e){const e=Buffer.byteLength(n);this.width=Math.max(this.width,Math.min(e,t)),this.height=this.height+Math.max(1,Math.ceil(e/(t-2)))}this.floatWindow=new o.FloatWindow(this),this.push(this.floatWindow)}get time(){return this._time}get isInvalid(){return this._time<=0}show(e){return r(this,void 0,void 0,(function*(){this.top=e,yield this.floatWindow.show(e)}))}update(e,t){return r(this,void 0,void 0,(function*(){this._time-=e,this.top!==t&&(this.top=t,yield this.floatWindow.update(t))}))}}t.Message=s},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.FloatWindow=void 0;const i=n(0),o=n(1),s=n(4).logger.getlog("floatWin");class a extends o.Dispose{constructor(e){super(),this.message=e}show(e){return r(this,void 0,void 0,(function*(){const{nvim:t}=i.workspace,{message:n}=this,r=yield t.createNewBuffer(!1,!0);yield r.setLines(n.lines,{start:0,end:-1,strictIndexing:!1});const o=yield t.getOption("columns"),a=yield t.openFloatWindow(r,!1,{focusable:!1,relative:"editor",anchor:"NE",height:n.height,width:n.width+2,row:e,col:o});this.buf=r,this.win=a,t.pauseNotification(),yield a.setOption("number",!1),yield a.setOption("wrap",!0),yield a.setOption("relativenumber",!1),yield a.setOption("cursorline",!1),yield a.setOption("cursorcolumn",!1),yield a.setOption("conceallevel",2),yield a.setOption("signcolumn","no"),yield a.setOption("winhighlight","FoldColumn:NormalFloat"),yield t.resumeNotification();try{yield a.setOption("foldcolumn",i.workspace.isVim?1:"1")}catch(e){s("set foldcolumn error: "+(e.message||e))}}))}dispose(){const e=Object.create(null,{dispose:{get:()=>super.dispose}});return r(this,void 0,void 0,(function*(){e.dispose.call(this),this.buf&&(this.buf=void 0),this.win&&(yield this.win.close(!0))}))}update(e){return r(this,void 0,void 0,(function*(){const{win:t}=this;if(t){const n=yield t.getConfig();yield t.setConfig(Object.assign(Object.assign({},n),{row:e}))}}))}}t.FloatWindow=a},function(e,t,n){const r="win32"===process.platform||"cygwin"===process.env.OSTYPE||"msys"===process.env.OSTYPE,i=n(3),o=r?";":":",s=n(51),a=e=>Object.assign(new Error("not found: "+e),{code:"ENOENT"}),c=(e,t)=>{const n=t.colon||o,i=e.match(/\//)||r&&e.match(/\\/)?[""]:[...r?[process.cwd()]:[],...(t.path||process.env.PATH||"").split(n)],s=r?t.pathExt||process.env.PATHEXT||".EXE;.CMD;.BAT;.COM":"",a=r?s.split(n):[""];return r&&-1!==e.indexOf(".")&&""!==a[0]&&a.unshift(""),{pathEnv:i,pathExt:a,pathExtExe:s}},u=(e,t,n)=>{"function"==typeof t&&(n=t,t={}),t||(t={});const{pathEnv:r,pathExt:o,pathExtExe:u}=c(e,t),l=[],d=n=>new Promise((o,s)=>{if(n===r.length)return t.all&&l.length?o(l):s(a(e));const c=r[n],u=/^".*"$/.test(c)?c.slice(1,-1):c,d=i.join(u,e),h=!u&&/^\.[\\\/]/.test(e)?e.slice(0,2)+d:d;o(f(h,n,0))}),f=(e,n,r)=>new Promise((i,a)=>{if(r===o.length)return i(d(n+1));const c=o[r];s(e+c,{pathExt:u},(o,s)=>{if(!o&&s){if(!t.all)return i(e+c);l.push(e+c)}return i(f(e,n,r+1))})});return n?d(0).then(e=>n(null,e),n):d(0)};e.exports=u,u.sync=(e,t)=>{t=t||{};const{pathEnv:n,pathExt:r,pathExtExe:o}=c(e,t),u=[];for(let a=0;a<n.length;a++){const c=n[a],l=/^".*"$/.test(c)?c.slice(1,-1):c,d=i.join(l,e),f=!l&&/^\.[\\\/]/.test(e)?e.slice(0,2)+d:d;for(let e=0;e<r.length;e++){const n=f+r[e];try{if(s.sync(n,{pathExt:o})){if(!t.all)return n;u.push(n)}}catch(e){}}}if(t.all&&u.length)return u;if(t.nothrow)return null;throw a(e)}},function(e,t,n){var r;n(11);function i(e,t,n){if("function"==typeof t&&(n=t,t={}),!n){if("function"!=typeof Promise)throw new TypeError("callback not provided");return new Promise((function(n,r){i(e,t||{},(function(e,t){e?r(e):n(t)}))}))}r(e,t||{},(function(e,r){e&&("EACCES"===e.code||t&&t.ignoreErrors)&&(e=null,r=!1),n(e,r)}))}r="win32"===process.platform||global.TESTING_WINDOWS?n(52):n(53),e.exports=i,i.sync=function(e,t){try{return r.sync(e,t||{})}catch(e){if(t&&t.ignoreErrors||"EACCES"===e.code)return!1;throw e}}},function(e,t,n){e.exports=o,o.sync=function(e,t){return i(r.statSync(e),e,t)};var r=n(11);function i(e,t,n){return!(!e.isSymbolicLink()&&!e.isFile())&&function(e,t){var n=void 0!==t.pathExt?t.pathExt:process.env.PATHEXT;if(!n)return!0;if(-1!==(n=n.split(";")).indexOf(""))return!0;for(var r=0;r<n.length;r++){var i=n[r].toLowerCase();if(i&&e.substr(-i.length).toLowerCase()===i)return!0}return!1}(t,n)}function o(e,t,n){r.stat(e,(function(r,o){n(r,!r&&i(o,e,t))}))}},function(e,t,n){e.exports=i,i.sync=function(e,t){return o(r.statSync(e),t)};var r=n(11);function i(e,t,n){r.stat(e,(function(e,r){n(e,!e&&o(r,t))}))}function o(e,t){return e.isFile()&&function(e,t){var n=e.mode,r=e.uid,i=e.gid,o=void 0!==t.uid?t.uid:process.getuid&&process.getuid(),s=void 0!==t.gid?t.gid:process.getgid&&process.getgid(),a=parseInt("100",8),c=parseInt("010",8),u=parseInt("001",8),l=a|c;return n&u||n&c&&i===s||n&a&&r===o||n&l&&0===o}(e,t)}},function(e,t,n){"use strict";const r=n(55),i=n(78),o=n(103),s=n(104),a=n(106),c=n(7);async function u(e,t){d(e);const n=l(e,i.default,t),r=await Promise.all(n);return c.array.flatten(r)}function l(e,t,n){const i=[].concat(e),o=new a.default(n),s=r.generate(i,o),c=new t(o);return s.map(c.read,c)}function d(e){if(![].concat(e).every(e=>c.string.isString(e)&&!c.string.isEmpty(e)))throw new TypeError("Patterns must be a string (non empty) or an array of strings")}!function(e){e.sync=function(e,t){d(e);const n=l(e,s.default,t);return c.array.flatten(n)},e.stream=function(e,t){d(e);const n=l(e,o.default,t);return c.stream.merge(n)},e.generateTasks=function(e,t){d(e);const n=[].concat(e),i=new a.default(t);return r.generate(n,i)},e.isDynamicPattern=function(e,t){d(e);const n=new a.default(t);return c.pattern.isDynamicPattern(e,n)},e.escapePath=function(e){return d(e),c.path.escape(e)}}(u||(u={})),e.exports=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.convertPatternGroupToTask=t.convertPatternGroupsToTasks=t.groupPatternsByBaseDirectory=t.getNegativePatternsAsPositive=t.getPositivePatterns=t.convertPatternsToTasks=t.generate=void 0;const r=n(7);function i(e,t,n){const r=a(e);if("."in r){return[u(".",e,t,n)]}return c(r,t,n)}function o(e){return r.pattern.getPositivePatterns(e)}function s(e,t){return r.pattern.getNegativePatterns(e).concat(t).map(r.pattern.convertToPositivePattern)}function a(e){return e.reduce((e,t)=>{const n=r.pattern.getBaseDirectory(t);return n in e?e[n].push(t):e[n]=[t],e},{})}function c(e,t,n){return Object.keys(e).map(r=>u(r,e[r],t,n))}function u(e,t,n,i){return{dynamic:i,positive:t,negative:n,base:e,patterns:[].concat(t,n.map(r.pattern.convertToNegativePattern))}}t.generate=function(e,t){const n=o(e),a=s(e,t.ignore),c=n.filter(e=>r.pattern.isStaticPattern(e,t)),u=n.filter(e=>r.pattern.isDynamicPattern(e,t)),l=i(c,a,!1),d=i(u,a,!0);return l.concat(d)},t.convertPatternsToTasks=i,t.getPositivePatterns=o,t.getNegativePatternsAsPositive=s,t.groupPatternsByBaseDirectory=a,t.convertPatternGroupsToTasks=c,t.convertPatternGroupToTask=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.splitWhen=t.flatten=void 0,t.flatten=function(e){return e.reduce((e,t)=>[].concat(e,t),[])},t.splitWhen=function(e,t){const n=[[]];let r=0;for(const i of e)t(i)?(r++,n[r]=[]):n[r].push(i);return n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isEnoentCodeError=void 0,t.isEnoentCodeError=function(e){return"ENOENT"===e.code}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createDirentFromStats=void 0;class r{constructor(e,t){this.name=e,this.isBlockDevice=t.isBlockDevice.bind(t),this.isCharacterDevice=t.isCharacterDevice.bind(t),this.isDirectory=t.isDirectory.bind(t),this.isFIFO=t.isFIFO.bind(t),this.isFile=t.isFile.bind(t),this.isSocket=t.isSocket.bind(t),this.isSymbolicLink=t.isSymbolicLink.bind(t)}}t.createDirentFromStats=function(e,t){return new r(e,t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.removeLeadingDotSegment=t.escape=t.makeAbsolute=t.unixify=void 0;const r=n(3),i=/(\\?)([()*?[\]{|}]|^!|[!+@](?=\())/g;t.unixify=function(e){return e.replace(/\\/g,"/")},t.makeAbsolute=function(e,t){return r.resolve(e,t)},t.escape=function(e){return e.replace(i,"\\$2")},t.removeLeadingDotSegment=function(e){if("."===e.charAt(0)){const t=e.charAt(1);if("/"===t||"\\"===t)return e.slice(2)}return e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.matchAny=t.convertPatternsToRe=t.makeRe=t.getPatternParts=t.expandBraceExpansion=t.expandPatternsWithBraceExpansion=t.isAffectDepthOfReadingPattern=t.endsWithSlashGlobStar=t.hasGlobStar=t.getBaseDirectory=t.getPositivePatterns=t.getNegativePatterns=t.isPositivePattern=t.isNegativePattern=t.convertToNegativePattern=t.convertToPositivePattern=t.isDynamicPattern=t.isStaticPattern=void 0;const r=n(3),i=n(61),o=n(64),s=n(31),a=/[*?]|^!/,c=/\[.*]/,u=/(?:^|[^!*+?@])\(.*\|.*\)/,l=/[!*+?@]\(.*\)/,d=/{.*(?:,|\.\.).*}/;function f(e,t={}){return!h(e,t)}function h(e,t={}){return""!==e&&(!(!1!==t.caseSensitiveMatch&&!e.includes("\\"))||(!!(a.test(e)||c.test(e)||u.test(e))||(!(!1===t.extglob||!l.test(e))||!(!1===t.braceExpansion||!d.test(e)))))}function p(e){return e.startsWith("!")&&"("!==e[1]}function m(e){return!p(e)}function g(e){return e.endsWith("/**")}function y(e){return o.braces(e,{expand:!0,nodupes:!0})}function v(e,t){return o.makeRe(e,t)}t.isStaticPattern=f,t.isDynamicPattern=h,t.convertToPositivePattern=function(e){return p(e)?e.slice(1):e},t.convertToNegativePattern=function(e){return"!"+e},t.isNegativePattern=p,t.isPositivePattern=m,t.getNegativePatterns=function(e){return e.filter(p)},t.getPositivePatterns=function(e){return e.filter(m)},t.getBaseDirectory=function(e){return i(e,{flipBackslashes:!1})},t.hasGlobStar=function(e){return e.includes("**")},t.endsWithSlashGlobStar=g,t.isAffectDepthOfReadingPattern=function(e){const t=r.basename(e);return g(e)||f(t)},t.expandPatternsWithBraceExpansion=function(e){return e.reduce((e,t)=>e.concat(y(t)),[])},t.expandBraceExpansion=y,t.getPatternParts=function(e,t){let{parts:n}=s.scan(e,Object.assign(Object.assign({},t),{parts:!0}));return 0===n.length&&(n=[e]),n[0].startsWith("/")&&(n[0]=n[0].slice(1),n.unshift("")),n},t.makeRe=v,t.convertPatternsToRe=function(e,t){return e.map(e=>v(e,t))},t.matchAny=function(e,t){return t.some(t=>t.test(e))}},function(e,t,n){"use strict";var r=n(62),i=n(3).posix.dirname,o="win32"===n(6).platform(),s=/\\/g,a=/[\{\[].*[\/]*.*[\}\]]$/,c=/(^|[^\\])([\{\[]|\([^\)]+$)/,u=/\\([\!\*\?\|\[\]\(\)\{\}])/g;e.exports=function(e,t){Object.assign({flipBackslashes:!0},t).flipBackslashes&&o&&e.indexOf("/")<0&&(e=e.replace(s,"/")),a.test(e)&&(e+="/"),e+="a";do{e=i(e)}while(r(e)||c.test(e));return e.replace(u,"$1")}},function(e,t,n){
/*!
 * is-glob <https://github.com/jonschlinkert/is-glob>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */
var r=n(63),i={"{":"}","(":")","[":"]"},o=/\\(.)|(^!|\*|[\].+)]\?|\[[^\\\]]+\]|\{[^\\}]+\}|\(\?[:!=][^\\)]+\)|\([^|]+\|[^\\)]+\))/,s=/\\(.)|(^!|[*?{}()[\]]|\(\?)/;e.exports=function(e,t){if("string"!=typeof e||""===e)return!1;if(r(e))return!0;var n,a=o;for(t&&!1===t.strict&&(a=s);n=a.exec(e);){if(n[2])return!0;var c=n.index+n[0].length,u=n[1],l=u?i[u]:null;if(u&&l){var d=e.indexOf(l,c);-1!==d&&(c=d+1)}e=e.slice(c)}return!1}},function(e,t){
/*!
 * is-extglob <https://github.com/jonschlinkert/is-extglob>
 *
 * Copyright (c) 2014-2016, Jon Schlinkert.
 * Licensed under the MIT License.
 */
e.exports=function(e){if("string"!=typeof e||""===e)return!1;for(var t;t=/(\\).|([@?!+*]\(.*\))/g.exec(e);){if(t[2])return!0;e=e.slice(t.index+t[0].length)}return!1}},function(e,t,n){"use strict";const r=n(19),i=n(65),o=n(31),s=n(20),a=e=>"string"==typeof e&&(""===e||"./"===e),c=(e,t,n)=>{t=[].concat(t),e=[].concat(e);let r=new Set,i=new Set,s=new Set,a=0,c=e=>{s.add(e.output),n&&n.onResult&&n.onResult(e)};for(let s=0;s<t.length;s++){let u=o(String(t[s]),{...n,onResult:c},!0),l=u.state.negated||u.state.negatedExtglob;l&&a++;for(let t of e){let e=u(t,!0);(l?!e.isMatch:e.isMatch)&&(l?r.add(e.output):(r.delete(e.output),i.add(e.output)))}}let u=(a===t.length?[...s]:[...i]).filter(e=>!r.has(e));if(n&&0===u.length){if(!0===n.failglob)throw new Error(`No matches found for "${t.join(", ")}"`);if(!0===n.nonull||!0===n.nullglob)return n.unescape?t.map(e=>e.replace(/\\/g,"")):t}return u};c.match=c,c.matcher=(e,t)=>o(e,t),c.any=c.isMatch=(e,t,n)=>o(t,n)(e),c.not=(e,t,n={})=>{t=[].concat(t).map(String);let r=new Set,i=[],o=c(e,t,{...n,onResult:e=>{n.onResult&&n.onResult(e),i.push(e.output)}});for(let e of i)o.includes(e)||r.add(e);return[...r]},c.contains=(e,t,n)=>{if("string"!=typeof e)throw new TypeError(`Expected a string: "${r.inspect(e)}"`);if(Array.isArray(t))return t.some(t=>c.contains(e,t,n));if("string"==typeof t){if(a(e)||a(t))return!1;if(e.includes(t)||e.startsWith("./")&&e.slice(2).includes(t))return!0}return c.isMatch(e,t,{...n,contains:!0})},c.matchKeys=(e,t,n)=>{if(!s.isObject(e))throw new TypeError("Expected the first argument to be an object");let r=c(Object.keys(e),t,n),i={};for(let t of r)i[t]=e[t];return i},c.some=(e,t,n)=>{let r=[].concat(e);for(let e of[].concat(t)){let t=o(String(e),n);if(r.some(e=>t(e)))return!0}return!1},c.every=(e,t,n)=>{let r=[].concat(e);for(let e of[].concat(t)){let t=o(String(e),n);if(!r.every(e=>t(e)))return!1}return!0},c.all=(e,t,n)=>{if("string"!=typeof e)throw new TypeError(`Expected a string: "${r.inspect(e)}"`);return[].concat(t).every(t=>o(t,n)(e))},c.capture=(e,t,n)=>{let r=s.isWindows(n),i=o.makeRe(String(e),{...n,capture:!0}).exec(r?s.toPosixSlashes(t):t);if(i)return i.slice(1).map(e=>void 0===e?"":e)},c.makeRe=(...e)=>o.makeRe(...e),c.scan=(...e)=>o.scan(...e),c.parse=(e,t)=>{let n=[];for(let r of[].concat(e||[]))for(let e of i(String(r),t))n.push(o.parse(e,t));return n},c.braces=(e,t)=>{if("string"!=typeof e)throw new TypeError("Expected a string");return t&&!0===t.nobrace||!/\{.*\}/.test(e)?[e]:i(e,t)},c.braceExpand=(e,t)=>{if("string"!=typeof e)throw new TypeError("Expected a string");return c.braces(e,{...t,expand:!0})},e.exports=c},function(e,t,n){"use strict";const r=n(23),i=n(66),o=n(69),s=n(70),a=(e,t={})=>{let n=[];if(Array.isArray(e))for(let r of e){let e=a.create(r,t);Array.isArray(e)?n.push(...e):n.push(e)}else n=[].concat(a.create(e,t));return t&&!0===t.expand&&!0===t.nodupes&&(n=[...new Set(n)]),n};a.parse=(e,t={})=>s(e,t),a.stringify=(e,t={})=>r("string"==typeof e?a.parse(e,t):e,t),a.compile=(e,t={})=>("string"==typeof e&&(e=a.parse(e,t)),i(e,t)),a.expand=(e,t={})=>{"string"==typeof e&&(e=a.parse(e,t));let n=o(e,t);return!0===t.noempty&&(n=n.filter(Boolean)),!0===t.nodupes&&(n=[...new Set(n)]),n},a.create=(e,t={})=>""===e||e.length<3?[e]:!0!==t.expand?a.compile(e,t):a.expand(e,t),e.exports=a},function(e,t,n){"use strict";const r=n(30),i=n(24);e.exports=(e,t={})=>{let n=(e,o={})=>{let s=i.isInvalidBrace(o),a=!0===e.invalid&&!0===t.escapeInvalid,c=!0===s||!0===a,u=!0===t.escapeInvalid?"\\":"",l="";if(!0===e.isOpen)return u+e.value;if(!0===e.isClose)return u+e.value;if("open"===e.type)return c?u+e.value:"(";if("close"===e.type)return c?u+e.value:")";if("comma"===e.type)return"comma"===e.prev.type?"":c?e.value:"|";if(e.value)return e.value;if(e.nodes&&e.ranges>0){let n=i.reduce(e.nodes),o=r(...n,{...t,wrap:!1,toRegex:!0});if(0!==o.length)return n.length>1&&o.length>1?`(${o})`:o}if(e.nodes)for(let t of e.nodes)l+=n(t,e);return l};return n(e)}},function(e,t,n){"use strict";
/*!
 * to-regex-range <https://github.com/micromatch/to-regex-range>
 *
 * Copyright (c) 2015-present, Jon Schlinkert.
 * Released under the MIT License.
 */const r=n(68),i=(e,t,n)=>{if(!1===r(e))throw new TypeError("toRegexRange: expected the first argument to be a number");if(void 0===t||e===t)return String(e);if(!1===r(t))throw new TypeError("toRegexRange: expected the second argument to be a number.");let o={relaxZeros:!0,...n};"boolean"==typeof o.strictZeros&&(o.relaxZeros=!1===o.strictZeros);let c=e+":"+t+"="+String(o.relaxZeros)+String(o.shorthand)+String(o.capture)+String(o.wrap);if(i.cache.hasOwnProperty(c))return i.cache[c].result;let u=Math.min(e,t),l=Math.max(e,t);if(1===Math.abs(u-l)){let n=e+"|"+t;return o.capture?`(${n})`:!1===o.wrap?n:`(?:${n})`}let d=p(e)||p(t),f={min:e,max:t,a:u,b:l},h=[],m=[];if(d&&(f.isPadded=d,f.maxLen=String(f.max).length),u<0){m=s(l<0?Math.abs(l):1,Math.abs(u),f,o),u=f.a=0}return l>=0&&(h=s(u,l,f,o)),f.negatives=m,f.positives=h,f.result=function(e,t,n){let r=a(e,t,"-",!1,n)||[],i=a(t,e,"",!1,n)||[],o=a(e,t,"-?",!0,n)||[];return r.concat(o).concat(i).join("|")}(m,h,o),!0===o.capture?f.result=`(${f.result})`:!1!==o.wrap&&h.length+m.length>1&&(f.result=`(?:${f.result})`),i.cache[c]=f,f.result};function o(e,t,n){if(e===t)return{pattern:e,count:[],digits:0};let r=function(e,t){let n=[];for(let r=0;r<e.length;r++)n.push([e[r],t[r]]);return n}(e,t),i=r.length,o="",s=0;for(let e=0;e<i;e++){let[t,i]=r[e];t===i?o+=t:"0"!==t||"9"!==i?o+=h(t,i,n):s++}return s&&(o+=!0===n.shorthand?"\\d":"[0-9]"),{pattern:o,count:[s],digits:i}}function s(e,t,n,r){let i,s=function(e,t){let n=1,r=1,i=l(e,n),o=new Set([t]);for(;e<=i&&i<=t;)o.add(i),n+=1,i=l(e,n);for(i=d(t+1,r)-1;e<i&&i<=t;)o.add(i),r+=1,i=d(t+1,r)-1;return o=[...o],o.sort(c),o}(e,t),a=[],u=e;for(let e=0;e<s.length;e++){let t=s[e],c=o(String(u),String(t),r),l="";n.isPadded||!i||i.pattern!==c.pattern?(n.isPadded&&(l=m(t,n,r)),c.string=l+c.pattern+f(c.count),a.push(c),u=t+1,i=c):(i.count.length>1&&i.count.pop(),i.count.push(c.count[0]),i.string=i.pattern+f(i.count),u=t+1)}return a}function a(e,t,n,r,i){let o=[];for(let i of e){let{string:e}=i;r||u(t,"string",e)||o.push(n+e),r&&u(t,"string",e)&&o.push(n+e)}return o}function c(e,t){return e>t?1:t>e?-1:0}function u(e,t,n){return e.some(e=>e[t]===n)}function l(e,t){return Number(String(e).slice(0,-t)+"9".repeat(t))}function d(e,t){return e-e%Math.pow(10,t)}function f(e){let[t=0,n=""]=e;return n||t>1?`{${t+(n?","+n:"")}}`:""}function h(e,t,n){return`[${e}${t-e==1?"":"-"}${t}]`}function p(e){return/^-?(0+)\d/.test(e)}function m(e,t,n){if(!t.isPadded)return e;let r=Math.abs(t.maxLen-String(e).length),i=!1!==n.relaxZeros;switch(r){case 0:return"";case 1:return i?"0?":"0";case 2:return i?"0{0,2}":"00";default:return i?`0{0,${r}}`:`0{${r}}`}}i.cache={},i.clearCache=()=>i.cache={},e.exports=i},function(e,t,n){"use strict";
/*!
 * is-number <https://github.com/jonschlinkert/is-number>
 *
 * Copyright (c) 2014-present, Jon Schlinkert.
 * Released under the MIT License.
 */e.exports=function(e){return"number"==typeof e?e-e==0:"string"==typeof e&&""!==e.trim()&&(Number.isFinite?Number.isFinite(+e):isFinite(+e))}},function(e,t,n){"use strict";const r=n(30),i=n(23),o=n(24),s=(e="",t="",n=!1)=>{let r=[];if(e=[].concat(e),!(t=[].concat(t)).length)return e;if(!e.length)return n?o.flatten(t).map(e=>`{${e}}`):t;for(let i of e)if(Array.isArray(i))for(let e of i)r.push(s(e,t,n));else for(let e of t)!0===n&&"string"==typeof e&&(e=`{${e}}`),r.push(Array.isArray(e)?s(i,e,n):i+e);return o.flatten(r)};e.exports=(e,t={})=>{let n=void 0===t.rangeLimit?1e3:t.rangeLimit,a=(e,c={})=>{e.queue=[];let u=c,l=c.queue;for(;"brace"!==u.type&&"root"!==u.type&&u.parent;)u=u.parent,l=u.queue;if(e.invalid||e.dollar)return void l.push(s(l.pop(),i(e,t)));if("brace"===e.type&&!0!==e.invalid&&2===e.nodes.length)return void l.push(s(l.pop(),["{}"]));if(e.nodes&&e.ranges>0){let a=o.reduce(e.nodes);if(o.exceedsLimit(...a,t.step,n))throw new RangeError("expanded array length exceeds range limit. Use options.rangeLimit to increase or disable the limit.");let c=r(...a,t);return 0===c.length&&(c=i(e,t)),l.push(s(l.pop(),c)),void(e.nodes=[])}let d=o.encloseBrace(e),f=e.queue,h=e;for(;"brace"!==h.type&&"root"!==h.type&&h.parent;)h=h.parent,f=h.queue;for(let t=0;t<e.nodes.length;t++){let n=e.nodes[t];"comma"!==n.type||"brace"!==e.type?"close"!==n.type?n.value&&"open"!==n.type?f.push(s(f.pop(),n.value)):n.nodes&&a(n,e):l.push(s(l.pop(),f,d)):(1===t&&f.push(""),f.push(""))}return f};return o.flatten(a(e))}},function(e,t,n){"use strict";const r=n(23),{MAX_LENGTH:i,CHAR_BACKSLASH:o,CHAR_BACKTICK:s,CHAR_COMMA:a,CHAR_DOT:c,CHAR_LEFT_PARENTHESES:u,CHAR_RIGHT_PARENTHESES:l,CHAR_LEFT_CURLY_BRACE:d,CHAR_RIGHT_CURLY_BRACE:f,CHAR_LEFT_SQUARE_BRACKET:h,CHAR_RIGHT_SQUARE_BRACKET:p,CHAR_DOUBLE_QUOTE:m,CHAR_SINGLE_QUOTE:g,CHAR_NO_BREAK_SPACE:y,CHAR_ZERO_WIDTH_NOBREAK_SPACE:v}=n(71);e.exports=(e,t={})=>{if("string"!=typeof e)throw new TypeError("Expected a string");let n=t||{},_="number"==typeof n.maxLength?Math.min(i,n.maxLength):i;if(e.length>_)throw new SyntaxError(`Input length (${e.length}), exceeds max characters (${_})`);let b,R={type:"root",input:e,nodes:[]},w=[R],S=R,T=R,C=0,E=e.length,k=0,x=0;const P=()=>e[k++],O=e=>{if("text"===e.type&&"dot"===T.type&&(T.type="text"),!T||"text"!==T.type||"text"!==e.type)return S.nodes.push(e),e.parent=S,e.prev=T,T=e,e;T.value+=e.value};for(O({type:"bos"});k<E;)if(S=w[w.length-1],b=P(),b!==v&&b!==y)if(b!==o)if(b!==p)if(b!==h)if(b!==u)if(b!==l)if(b!==m&&b!==g&&b!==s)if(b!==d)if(b!==f)if(b===a&&x>0){if(S.ranges>0){S.ranges=0;let e=S.nodes.shift();S.nodes=[e,{type:"text",value:r(S)}]}O({type:"comma",value:b}),S.commas++}else if(b===c&&x>0&&0===S.commas){let e=S.nodes;if(0===x||0===e.length){O({type:"text",value:b});continue}if("dot"===T.type){if(S.range=[],T.value+=b,T.type="range",3!==S.nodes.length&&5!==S.nodes.length){S.invalid=!0,S.ranges=0,T.type="text";continue}S.ranges++,S.args=[];continue}if("range"===T.type){e.pop();let t=e[e.length-1];t.value+=T.value+b,T=t,S.ranges--;continue}O({type:"dot",value:b})}else O({type:"text",value:b});else{if("brace"!==S.type){O({type:"text",value:b});continue}let e="close";S=w.pop(),S.close=!0,O({type:e,value:b}),x--,S=w[w.length-1]}else{x++;let e=T.value&&"$"===T.value.slice(-1)||!0===S.dollar;S=O({type:"brace",open:!0,close:!1,dollar:e,depth:x,commas:0,ranges:0,nodes:[]}),w.push(S),O({type:"open",value:b})}else{let e,n=b;for(!0!==t.keepQuotes&&(b="");k<E&&(e=P());)if(e!==o){if(e===n){!0===t.keepQuotes&&(b+=e);break}b+=e}else b+=e+P();O({type:"text",value:b})}else{if("paren"!==S.type){O({type:"text",value:b});continue}S=w.pop(),O({type:"text",value:b}),S=w[w.length-1]}else S=O({type:"paren",nodes:[]}),w.push(S),O({type:"text",value:b});else{C++;let e;for(;k<E&&(e=P());)if(b+=e,e!==h)if(e!==o){if(e===p&&(C--,0===C))break}else b+=P();else C++;O({type:"text",value:b})}else O({type:"text",value:"\\"+b});else O({type:"text",value:(t.keepEscaping?b:"")+P()});do{if(S=w.pop(),"root"!==S.type){S.nodes.forEach(e=>{e.nodes||("open"===e.type&&(e.isOpen=!0),"close"===e.type&&(e.isClose=!0),e.nodes||(e.type="text"),e.invalid=!0)});let e=w[w.length-1],t=e.nodes.indexOf(S);e.nodes.splice(t,1,...S.nodes)}}while(w.length>0);return O({type:"eos"}),R}},function(e,t,n){"use strict";e.exports={MAX_LENGTH:65536,CHAR_0:"0",CHAR_9:"9",CHAR_UPPERCASE_A:"A",CHAR_LOWERCASE_A:"a",CHAR_UPPERCASE_Z:"Z",CHAR_LOWERCASE_Z:"z",CHAR_LEFT_PARENTHESES:"(",CHAR_RIGHT_PARENTHESES:")",CHAR_ASTERISK:"*",CHAR_AMPERSAND:"&",CHAR_AT:"@",CHAR_BACKSLASH:"\\",CHAR_BACKTICK:"`",CHAR_CARRIAGE_RETURN:"\r",CHAR_CIRCUMFLEX_ACCENT:"^",CHAR_COLON:":",CHAR_COMMA:",",CHAR_DOLLAR:"$",CHAR_DOT:".",CHAR_DOUBLE_QUOTE:'"',CHAR_EQUAL:"=",CHAR_EXCLAMATION_MARK:"!",CHAR_FORM_FEED:"\f",CHAR_FORWARD_SLASH:"/",CHAR_HASH:"#",CHAR_HYPHEN_MINUS:"-",CHAR_LEFT_ANGLE_BRACKET:"<",CHAR_LEFT_CURLY_BRACE:"{",CHAR_LEFT_SQUARE_BRACKET:"[",CHAR_LINE_FEED:"\n",CHAR_NO_BREAK_SPACE:"",CHAR_PERCENT:"%",CHAR_PLUS:"+",CHAR_QUESTION_MARK:"?",CHAR_RIGHT_ANGLE_BRACKET:">",CHAR_RIGHT_CURLY_BRACE:"}",CHAR_RIGHT_SQUARE_BRACKET:"]",CHAR_SEMICOLON:";",CHAR_SINGLE_QUOTE:"'",CHAR_SPACE:" ",CHAR_TAB:"\t",CHAR_UNDERSCORE:"_",CHAR_VERTICAL_LINE:"|",CHAR_ZERO_WIDTH_NOBREAK_SPACE:"\ufeff"}},function(e,t,n){"use strict";const r=n(3),i=n(73),o=n(74),s=n(20),a=n(21),c=(e,t,n=!1)=>{if(Array.isArray(e)){const r=e.map(e=>c(e,t,n));return e=>{for(const t of r){const n=t(e);if(n)return n}return!1}}const r=(i=e)&&"object"==typeof i&&!Array.isArray(i)&&e.tokens&&e.input;var i;if(""===e||"string"!=typeof e&&!r)throw new TypeError("Expected pattern to be a non-empty string");const o=t||{},a=s.isWindows(t),u=r?c.compileRe(e,t):c.makeRe(e,t,!1,!0),l=u.state;delete u.state;let d=()=>!1;if(o.ignore){const e={...t,ignore:null,onMatch:null,onResult:null};d=c(o.ignore,e,n)}const f=(n,r=!1)=>{const{isMatch:i,match:s,output:f}=c.test(n,u,t,{glob:e,posix:a}),h={glob:e,state:l,regex:u,posix:a,input:n,output:f,match:s,isMatch:i};return"function"==typeof o.onResult&&o.onResult(h),!1===i?(h.isMatch=!1,!!r&&h):d(n)?("function"==typeof o.onIgnore&&o.onIgnore(h),h.isMatch=!1,!!r&&h):("function"==typeof o.onMatch&&o.onMatch(h),!r||h)};return n&&(f.state=l),f};c.test=(e,t,n,{glob:r,posix:i}={})=>{if("string"!=typeof e)throw new TypeError("Expected input to be a string");if(""===e)return{isMatch:!1,output:""};const o=n||{},a=o.format||(i?s.toPosixSlashes:null);let u=e===r,l=u&&a?a(e):e;return!1===u&&(l=a?a(e):e,u=l===r),!1!==u&&!0!==o.capture||(u=!0===o.matchBase||!0===o.basename?c.matchBase(e,t,n,i):t.exec(l)),{isMatch:Boolean(u),match:u,output:l}},c.matchBase=(e,t,n,i=s.isWindows(n))=>(t instanceof RegExp?t:c.makeRe(t,n)).test(r.basename(e)),c.isMatch=(e,t,n)=>c(t,n)(e),c.parse=(e,t)=>Array.isArray(e)?e.map(e=>c.parse(e,t)):o(e,{...t,fastpaths:!1}),c.scan=(e,t)=>i(e,t),c.compileRe=(e,t,n=!1,r=!1)=>{if(!0===n)return e.output;const i=t||{},o=i.contains?"":"^",s=i.contains?"":"$";let a=`${o}(?:${e.output})${s}`;e&&!0===e.negated&&(a=`^(?!${a}).*$`);const u=c.toRegex(a,t);return!0===r&&(u.state=e),u},c.makeRe=(e,t,n=!1,r=!1)=>{if(!e||"string"!=typeof e)throw new TypeError("Expected a non-empty string");const i=t||{};let s,a={negated:!1,fastpaths:!0},u="";return e.startsWith("./")&&(e=e.slice(2),u=a.prefix="./"),!1===i.fastpaths||"."!==e[0]&&"*"!==e[0]||(s=o.fastpaths(e,t)),void 0===s?(a=o(e,t),a.prefix=u+(a.prefix||"")):a.output=s,c.compileRe(a,t,n,r)},c.toRegex=(e,t)=>{try{const n=t||{};return new RegExp(e,n.flags||(n.nocase?"i":""))}catch(e){if(t&&!0===t.debug)throw e;return/$^/}},c.constants=a,e.exports=c},function(e,t,n){"use strict";const r=n(20),{CHAR_ASTERISK:i,CHAR_AT:o,CHAR_BACKWARD_SLASH:s,CHAR_COMMA:a,CHAR_DOT:c,CHAR_EXCLAMATION_MARK:u,CHAR_FORWARD_SLASH:l,CHAR_LEFT_CURLY_BRACE:d,CHAR_LEFT_PARENTHESES:f,CHAR_LEFT_SQUARE_BRACKET:h,CHAR_PLUS:p,CHAR_QUESTION_MARK:m,CHAR_RIGHT_CURLY_BRACE:g,CHAR_RIGHT_PARENTHESES:y,CHAR_RIGHT_SQUARE_BRACKET:v}=n(21),_=e=>e===l||e===s,b=e=>{!0!==e.isPrefix&&(e.depth=e.isGlobstar?1/0:1)};e.exports=(e,t)=>{const n=t||{},R=e.length-1,w=!0===n.parts||!0===n.scanToEnd,S=[],T=[],C=[];let E,k,x=e,P=-1,O=0,A=0,D=!1,M=!1,L=!1,N=!1,F=!1,q=!1,j=!1,I=!1,H=!1,$=0,W={value:"",depth:0,isGlob:!1};const B=()=>P>=R,U=()=>(E=k,x.charCodeAt(++P));for(;P<R;){let e;if(k=U(),k!==s){if(!0===q||k===d){for($++;!0!==B()&&(k=U());)if(k!==s)if(k!==d){if(!0!==q&&k===c&&(k=U())===c){if(D=W.isBrace=!0,L=W.isGlob=!0,H=!0,!0===w)continue;break}if(!0!==q&&k===a){if(D=W.isBrace=!0,L=W.isGlob=!0,H=!0,!0===w)continue;break}if(k===g&&($--,0===$)){q=!1,D=W.isBrace=!0,H=!0;break}}else $++;else j=W.backslashes=!0,U();if(!0===w)continue;break}if(k!==l){if(!0!==n.noext){if(!0===(k===p||k===o||k===i||k===m||k===u)&&x.charCodeAt(P+1)===f){if(L=W.isGlob=!0,N=W.isExtglob=!0,H=!0,!0===w){for(;!0!==B()&&(k=U());)if(k!==s){if(k===y){L=W.isGlob=!0,H=!0;break}}else j=W.backslashes=!0,k=U();continue}break}}if(k===i){if(E===i&&(F=W.isGlobstar=!0),L=W.isGlob=!0,H=!0,!0===w)continue;break}if(k===m){if(L=W.isGlob=!0,H=!0,!0===w)continue;break}if(k===h)for(;!0!==B()&&(e=U());)if(e!==s){if(e===v){if(M=W.isBracket=!0,L=W.isGlob=!0,H=!0,!0===w)continue;break}}else j=W.backslashes=!0,U();if(!0===n.nonegate||k!==u||P!==O){if(!0!==n.noparen&&k===f){if(L=W.isGlob=!0,!0===w){for(;!0!==B()&&(k=U());)if(k!==f){if(k===y){H=!0;break}}else j=W.backslashes=!0,k=U();continue}break}if(!0===L){if(H=!0,!0===w)continue;break}}else I=W.negated=!0,O++}else{if(S.push(P),T.push(W),W={value:"",depth:0,isGlob:!1},!0===H)continue;if(E===c&&P===O+1){O+=2;continue}A=P+1}}else j=W.backslashes=!0,k=U(),k===d&&(q=!0)}!0===n.noext&&(N=!1,L=!1);let K=x,V="",G="";O>0&&(V=x.slice(0,O),x=x.slice(O),A-=O),K&&!0===L&&A>0?(K=x.slice(0,A),G=x.slice(A)):!0===L?(K="",G=x):K=x,K&&""!==K&&"/"!==K&&K!==x&&_(K.charCodeAt(K.length-1))&&(K=K.slice(0,-1)),!0===n.unescape&&(G&&(G=r.removeBackslashes(G)),K&&!0===j&&(K=r.removeBackslashes(K)));const z={prefix:V,input:e,start:O,base:K,glob:G,isBrace:D,isBracket:M,isGlob:L,isExtglob:N,isGlobstar:F,negated:I};if(!0===n.tokens&&(z.maxDepth=0,_(k)||T.push(W),z.tokens=T),!0===n.parts||!0===n.tokens){let t;for(let r=0;r<S.length;r++){const i=t?t+1:O,o=S[r],s=e.slice(i,o);n.tokens&&(0===r&&0!==O?(T[r].isPrefix=!0,T[r].value=V):T[r].value=s,b(T[r]),z.maxDepth+=T[r].depth),0===r&&""===s||C.push(s),t=o}if(t&&t+1<e.length){const r=e.slice(t+1);C.push(r),n.tokens&&(T[T.length-1].value=r,b(T[T.length-1]),z.maxDepth+=T[T.length-1].depth)}z.slashes=S,z.parts=C}return z}},function(e,t,n){"use strict";const r=n(21),i=n(20),{MAX_LENGTH:o,POSIX_REGEX_SOURCE:s,REGEX_NON_SPECIAL_CHARS:a,REGEX_SPECIAL_CHARS_BACKREF:c,REPLACEMENTS:u}=r,l=(e,t)=>{if("function"==typeof t.expandRange)return t.expandRange(...e,t);e.sort();const n=`[${e.join("-")}]`;try{new RegExp(n)}catch(t){return e.map(e=>i.escapeRegex(e)).join("..")}return n},d=(e,t)=>`Missing ${e}: "${t}" - use "\\\\${t}" to match literal characters`,f=(e,t)=>{if("string"!=typeof e)throw new TypeError("Expected a string");e=u[e]||e;const n={...t},f="number"==typeof n.maxLength?Math.min(o,n.maxLength):o;let h=e.length;if(h>f)throw new SyntaxError(`Input length: ${h}, exceeds maximum allowed length: ${f}`);const p={type:"bos",value:"",output:n.prepend||""},m=[p],g=n.capture?"":"?:",y=i.isWindows(t),v=r.globChars(y),_=r.extglobChars(v),{DOT_LITERAL:b,PLUS_LITERAL:R,SLASH_LITERAL:w,ONE_CHAR:S,DOTS_SLASH:T,NO_DOT:C,NO_DOT_SLASH:E,NO_DOTS_SLASH:k,QMARK:x,QMARK_NO_DOT:P,STAR:O,START_ANCHOR:A}=v,D=e=>`(${g}(?:(?!${A}${e.dot?T:b}).)*?)`,M=n.dot?"":C,L=n.dot?x:P;let N=!0===n.bash?D(n):O;n.capture&&(N=`(${N})`),"boolean"==typeof n.noext&&(n.noextglob=n.noext);const F={input:e,index:-1,start:0,dot:!0===n.dot,consumed:"",output:"",prefix:"",backtrack:!1,negated:!1,brackets:0,braces:0,parens:0,quotes:0,globstar:!1,tokens:m};e=i.removePrefix(e,F),h=e.length;const q=[],j=[],I=[];let H,$=p;const W=()=>F.index===h-1,B=F.peek=(t=1)=>e[F.index+t],U=F.advance=()=>e[++F.index],K=()=>e.slice(F.index+1),V=(e="",t=0)=>{F.consumed+=e,F.index+=t},G=e=>{F.output+=null!=e.output?e.output:e.value,V(e.value)},z=()=>{let e=1;for(;"!"===B()&&("("!==B(2)||"?"===B(3));)U(),F.start++,e++;return e%2!=0&&(F.negated=!0,F.start++,!0)},Q=e=>{F[e]++,I.push(e)},X=e=>{F[e]--,I.pop()},Y=e=>{if("globstar"===$.type){const t=F.braces>0&&("comma"===e.type||"brace"===e.type),n=!0===e.extglob||q.length&&("pipe"===e.type||"paren"===e.type);"slash"===e.type||"paren"===e.type||t||n||(F.output=F.output.slice(0,-$.output.length),$.type="star",$.value="*",$.output=N,F.output+=$.output)}if(q.length&&"paren"!==e.type&&!_[e.value]&&(q[q.length-1].inner+=e.value),(e.value||e.output)&&G(e),$&&"text"===$.type&&"text"===e.type)return $.value+=e.value,void($.output=($.output||"")+e.value);e.prev=$,m.push(e),$=e},J=(e,t)=>{const r={..._[t],conditions:1,inner:""};r.prev=$,r.parens=F.parens,r.output=F.output;const i=(n.capture?"(":"")+r.open;Q("parens"),Y({type:e,value:t,output:F.output?"":S}),Y({type:"paren",extglob:!0,value:U(),output:i}),q.push(r)},Z=e=>{let t=e.close+(n.capture?")":"");if("negate"===e.type){let r=N;e.inner&&e.inner.length>1&&e.inner.includes("/")&&(r=D(n)),(r!==N||W()||/^\)+$/.test(K()))&&(t=e.close=")$))"+r),"bos"===e.prev.type&&W()&&(F.negatedExtglob=!0)}Y({type:"paren",extglob:!0,value:H,output:t}),X("parens")};if(!1!==n.fastpaths&&!/(^[*!]|[/()[\]{}"])/.test(e)){let r=!1,o=e.replace(c,(e,t,n,i,o,s)=>"\\"===i?(r=!0,e):"?"===i?t?t+i+(o?x.repeat(o.length):""):0===s?L+(o?x.repeat(o.length):""):x.repeat(n.length):"."===i?b.repeat(n.length):"*"===i?t?t+i+(o?N:""):N:t?e:"\\"+e);return!0===r&&(o=!0===n.unescape?o.replace(/\\/g,""):o.replace(/\\+/g,e=>e.length%2==0?"\\\\":e?"\\":"")),o===e&&!0===n.contains?(F.output=e,F):(F.output=i.wrapOutput(o,F,t),F)}for(;!W();){if(H=U(),"\0"===H)continue;if("\\"===H){const e=B();if("/"===e&&!0!==n.bash)continue;if("."===e||";"===e)continue;if(!e){H+="\\",Y({type:"text",value:H});continue}const t=/^\\+/.exec(K());let r=0;if(t&&t[0].length>2&&(r=t[0].length,F.index+=r,r%2!=0&&(H+="\\")),!0===n.unescape?H=U()||"":H+=U()||"",0===F.brackets){Y({type:"text",value:H});continue}}if(F.brackets>0&&("]"!==H||"["===$.value||"[^"===$.value)){if(!1!==n.posix&&":"===H){const e=$.value.slice(1);if(e.includes("[")&&($.posix=!0,e.includes(":"))){const e=$.value.lastIndexOf("["),t=$.value.slice(0,e),n=$.value.slice(e+2),r=s[n];if(r){$.value=t+r,F.backtrack=!0,U(),p.output||1!==m.indexOf($)||(p.output=S);continue}}}("["===H&&":"!==B()||"-"===H&&"]"===B())&&(H="\\"+H),"]"!==H||"["!==$.value&&"[^"!==$.value||(H="\\"+H),!0===n.posix&&"!"===H&&"["===$.value&&(H="^"),$.value+=H,G({value:H});continue}if(1===F.quotes&&'"'!==H){H=i.escapeRegex(H),$.value+=H,G({value:H});continue}if('"'===H){F.quotes=1===F.quotes?0:1,!0===n.keepQuotes&&Y({type:"text",value:H});continue}if("("===H){Q("parens"),Y({type:"paren",value:H});continue}if(")"===H){if(0===F.parens&&!0===n.strictBrackets)throw new SyntaxError(d("opening","("));const e=q[q.length-1];if(e&&F.parens===e.parens+1){Z(q.pop());continue}Y({type:"paren",value:H,output:F.parens?")":"\\)"}),X("parens");continue}if("["===H){if(!0!==n.nobracket&&K().includes("]"))Q("brackets");else{if(!0!==n.nobracket&&!0===n.strictBrackets)throw new SyntaxError(d("closing","]"));H="\\"+H}Y({type:"bracket",value:H});continue}if("]"===H){if(!0===n.nobracket||$&&"bracket"===$.type&&1===$.value.length){Y({type:"text",value:H,output:"\\"+H});continue}if(0===F.brackets){if(!0===n.strictBrackets)throw new SyntaxError(d("opening","["));Y({type:"text",value:H,output:"\\"+H});continue}X("brackets");const e=$.value.slice(1);if(!0===$.posix||"^"!==e[0]||e.includes("/")||(H="/"+H),$.value+=H,G({value:H}),!1===n.literalBrackets||i.hasRegexChars(e))continue;const t=i.escapeRegex($.value);if(F.output=F.output.slice(0,-$.value.length),!0===n.literalBrackets){F.output+=t,$.value=t;continue}$.value=`(${g}${t}|${$.value})`,F.output+=$.value;continue}if("{"===H&&!0!==n.nobrace){Q("braces");const e={type:"brace",value:H,output:"(",outputIndex:F.output.length,tokensIndex:F.tokens.length};j.push(e),Y(e);continue}if("}"===H){const e=j[j.length-1];if(!0===n.nobrace||!e){Y({type:"text",value:H,output:H});continue}let t=")";if(!0===e.dots){const e=m.slice(),r=[];for(let t=e.length-1;t>=0&&(m.pop(),"brace"!==e[t].type);t--)"dots"!==e[t].type&&r.unshift(e[t].value);t=l(r,n),F.backtrack=!0}if(!0!==e.comma&&!0!==e.dots){const n=F.output.slice(0,e.outputIndex),r=F.tokens.slice(e.tokensIndex);e.value=e.output="\\{",H=t="\\}",F.output=n;for(const e of r)F.output+=e.output||e.value}Y({type:"brace",value:H,output:t}),X("braces"),j.pop();continue}if("|"===H){q.length>0&&q[q.length-1].conditions++,Y({type:"text",value:H});continue}if(","===H){let e=H;const t=j[j.length-1];t&&"braces"===I[I.length-1]&&(t.comma=!0,e="|"),Y({type:"comma",value:H,output:e});continue}if("/"===H){if("dot"===$.type&&F.index===F.start+1){F.start=F.index+1,F.consumed="",F.output="",m.pop(),$=p;continue}Y({type:"slash",value:H,output:w});continue}if("."===H){if(F.braces>0&&"dot"===$.type){"."===$.value&&($.output=b);const e=j[j.length-1];$.type="dots",$.output+=H,$.value+=H,e.dots=!0;continue}if(F.braces+F.parens===0&&"bos"!==$.type&&"slash"!==$.type){Y({type:"text",value:H,output:b});continue}Y({type:"dot",value:H,output:b});continue}if("?"===H){if(!($&&"("===$.value)&&!0!==n.noextglob&&"("===B()&&"?"!==B(2)){J("qmark",H);continue}if($&&"paren"===$.type){const e=B();let t=H;if("<"===e&&!i.supportsLookbehinds())throw new Error("Node.js v10 or higher is required for regex lookbehinds");("("===$.value&&!/[!=<:]/.test(e)||"<"===e&&!/<([!=]|\w+>)/.test(K()))&&(t="\\"+H),Y({type:"text",value:H,output:t});continue}if(!0!==n.dot&&("slash"===$.type||"bos"===$.type)){Y({type:"qmark",value:H,output:P});continue}Y({type:"qmark",value:H,output:x});continue}if("!"===H){if(!0!==n.noextglob&&"("===B()&&("?"!==B(2)||!/[!=<:]/.test(B(3)))){J("negate",H);continue}if(!0!==n.nonegate&&0===F.index){z();continue}}if("+"===H){if(!0!==n.noextglob&&"("===B()&&"?"!==B(2)){J("plus",H);continue}if($&&"("===$.value||!1===n.regex){Y({type:"plus",value:H,output:R});continue}if($&&("bracket"===$.type||"paren"===$.type||"brace"===$.type)||F.parens>0){Y({type:"plus",value:H});continue}Y({type:"plus",value:R});continue}if("@"===H){if(!0!==n.noextglob&&"("===B()&&"?"!==B(2)){Y({type:"at",extglob:!0,value:H,output:""});continue}Y({type:"text",value:H});continue}if("*"!==H){"$"!==H&&"^"!==H||(H="\\"+H);const e=a.exec(K());e&&(H+=e[0],F.index+=e[0].length),Y({type:"text",value:H});continue}if($&&("globstar"===$.type||!0===$.star)){$.type="star",$.star=!0,$.value+=H,$.output=N,F.backtrack=!0,F.globstar=!0,V(H);continue}let t=K();if(!0!==n.noextglob&&/^\([^?]/.test(t)){J("star",H);continue}if("star"===$.type){if(!0===n.noglobstar){V(H);continue}const r=$.prev,i=r.prev,o="slash"===r.type||"bos"===r.type,s=i&&("star"===i.type||"globstar"===i.type);if(!0===n.bash&&(!o||t[0]&&"/"!==t[0])){Y({type:"star",value:H,output:""});continue}const a=F.braces>0&&("comma"===r.type||"brace"===r.type),c=q.length&&("pipe"===r.type||"paren"===r.type);if(!o&&"paren"!==r.type&&!a&&!c){Y({type:"star",value:H,output:""});continue}for(;"/**"===t.slice(0,3);){const n=e[F.index+4];if(n&&"/"!==n)break;t=t.slice(3),V("/**",3)}if("bos"===r.type&&W()){$.type="globstar",$.value+=H,$.output=D(n),F.output=$.output,F.globstar=!0,V(H);continue}if("slash"===r.type&&"bos"!==r.prev.type&&!s&&W()){F.output=F.output.slice(0,-(r.output+$.output).length),r.output="(?:"+r.output,$.type="globstar",$.output=D(n)+(n.strictSlashes?")":"|$)"),$.value+=H,F.globstar=!0,F.output+=r.output+$.output,V(H);continue}if("slash"===r.type&&"bos"!==r.prev.type&&"/"===t[0]){const e=void 0!==t[1]?"|$":"";F.output=F.output.slice(0,-(r.output+$.output).length),r.output="(?:"+r.output,$.type="globstar",$.output=`${D(n)}${w}|${w}${e})`,$.value+=H,F.output+=r.output+$.output,F.globstar=!0,V(H+U()),Y({type:"slash",value:"/",output:""});continue}if("bos"===r.type&&"/"===t[0]){$.type="globstar",$.value+=H,$.output=`(?:^|${w}|${D(n)}${w})`,F.output=$.output,F.globstar=!0,V(H+U()),Y({type:"slash",value:"/",output:""});continue}F.output=F.output.slice(0,-$.output.length),$.type="globstar",$.output=D(n),$.value+=H,F.output+=$.output,F.globstar=!0,V(H);continue}const r={type:"star",value:H,output:N};!0!==n.bash?!$||"bracket"!==$.type&&"paren"!==$.type||!0!==n.regex?(F.index!==F.start&&"slash"!==$.type&&"dot"!==$.type||("dot"===$.type?(F.output+=E,$.output+=E):!0===n.dot?(F.output+=k,$.output+=k):(F.output+=M,$.output+=M),"*"!==B()&&(F.output+=S,$.output+=S)),Y(r)):(r.output=H,Y(r)):(r.output=".*?","bos"!==$.type&&"slash"!==$.type||(r.output=M+r.output),Y(r))}for(;F.brackets>0;){if(!0===n.strictBrackets)throw new SyntaxError(d("closing","]"));F.output=i.escapeLast(F.output,"["),X("brackets")}for(;F.parens>0;){if(!0===n.strictBrackets)throw new SyntaxError(d("closing",")"));F.output=i.escapeLast(F.output,"("),X("parens")}for(;F.braces>0;){if(!0===n.strictBrackets)throw new SyntaxError(d("closing","}"));F.output=i.escapeLast(F.output,"{"),X("braces")}if(!0===n.strictSlashes||"star"!==$.type&&"bracket"!==$.type||Y({type:"maybe_slash",value:"",output:w+"?"}),!0===F.backtrack){F.output="";for(const e of F.tokens)F.output+=null!=e.output?e.output:e.value,e.suffix&&(F.output+=e.suffix)}return F};f.fastpaths=(e,t)=>{const n={...t},s="number"==typeof n.maxLength?Math.min(o,n.maxLength):o,a=e.length;if(a>s)throw new SyntaxError(`Input length: ${a}, exceeds maximum allowed length: ${s}`);e=u[e]||e;const c=i.isWindows(t),{DOT_LITERAL:l,SLASH_LITERAL:d,ONE_CHAR:f,DOTS_SLASH:h,NO_DOT:p,NO_DOTS:m,NO_DOTS_SLASH:g,STAR:y,START_ANCHOR:v}=r.globChars(c),_=n.dot?m:p,b=n.dot?g:p,R=n.capture?"":"?:";let w=!0===n.bash?".*?":y;n.capture&&(w=`(${w})`);const S=e=>!0===e.noglobstar?w:`(${R}(?:(?!${v}${e.dot?h:l}).)*?)`,T=e=>{switch(e){case"*":return`${_}${f}${w}`;case".*":return`${l}${f}${w}`;case"*.*":return`${_}${w}${l}${f}${w}`;case"*/*":return`${_}${w}${d}${f}${b}${w}`;case"**":return _+S(n);case"**/*":return`(?:${_}${S(n)}${d})?${b}${f}${w}`;case"**/*.*":return`(?:${_}${S(n)}${d})?${b}${w}${l}${f}${w}`;case"**/.*":return`(?:${_}${S(n)}${d})?${l}${f}${w}`;default:{const t=/^(.*?)\.(\w+)$/.exec(e);if(!t)return;const n=T(t[1]);if(!n)return;return n+l+t[2]}}},C=i.removePrefix(e,{negated:!1,prefix:""});let E=T(C);return E&&!0!==n.strictSlashes&&(E+=d+"?"),E},e.exports=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.merge=void 0;const r=n(76);function i(e){e.forEach(e=>e.emit("close"))}t.merge=function(e){const t=r(e);return e.forEach(e=>{e.once("error",e=>t.emit("error",e))}),t.once("close",()=>i(e)),t.once("end",()=>i(e)),t}},function(e,t,n){"use strict";const r=n(22).PassThrough,i=Array.prototype.slice;function o(e,t){if(Array.isArray(e))for(let n=0,r=e.length;n<r;n++)e[n]=o(e[n],t);else{if(!e._readableState&&e.pipe&&(e=e.pipe(r(t))),!e._readableState||!e.pause||!e.pipe)throw new Error("Only readable stream can be merged.");e.pause()}return e}e.exports=function(){const e=[],t=i.call(arguments);let n=!1,s=t[t.length-1];s&&!Array.isArray(s)&&null==s.pipe?t.pop():s={};const a=!1!==s.end,c=!0===s.pipeError;null==s.objectMode&&(s.objectMode=!0);null==s.highWaterMark&&(s.highWaterMark=65536);const u=r(s);function l(){for(let t=0,n=arguments.length;t<n;t++)e.push(o(arguments[t],s));return d(),this}function d(){if(n)return;n=!0;let t=e.shift();if(!t)return void process.nextTick(f);Array.isArray(t)||(t=[t]);let r=t.length+1;function i(){--r>0||(n=!1,d())}function o(e){function t(){e.removeListener("merge2UnpipeEnd",t),e.removeListener("end",t),c&&e.removeListener("error",n),i()}function n(e){u.emit("error",e)}if(e._readableState.endEmitted)return i();e.on("merge2UnpipeEnd",t),e.on("end",t),c&&e.on("error",n),e.pipe(u,{end:!1}),e.resume()}for(let e=0;e<t.length;e++)o(t[e]);i()}function f(){n=!1,u.emit("queueDrain"),a&&u.end()}u.setMaxListeners(0),u.add=l,u.on("unpipe",(function(e){e.emit("merge2UnpipeEnd")})),t.length&&l.apply(null,t);return u}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isEmpty=t.isString=void 0,t.isString=function(e){return"string"==typeof e},t.isEmpty=function(e){return""===e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(32),i=n(27);class o extends i.default{constructor(){super(...arguments),this._reader=new r.default(this._settings)}read(e){const t=this._getRootDirectory(e),n=this._getReaderOptions(e),r=[];return new Promise((i,o)=>{const s=this.api(t,e,n);s.once("error",o),s.on("data",e=>r.push(n.transform(e))),s.once("end",()=>i(r))})}api(e,t,n){return t.dynamic?this._reader.dynamic(e,n):this._reader.static(t.patterns,n)}}t.default=o},function(e,t,n){"use strict";function r(e,t){e(t)}function i(e,t){e(null,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.read=function(e,t,n){t.fs.lstat(e,(o,s)=>null!==o?r(n,o):s.isSymbolicLink()&&t.followSymbolicLink?void t.fs.stat(e,(e,o)=>{if(null!==e)return t.throwErrorOnBrokenSymbolicLink?r(n,e):i(n,s);t.markSymbolicLink&&(o.isSymbolicLink=()=>!0),i(n,o)}):i(n,s))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.read=function(e,t){const n=t.fs.lstatSync(e);if(!n.isSymbolicLink()||!t.followSymbolicLink)return n;try{const n=t.fs.statSync(e);return t.markSymbolicLink&&(n.isSymbolicLink=()=>!0),n}catch(e){if(!t.throwErrorOnBrokenSymbolicLink)return n;throw e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(82);t.default=class{constructor(e={}){this._options=e,this.followSymbolicLink=this._getValue(this._options.followSymbolicLink,!0),this.fs=r.createFileSystemAdapter(this._options.fs),this.markSymbolicLink=this._getValue(this._options.markSymbolicLink,!1),this.throwErrorOnBrokenSymbolicLink=this._getValue(this._options.throwErrorOnBrokenSymbolicLink,!0)}_getValue(e,t){return void 0===e?t:e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(11);t.FILE_SYSTEM_ADAPTER={lstat:r.lstat,stat:r.stat,lstatSync:r.lstatSync,statSync:r.statSync},t.createFileSystemAdapter=function(e){return void 0===e?t.FILE_SYSTEM_ADAPTER:Object.assign(Object.assign({},t.FILE_SYSTEM_ADAPTER),e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(34);t.default=class{constructor(e,t){this._root=e,this._settings=t,this._reader=new r.default(this._root,this._settings),this._storage=new Set}read(e){this._reader.onError(t=>{!function(e,t){e(t)}(e,t)}),this._reader.onEntry(e=>{this._storage.add(e)}),this._reader.onEnd(()=>{!function(e,t){e(null,t)}(e,[...this._storage])}),this._reader.read()}}},function(e,t){e.exports=require("events")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(13),i=n(86),o=n(35),s=n(36);function a(e,t,n){t.fs.readdir(e,{withFileTypes:!0},(r,o)=>{if(null!==r)return u(n,r);const a=o.map(n=>({dirent:n,name:n.name,path:`${e}${t.pathSegmentSeparator}${n.name}`}));if(!t.followSymbolicLinks)return l(n,a);const c=a.map(e=>function(e,t){return n=>{if(!e.dirent.isSymbolicLink())return n(null,e);t.fs.stat(e.path,(r,i)=>null!==r?t.throwErrorOnBrokenSymbolicLink?n(r):n(null,e):(e.dirent=s.fs.createDirentFromStats(e.name,i),n(null,e)))}}(e,t));i(c,(e,t)=>{if(null!==e)return u(n,e);l(n,t)})})}function c(e,t,n){t.fs.readdir(e,(o,a)=>{if(null!==o)return u(n,o);const c=a.map(n=>`${e}${t.pathSegmentSeparator}${n}`),d=c.map(e=>n=>r.stat(e,t.fsStatSettings,n));i(d,(e,r)=>{if(null!==e)return u(n,e);const i=[];a.forEach((e,n)=>{const o=r[n],a={name:e,path:c[n],dirent:s.fs.createDirentFromStats(e,o)};t.stats&&(a.stats=o),i.push(a)}),l(n,i)})})}function u(e,t){e(t)}function l(e,t){e(null,t)}t.read=function(e,t,n){return!t.stats&&o.IS_SUPPORT_READDIR_WITH_FILE_TYPES?a(e,t,n):c(e,t,n)},t.readdirWithFileTypes=a,t.readdir=c},function(e,t){e.exports=function(e,t){var n,r,i,o=!0;Array.isArray(e)?(n=[],r=e.length):(i=Object.keys(e),n={},r=i.length);function s(e){function r(){t&&t(e,n),t=null}o?process.nextTick(r):r()}function a(e,t,i){n[e]=i,(0==--r||t)&&s(t)}r?i?i.forEach((function(t){e[t]((function(e,n){a(t,e,n)}))})):e.forEach((function(e,t){e((function(e,n){a(t,e,n)}))})):s(null);o=!1}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r{constructor(e,t){this.name=e,this.isBlockDevice=t.isBlockDevice.bind(t),this.isCharacterDevice=t.isCharacterDevice.bind(t),this.isDirectory=t.isDirectory.bind(t),this.isFIFO=t.isFIFO.bind(t),this.isFile=t.isFile.bind(t),this.isSocket=t.isSocket.bind(t),this.isSymbolicLink=t.isSymbolicLink.bind(t)}}t.createDirentFromStats=function(e,t){return new r(e,t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(13),i=n(35),o=n(36);function s(e,t){return t.fs.readdirSync(e,{withFileTypes:!0}).map(n=>{const r={dirent:n,name:n.name,path:`${e}${t.pathSegmentSeparator}${n.name}`};if(r.dirent.isSymbolicLink()&&t.followSymbolicLinks)try{const e=t.fs.statSync(r.path);r.dirent=o.fs.createDirentFromStats(r.name,e)}catch(e){if(t.throwErrorOnBrokenSymbolicLink)throw e}return r})}function a(e,t){return t.fs.readdirSync(e).map(n=>{const i=`${e}${t.pathSegmentSeparator}${n}`,s=r.statSync(i,t.fsStatSettings),a={name:n,path:i,dirent:o.fs.createDirentFromStats(n,s)};return t.stats&&(a.stats=s),a})}t.read=function(e,t){return!t.stats&&i.IS_SUPPORT_READDIR_WITH_FILE_TYPES?s(e,t):a(e,t)},t.readdirWithFileTypes=s,t.readdir=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),i=n(13),o=n(90);t.default=class{constructor(e={}){this._options=e,this.followSymbolicLinks=this._getValue(this._options.followSymbolicLinks,!1),this.fs=o.createFileSystemAdapter(this._options.fs),this.pathSegmentSeparator=this._getValue(this._options.pathSegmentSeparator,r.sep),this.stats=this._getValue(this._options.stats,!1),this.throwErrorOnBrokenSymbolicLink=this._getValue(this._options.throwErrorOnBrokenSymbolicLink,!0),this.fsStatSettings=new i.Settings({followSymbolicLink:this.followSymbolicLinks,fs:this.fs,throwErrorOnBrokenSymbolicLink:this.throwErrorOnBrokenSymbolicLink})}_getValue(e,t){return void 0===e?t:e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(11);t.FILE_SYSTEM_ADAPTER={lstat:r.lstat,stat:r.stat,lstatSync:r.lstatSync,statSync:r.statSync,readdir:r.readdir,readdirSync:r.readdirSync},t.createFileSystemAdapter=function(e){return void 0===e?t.FILE_SYSTEM_ADAPTER:Object.assign(Object.assign({},t.FILE_SYSTEM_ADAPTER),e)}},function(e,t,n){"use strict";var r=n(92);function i(){}function o(){this.value=null,this.callback=i,this.next=null,this.release=i,this.context=null;var e=this;this.worked=function(t,n){var r=e.callback;e.value=null,e.callback=i,r.call(e.context,t,n),e.release(e)}}e.exports=function(e,t,n){"function"==typeof e&&(n=t,t=e,e=null);var s=r(o),a=null,c=null,u=0,l={push:function(n,r){var o=s.get();o.context=e,o.release=d,o.value=n,o.callback=r||i,u===l.concurrency||l.paused?c?(c.next=o,c=o):(a=o,c=o,l.saturated()):(u++,t.call(e,o.value,o.worked))},drain:i,saturated:i,pause:function(){l.paused=!0},paused:!1,concurrency:n,running:function(){return u},resume:function(){if(!l.paused)return;l.paused=!1;for(var e=0;e<l.concurrency;e++)u++,d()},idle:function(){return 0===u&&0===l.length()},length:function(){var e=a,t=0;for(;e;)e=e.next,t++;return t},getQueue:function(){var e=a,t=[];for(;e;)t.push(e.value),e=e.next;return t},unshift:function(n,r){var o=s.get();o.context=e,o.release=d,o.value=n,o.callback=r||i,u===l.concurrency||l.paused?a?(o.next=a,a=o):(a=o,c=o,l.saturated()):(u++,t.call(e,o.value,o.worked))},empty:i,kill:function(){a=null,c=null,l.drain=i},killAndDrain:function(){a=null,c=null,l.drain(),l.drain=i}};return l;function d(n){n&&s.release(n);var r=a;r?l.paused?u--:(c===a&&(c=null),a=r.next,r.next=null,t.call(e,r.value,r.worked),null===c&&l.empty()):0==--u&&l.drain()}}},function(e,t,n){"use strict";e.exports=function(e){var t=new e,n=t;return{get:function(){var r=t;return r.next?t=r.next:(t=new e,n=t),r.next=null,r},release:function(e){n.next=e,n=e}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(22),i=n(34);t.default=class{constructor(e,t){this._root=e,this._settings=t,this._reader=new i.default(this._root,this._settings),this._stream=new r.Readable({objectMode:!0,read:()=>{},destroy:this._reader.destroy.bind(this._reader)})}read(){return this._reader.onError(e=>{this._stream.emit("error",e)}),this._reader.onEntry(e=>{this._stream.push(e)}),this._reader.onEnd(()=>{this._stream.push(null)}),this._reader.read(),this._stream}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(95);t.default=class{constructor(e,t){this._root=e,this._settings=t,this._reader=new r.default(this._root,this._settings)}read(){return this._reader.read()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(25),i=n(26),o=n(37);class s extends o.default{constructor(){super(...arguments),this._scandir=r.scandirSync,this._storage=new Set,this._queue=new Set}read(){return this._pushToQueue(this._root,this._settings.basePath),this._handleQueue(),[...this._storage]}_pushToQueue(e,t){this._queue.add({directory:e,base:t})}_handleQueue(){for(const e of this._queue.values())this._handleDirectory(e.directory,e.base)}_handleDirectory(e,t){try{const n=this._scandir(e,this._settings.fsScandirSettings);for(const e of n)this._handleEntry(e,t)}catch(e){this._handleError(e)}}_handleError(e){if(i.isFatalError(this._settings,e))throw e}_handleEntry(e,t){const n=e.path;void 0!==t&&(e.path=i.joinPathSegments(t,e.name,this._settings.pathSegmentSeparator)),i.isAppliedFilter(this._settings.entryFilter,e)&&this._pushToStorage(e),e.dirent.isDirectory()&&i.isAppliedFilter(this._settings.deepFilter,e)&&this._pushToQueue(n,e.path)}_pushToStorage(e){this._storage.add(e)}}t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),i=n(25);t.default=class{constructor(e={}){this._options=e,this.basePath=this._getValue(this._options.basePath,void 0),this.concurrency=this._getValue(this._options.concurrency,1/0),this.deepFilter=this._getValue(this._options.deepFilter,null),this.entryFilter=this._getValue(this._options.entryFilter,null),this.errorFilter=this._getValue(this._options.errorFilter,null),this.pathSegmentSeparator=this._getValue(this._options.pathSegmentSeparator,r.sep),this.fsScandirSettings=new i.Settings({followSymbolicLinks:this._options.followSymbolicLinks,fs:this._options.fs,pathSegmentSeparator:this._options.pathSegmentSeparator,stats:this._options.stats,throwErrorOnBrokenSymbolicLink:this._options.throwErrorOnBrokenSymbolicLink})}_getValue(e,t){return void 0===e?t:e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(7),i=n(98);t.default=class{constructor(e,t){this._settings=e,this._micromatchOptions=t}getFilter(e,t,n){const r=this._getMatcher(t),i=this._getNegativePatternsRe(n);return t=>this._filter(e,t,r,i)}_getMatcher(e){return new i.default(e,this._settings,this._micromatchOptions)}_getNegativePatternsRe(e){const t=e.filter(r.pattern.isAffectDepthOfReadingPattern);return r.pattern.convertPatternsToRe(t,this._micromatchOptions)}_filter(e,t,n,i){if(this._isSkippedByDeep(e,t.path))return!1;if(this._isSkippedSymbolicLink(t))return!1;const o=r.path.removeLeadingDotSegment(t.path);return!this._isSkippedByPositivePatterns(o,n)&&this._isSkippedByNegativePatterns(o,i)}_isSkippedByDeep(e,t){return this._settings.deep!==1/0&&this._getEntryLevel(e,t)>=this._settings.deep}_getEntryLevel(e,t){const n=t.split("/").length;if(""===e)return n;return n-e.split("/").length}_isSkippedSymbolicLink(e){return!this._settings.followSymbolicLinks&&e.dirent.isSymbolicLink()}_isSkippedByPositivePatterns(e,t){return!this._settings.baseNameMatch&&!t.match(e)}_isSkippedByNegativePatterns(e,t){return!r.pattern.matchAny(e,t)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(99);class i extends r.default{match(e){const t=e.split("/"),n=t.length,r=this._storage.filter(e=>!e.complete||e.segments.length>n);for(const e of r){const r=e.sections[0];if(!e.complete&&n>r.length)return!0;if(t.every((t,n)=>{const r=e.segments[n];return!(!r.dynamic||!r.patternRe.test(t))||!r.dynamic&&r.pattern===t}))return!0}return!1}}t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(7);t.default=class{constructor(e,t,n){this._patterns=e,this._settings=t,this._micromatchOptions=n,this._storage=[],this._fillStorage()}_fillStorage(){const e=r.pattern.expandPatternsWithBraceExpansion(this._patterns);for(const t of e){const e=this._getPatternSegments(t),n=this._splitSegmentsIntoSections(e);this._storage.push({complete:n.length<=1,pattern:t,segments:e,sections:n})}}_getPatternSegments(e){return r.pattern.getPatternParts(e,this._micromatchOptions).map(e=>r.pattern.isDynamicPattern(e,this._settings)?{dynamic:!0,pattern:e,patternRe:r.pattern.makeRe(e,this._micromatchOptions)}:{dynamic:!1,pattern:e})}_splitSegmentsIntoSections(e){return r.array.splitWhen(e,e=>e.dynamic&&r.pattern.hasGlobStar(e.pattern))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(7);t.default=class{constructor(e,t){this._settings=e,this._micromatchOptions=t,this.index=new Map}getFilter(e,t){const n=r.pattern.convertPatternsToRe(e,this._micromatchOptions),i=r.pattern.convertPatternsToRe(t,this._micromatchOptions);return e=>this._filter(e,n,i)}_filter(e,t,n){if(this._settings.unique&&this._isDuplicateEntry(e))return!1;if(this._onlyFileFilter(e)||this._onlyDirectoryFilter(e))return!1;if(this._isSkippedByAbsoluteNegativePatterns(e.path,n))return!1;const r=this._settings.baseNameMatch?e.name:e.path,i=this._isMatchToPatterns(r,t)&&!this._isMatchToPatterns(e.path,n);return this._settings.unique&&i&&this._createIndexRecord(e),i}_isDuplicateEntry(e){return this.index.has(e.path)}_createIndexRecord(e){this.index.set(e.path,void 0)}_onlyFileFilter(e){return this._settings.onlyFiles&&!e.dirent.isFile()}_onlyDirectoryFilter(e){return this._settings.onlyDirectories&&!e.dirent.isDirectory()}_isSkippedByAbsoluteNegativePatterns(e,t){if(!this._settings.absolute)return!1;const n=r.path.makeAbsolute(this._settings.cwd,e);return r.pattern.matchAny(n,t)}_isMatchToPatterns(e,t){const n=r.path.removeLeadingDotSegment(e);return r.pattern.matchAny(n,t)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(7);t.default=class{constructor(e){this._settings=e}getFilter(){return e=>this._isNonFatalError(e)}_isNonFatalError(e){return r.errno.isEnoentCodeError(e)||this._settings.suppressErrors}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(7);t.default=class{constructor(e){this._settings=e}getTransformer(){return e=>this._transform(e)}_transform(e){let t=e.path;return this._settings.absolute&&(t=r.path.makeAbsolute(this._settings.cwd,t),t=r.path.unixify(t)),this._settings.markDirectories&&e.dirent.isDirectory()&&(t+="/"),this._settings.objectMode?Object.assign(Object.assign({},e),{path:t}):t}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(22),i=n(32),o=n(27);class s extends o.default{constructor(){super(...arguments),this._reader=new i.default(this._settings)}read(e){const t=this._getRootDirectory(e),n=this._getReaderOptions(e),i=this.api(t,e,n),o=new r.Readable({objectMode:!0,read:()=>{}});return i.once("error",e=>o.emit("error",e)).on("data",e=>o.emit("data",n.transform(e))).once("end",()=>o.emit("end")),o.once("close",()=>i.destroy()),o}api(e,t,n){return t.dynamic?this._reader.dynamic(e,n):this._reader.static(t.patterns,n)}}t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(105),i=n(27);class o extends i.default{constructor(){super(...arguments),this._reader=new r.default(this._settings)}read(e){const t=this._getRootDirectory(e),n=this._getReaderOptions(e);return this.api(t,e,n).map(n.transform)}api(e,t,n){return t.dynamic?this._reader.dynamic(e,n):this._reader.static(t.patterns,n)}}t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(13),i=n(33),o=n(38);class s extends o.default{constructor(){super(...arguments),this._walkSync=i.walkSync,this._statSync=r.statSync}dynamic(e,t){return this._walkSync(e,t)}static(e,t){const n=[];for(const r of e){const e=this._getFullEntryPath(r),i=this._getEntry(e,r,t);null!==i&&t.entryFilter(i)&&n.push(i)}return n}_getEntry(e,t,n){try{const n=this._getStat(e);return this._makeEntry(n,t)}catch(e){if(n.errorFilter(e))return null;throw e}}_getStat(e){return this._statSync(e,this._fsStatSettings)}}t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_FILE_SYSTEM_ADAPTER=void 0;const r=n(11),i=n(6),o=Math.max(i.cpus().length,1);t.DEFAULT_FILE_SYSTEM_ADAPTER={lstat:r.lstat,lstatSync:r.lstatSync,stat:r.stat,statSync:r.statSync,readdir:r.readdir,readdirSync:r.readdirSync};t.default=class{constructor(e={}){this._options=e,this.absolute=this._getValue(this._options.absolute,!1),this.baseNameMatch=this._getValue(this._options.baseNameMatch,!1),this.braceExpansion=this._getValue(this._options.braceExpansion,!0),this.caseSensitiveMatch=this._getValue(this._options.caseSensitiveMatch,!0),this.concurrency=this._getValue(this._options.concurrency,o),this.cwd=this._getValue(this._options.cwd,process.cwd()),this.deep=this._getValue(this._options.deep,1/0),this.dot=this._getValue(this._options.dot,!1),this.extglob=this._getValue(this._options.extglob,!0),this.followSymbolicLinks=this._getValue(this._options.followSymbolicLinks,!0),this.fs=this._getFileSystemMethods(this._options.fs),this.globstar=this._getValue(this._options.globstar,!0),this.ignore=this._getValue(this._options.ignore,[]),this.markDirectories=this._getValue(this._options.markDirectories,!1),this.objectMode=this._getValue(this._options.objectMode,!1),this.onlyDirectories=this._getValue(this._options.onlyDirectories,!1),this.onlyFiles=this._getValue(this._options.onlyFiles,!0),this.stats=this._getValue(this._options.stats,!1),this.suppressErrors=this._getValue(this._options.suppressErrors,!1),this.throwErrorOnBrokenSymbolicLink=this._getValue(this._options.throwErrorOnBrokenSymbolicLink,!1),this.unique=this._getValue(this._options.unique,!0),this.onlyDirectories&&(this.onlyFiles=!1),this.stats&&(this.objectMode=!0)}_getValue(e,t){return void 0===e?t:e}_getFileSystemMethods(e={}){return Object.assign(Object.assign({},t.DEFAULT_FILE_SYSTEM_ADAPTER),e)}}},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.devToolsServer=void 0;const o=n(18),s=n(0),a=i(n(6)),c=n(9),u=n(10),l=n(1),d=n(12),f=n(4).logger.getlog("devtools-server");class h extends l.Dispose{constructor(){super(),this.onHandler=[],this._onError=e=>{this.launchDevToolsTask=void 0,f("devtools server error: "+e.message)},this._onExit=e=>{this.launchDevToolsTask=void 0,f("devtools server exit with: "+e)},this.push({dispose:()=>{if(this.port=void 0,this.PID=void 0,this.host=void 0,this.launchDevToolsTask)try{this.launchDevToolsTask.kill(),this.launchDevToolsTask=void 0}catch(e){f("dispose server error: "+e.message)}}})}get state(){return!!(this.launchDevToolsTask&&this.port&&this.host&&this.PID)}get devToolsUri(){return this.state?`${this.host}:${this.port}`:void 0}start(){return r(this,void 0,void 0,(function*(){if(this.state)return c.notification.show("Flutter devtools is running!"),!1;const e=yield d.getFlutterWorkspaceFolder();return e?(c.notification.show("Launching flutter devtools..."),this.launchDevToolsTask=o.spawn(u.flutterSDK.dartCommand,["pub","global","run","devtools","--machine","--try-ports","10"],{cwd:e,detached:!1,shell:"win32"===a.default.platform()||void 0}),this.launchDevToolsTask.on("exit",this._onExit),this.launchDevToolsTask.on("error",this._onError),this.onHandler.length&&(this.onHandler.forEach(e=>e()),this.onHandler=[]),!0):(c.notification.show("Flutter project workspaceFolder not found!"),!1)}))}onStdout(e){const t=()=>{this.launchDevToolsTask.stdout.on("data",t=>{const n=t.toString();try{const e=JSON.parse(n);this.port=e.params.port,this.PID=e.params.pid,this.host=e.params.host,f(`Devtools running at ${this.host}:${this.port} with PID: ${this.PID}`)}catch(e){f(`error while parsing ${n}:`),f(e)}e()})};this.launchDevToolsTask&&this.launchDevToolsTask.stdout?t():this.onHandler.push(t)}onStderr(e){const t=()=>{this.launchDevToolsTask.stderr.on("data",t=>{const n=t.toString();if(n.match(/No active package devtools/g)){const t=s.window.showPrompt("Flutter pub global devtools has not been activated. Activate now?");this.handleDevToolsActivationPrompt(t,e)}else f(n)})};this.launchDevToolsTask&&this.launchDevToolsTask.stderr?t():this.onHandler.push(t)}handleDevToolsActivationPrompt(e,t){return r(this,void 0,void 0,(function*(){if(yield e){const e=yield d.getFlutterWorkspaceFolder();if(!e)return c.notification.show("Flutter project workspaceFolder not found!"),!1;this.activateDevToolsTask=o.spawn(u.flutterSDK.dartCommand,["pub","global","activate","devtools"],{cwd:e,detached:!1,shell:"win32"===a.default.platform()||void 0}),this.activateDevToolsTask.on("exit",()=>{t(),this.activateDevToolsTask=void 0}),this.activateDevToolsTask.on("error",e=>{c.notification.show("Error activating devtools: "+e.message),f(e.message),this.activateDevToolsTask=void 0}),this.push({dispose:()=>{if(this.activateDevToolsTask)try{this.activateDevToolsTask.kill(),this.activateDevToolsTask=void 0}catch(e){f("Error disposing activateDevToolsTask: "+e.message)}}})}else c.notification.show('You must run "Flutter pub global activate devtools" to launch a devtools browser debugger.')}))}}t.devToolsServer=new h},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.opener=void 0;const i=r(n(18)),o=r(n(6));t.opener=function(e,t){e=[].concat(e);let n,r=process.platform;switch("linux"===r&&-1!==o.default.release().indexOf("Microsoft")&&(r="win32"),r){case"win32":n="cmd.exe",t&&e.unshift(t);break;case"darwin":n="open",t&&(e.unshift(t),e.unshift("-a"));break;default:n=t||"xdg-open"}return"win32"===r&&(e=e.map(e=>e.replace(/&/g,"^&")),e=["/c","start",'""'].concat(e)),i.default.spawn(n,e,{detached:!0,shell:"win32"===o.default.platform()||void 0})}},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Global=void 0;const i=n(0),o=n(9),s=n(10),a=n(14),c=n(5),u=n(1),l=n(12),d=n(4),f=d.logger.getlog("global-commands"),h=()=>({cmd:e,getArgs:t},...n)=>r(void 0,void 0,void 0,(function*(){let r=[];t&&(r=yield t()),n.length&&(r=r.concat(n));const{err:i,stdout:o,stderr:a}=yield s.flutterSDK.execFlutterCommand(`${e} ${r.join(" ")}`),c=d.logger.devOutchannel;o&&c.append(`\n${o}\n`),a&&c.append(`\n${a}\n`),i&&c.append([i.message,i.stack].join("\n")),c.show()})),p=[{cmd:"upgrade",desc:"flutter upgrade",execute:h()},{cmd:"doctor",desc:"flutter doctor",execute:h()},{cmd:"create",desc:"flutter create",execute:h(),getArgs:()=>r(void 0,void 0,void 0,(function*(){return(yield i.window.requestInput("Input project name and other params: ")).split(" ")}))},{cmd:"pub get",name:"pub.get",desc:"flutter pub get",execute:()=>r(void 0,void 0,void 0,(function*(){const e=yield l.getFlutterWorkspaceFolder();if(f("pub get command, workspace: "+e),!e)return void o.notification.show("Flutter project workspaceFolder not found!");const{code:t,err:n,stdout:r,stderr:i}=yield s.flutterSDK.execFlutterCommand("pub get",{cwd:e});o.notification.show(a.formatMessage(r)),(n||t)&&o.notification.show(a.formatMessage(i))}))},{cmd:"devices",desc:"open devices list",execute:(e,...t)=>r(void 0,void 0,void 0,(function*(){i.workspace.nvim.command("CocList FlutterDevices "+t.join(" "))}))},{cmd:"emulators",desc:"open emulators list",execute:()=>r(void 0,void 0,void 0,(function*(){i.workspace.nvim.command("CocList FlutterEmulators")}))}];class m extends u.Dispose{constructor(){super(),p.forEach(e=>{const{desc:t,execute:n,name:o}=e,s=`${c.cmdPrefix}.${o||e.cmd}`;this.push(i.commands.registerCommand(s,(...o)=>r(this,void 0,void 0,(function*(){const r=i.window.createStatusBarItem(0,{progress:!0});this.push(r),r.text=t,r.show(),yield n(e,...o),this.remove(r)}))),i.Disposable.create(()=>{a.deleteCommandTitle(s)})),a.setCommandTitle(s,t)})}}t.Global=m},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.SuperCommand=void 0;const i=n(0),o=n(9),s=n(14),a=n(5),c=n(1);class u extends c.Dispose{constructor(e){super(),this.requestType="dart/textDocument/super",this.cmdId=a.cmdPrefix+".gotoSuper",this.push(i.commands.registerCommand(this.cmdId,()=>r(this,void 0,void 0,(function*(){if(!e.client)return o.notification.show("analyzer LSP server is not running");const t=yield i.workspace.document;if(!t||!t.textDocument||"dart"!==t.textDocument.languageId)return;const n=yield i.window.getCursorPosition(),r={textDocument:{uri:t.uri},position:n},s=yield e.client.sendRequest(this.requestType,r);s&&i.workspace.jumpTo(s.uri,s.range.start)})))),s.setCommandTitle(this.cmdId,"jump to the location of the super definition of the class or method")}dispose(){super.dispose(),s.deleteCommandTitle(this.cmdId)}}t.SuperCommand=u},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.LspCommands=void 0;const i=n(0),o=n(9),s=n(14),a=n(5),c=n(1);class u extends c.Dispose{constructor(e){super(),this.restartCmdId=a.cmdPrefix+".lsp.restart",this.push(i.commands.registerCommand(this.restartCmdId,()=>r(this,void 0,void 0,(function*(){if(!e.client)return o.notification.show("analyzer LSP server is not running");yield e.restart()})))),s.setCommandTitle(this.restartCmdId,"restart the lsp server")}dispose(){super.dispose(),s.deleteCommandTitle(this.restartCmdId)}}t.LspCommands=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Providers=void 0;const r=n(113),i=n(1),o=n(144);class s extends i.Dispose{constructor(){super(),this.push(r.registerHotReloadProvider(),o.pubUpdateProvider())}}t.Providers=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerHotReloadProvider=void 0;const r=n(0),i=n(114),o=n(29);t.registerHotReloadProvider=()=>{const e=r.workspace.getConfiguration("flutter").get("provider.hot-reload",!0);let t;e&&(t=r.workspace.onDidSaveTextDocument(e=>{if("dart"===e.languageId&&o.devServer.state){const t=r.diagnosticManager.getDiagnostics(e.uri);let n=t&&!0;try{n=n&&null!=t.find(e=>"dart"===e.source&&e.severity===i.DiagnosticSeverity.Error)}catch(e){n=!1,console.error(e)}n||o.devServer.sendCommand("r")}}));const n=r.workspace.onDidChangeConfiguration(n=>{if(n.affectsConfiguration("flutter")){const n=r.workspace.getConfiguration("flutter").get("provider.hot-reload",!0);e&&!n?t&&(t.dispose(),t=void 0):!e&&n&&(t=r.workspace.onDidSaveTextDocument(e=>{"dart"===e.languageId&&o.devServer.state&&o.devServer.sendCommand("r")}))}});return{dispose(){t&&t.dispose(),n.dispose()}}}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.createProtocolConnection=void 0;const o=n(39);i(n(39),t),i(n(124),t),t.createProtocolConnection=function(e,t,n,r){return o.createMessageConnection(e,t,n,r)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(8),i=n(19),o=n(40),s=n(116);class a extends s.AbstractMessageBuffer{constructor(e="utf-8"){super(e)}emptyBuffer(){return a.emptyBuffer}fromString(e,t){return Buffer.from(e,t)}toString(e,t){return e instanceof Buffer?e.toString(t):new i.TextDecoder(t).decode(e)}asNative(e,t){return void 0===t?e instanceof Buffer?e:Buffer.from(e):e instanceof Buffer?e.slice(0,t):Buffer.from(e,0,t)}allocNative(e){return Buffer.allocUnsafe(e)}}a.emptyBuffer=Buffer.allocUnsafe(0);class c{constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),o.Disposable.create(()=>this.stream.off("close",e))}onError(e){return this.stream.on("error",e),o.Disposable.create(()=>this.stream.off("error",e))}onEnd(e){return this.stream.on("end",e),o.Disposable.create(()=>this.stream.off("end",e))}onData(e){return this.stream.on("data",e),o.Disposable.create(()=>this.stream.off("data",e))}}class u{constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),o.Disposable.create(()=>this.stream.off("close",e))}onError(e){return this.stream.on("error",e),o.Disposable.create(()=>this.stream.off("error",e))}onEnd(e){return this.stream.on("end",e),o.Disposable.create(()=>this.stream.off("end",e))}write(e,t){return new Promise((n,r)=>{const i=e=>{null==e?n():r(e)};"string"==typeof e?this.stream.write(e,t,i):this.stream.write(e,i)})}end(){this.stream.end()}}const l=Object.freeze({messageBuffer:Object.freeze({create:e=>new a(e)}),applicationJson:Object.freeze({encoder:Object.freeze({name:"application/json",encode:(e,t)=>{try{return Promise.resolve(Buffer.from(JSON.stringify(e,void 0,0),t.charset))}catch(e){return Promise.reject(e)}}}),decoder:Object.freeze({name:"application/json",decode:(e,t)=>{try{return e instanceof Buffer?Promise.resolve(JSON.parse(e.toString(t.charset))):Promise.resolve(JSON.parse(new i.TextDecoder(t.charset).decode(e)))}catch(e){return Promise.reject(e)}}})}),stream:Object.freeze({asReadableStream:e=>new c(e),asWritableStream:e=>new u(e)}),console:console,timer:Object.freeze({setTimeout:(e,t,...n)=>setTimeout(e,t,...n),clearTimeout(e){clearTimeout(e)},setImmediate:(e,...t)=>setImmediate(e,...t),clearImmediate(e){clearImmediate(e)}})});function d(){return l}!function(e){e.install=function(){r.default.install(l)}}(d||(d={})),t.default=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AbstractMessageBuffer=void 0;t.AbstractMessageBuffer=class{constructor(e="utf-8"){this._encoding=e,this._chunks=[],this._totalLength=0}get encoding(){return this._encoding}append(e){const t="string"==typeof e?this.fromString(e,this._encoding):e;this._chunks.push(t),this._totalLength+=t.byteLength}tryReadHeaders(){if(0===this._chunks.length)return;let e=0,t=0,n=0,r=0;e:for(;t<this._chunks.length;){const i=this._chunks[t];for(n=0;n<i.length;){switch(i[n]){case 13:switch(e){case 0:e=1;break;case 2:e=3;break;default:e=0}break;case 10:switch(e){case 1:e=2;break;case 3:e=4,n++;break e;default:e=0}break;default:e=0}n++}r+=i.byteLength,t++}if(4!==e)return;const i=this._read(r+n),o=new Map,s=this.toString(i,"ascii").split("\r\n");if(s.length<2)return o;for(let e=0;e<s.length-2;e++){const t=s[e],n=t.indexOf(":");if(-1===n)throw new Error("Message header must separate key and value using :");const r=t.substr(0,n),i=t.substr(n+1).trim();o.set(r,i)}return o}tryReadBody(e){if(!(this._totalLength<e))return this._read(e)}get numberOfBytes(){return this._totalLength}_read(e){if(0===e)return this.emptyBuffer();if(e>this._totalLength)throw new Error("Cannot read so many bytes!");if(this._chunks[0].byteLength===e){const t=this._chunks[0];return this._chunks.shift(),this._totalLength-=e,this.asNative(t)}if(this._chunks[0].byteLength>e){const t=this._chunks[0],n=this.asNative(t,e);return this._chunks[0]=t.slice(e),this._totalLength-=e,n}const t=this.allocNative(e);let n=0;for(;e>0;){const r=this._chunks[0];if(r.byteLength>e){const i=r.slice(0,e);t.set(i,n),n+=e,this._chunks[0]=r.slice(e),this._totalLength-=e,e-=e}else t.set(r,n),n+=r.byteLength,this._chunks.shift(),this._totalLength-=r.byteLength,e-=r.byteLength}return t}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ReadableStreamMessageReader=t.AbstractMessageReader=t.MessageReader=void 0;const r=n(8),i=n(16),o=n(17);var s;!function(e){e.is=function(e){let t=e;return t&&i.func(t.listen)&&i.func(t.dispose)&&i.func(t.onError)&&i.func(t.onClose)&&i.func(t.onPartialMessage)}}(t.MessageReader||(t.MessageReader={}));class a{constructor(){this.errorEmitter=new o.Emitter,this.closeEmitter=new o.Emitter,this.partialMessageEmitter=new o.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e){this.errorEmitter.fire(this.asError(e))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(e){this.partialMessageEmitter.fire(e)}asError(e){return e instanceof Error?e:new Error("Reader received error. Reason: "+(i.string(e.message)?e.message:"unknown"))}}t.AbstractMessageReader=a,function(e){e.fromOptions=function(e){var t;let n,i;const o=new Map;let s;const a=new Map;if(void 0===e||"string"==typeof e)n=null!=e?e:"utf-8";else{if(n=null!==(t=e.charset)&&void 0!==t?t:"utf-8",void 0!==e.contentDecoder&&(i=e.contentDecoder,o.set(i.name,i)),void 0!==e.contentDecoders)for(const t of e.contentDecoders)o.set(t.name,t);if(void 0!==e.contentTypeDecoder&&(s=e.contentTypeDecoder,a.set(s.name,s)),void 0!==e.contentTypeDecoders)for(const t of e.contentTypeDecoders)a.set(t.name,t)}return void 0===s&&(s=r.default().applicationJson.decoder,a.set(s.name,s)),{charset:n,contentDecoder:i,contentDecoders:o,contentTypeDecoder:s,contentTypeDecoders:a}}}(s||(s={}));t.ReadableStreamMessageReader=class extends a{constructor(e,t){super(),this.readable=e,this.options=s.fromOptions(t),this.buffer=r.default().messageBuffer.create(this.options.charset),this._partialMessageTimeout=1e4,this.nextMessageLength=-1,this.messageToken=0}set partialMessageTimeout(e){this._partialMessageTimeout=e}get partialMessageTimeout(){return this._partialMessageTimeout}listen(e){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=e;const t=this.readable.onData(e=>{this.onData(e)});return this.readable.onError(e=>this.fireError(e)),this.readable.onClose(()=>this.fireClose()),t}onData(e){for(this.buffer.append(e);;){if(-1===this.nextMessageLength){const e=this.buffer.tryReadHeaders();if(!e)return;const t=e.get("Content-Length");if(!t)throw new Error("Header must provide a Content-Length property.");const n=parseInt(t);if(isNaN(n))throw new Error("Content-Length value must be a number.");this.nextMessageLength=n}const e=this.buffer.tryReadBody(this.nextMessageLength);if(void 0===e)return void this.setPartialMessageTimer();let t;this.clearPartialMessageTimer(),this.nextMessageLength=-1,t=void 0!==this.options.contentDecoder?this.options.contentDecoder.decode(e):Promise.resolve(e),t.then(e=>{this.options.contentTypeDecoder.decode(e,this.options).then(e=>{this.callback(e)},e=>{this.fireError(e)})},e=>{this.fireError(e)})}}clearPartialMessageTimer(){this.partialMessageTimer&&(r.default().timer.clearTimeout(this.partialMessageTimer),this.partialMessageTimer=void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),this._partialMessageTimeout<=0||(this.partialMessageTimer=r.default().timer.setTimeout((e,t)=>{this.partialMessageTimer=void 0,e===this.messageToken&&(this.firePartialMessage({messageToken:e,waitingTime:t}),this.setPartialMessageTimer())},this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WriteableStreamMessageWriter=t.AbstractMessageWriter=t.MessageWriter=void 0;const r=n(8),i=n(16),o=n(119),s=n(17);var a;!function(e){e.is=function(e){let t=e;return t&&i.func(t.dispose)&&i.func(t.onClose)&&i.func(t.onError)&&i.func(t.write)}}(t.MessageWriter||(t.MessageWriter={}));class c{constructor(){this.errorEmitter=new s.Emitter,this.closeEmitter=new s.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e,t,n){this.errorEmitter.fire([this.asError(e),t,n])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(e){return e instanceof Error?e:new Error("Writer received error. Reason: "+(i.string(e.message)?e.message:"unknown"))}}t.AbstractMessageWriter=c,function(e){e.fromOptions=function(e){var t,n;return void 0===e||"string"==typeof e?{charset:null!=e?e:"utf-8",contentTypeEncoder:r.default().applicationJson.encoder}:{charset:null!==(t=e.charset)&&void 0!==t?t:"utf-8",contentEncoder:e.contentEncoder,contentTypeEncoder:null!==(n=e.contentTypeEncoder)&&void 0!==n?n:r.default().applicationJson.encoder}}}(a||(a={}));t.WriteableStreamMessageWriter=class extends c{constructor(e,t){super(),this.writable=e,this.options=a.fromOptions(t),this.errorCount=0,this.writeSemaphore=new o.Semaphore(1),this.writable.onError(e=>this.fireError(e)),this.writable.onClose(()=>this.fireClose())}async write(e){return this.writeSemaphore.lock(async()=>this.options.contentTypeEncoder.encode(e,this.options).then(e=>void 0!==this.options.contentEncoder?this.options.contentEncoder.encode(e):e).then(t=>{const n=[];return n.push("Content-Length: ",t.byteLength.toString(),"\r\n"),n.push("\r\n"),this.doWrite(e,n,t)},e=>{throw this.fireError(e),e}))}async doWrite(e,t,n){try{return await this.writable.write(t.join(""),"ascii"),this.writable.write(n)}catch(t){return this.handleError(t,e),Promise.reject(t)}}handleError(e,t){this.errorCount++,this.fireError(e,t,this.errorCount)}end(){this.writable.end()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Semaphore=void 0;const r=n(8);t.Semaphore=class{constructor(e=1){if(e<=0)throw new Error("Capacity must be greater than 0");this._capacity=e,this._active=0,this._waiting=[]}lock(e){return new Promise((t,n)=>{this._waiting.push({thunk:e,resolve:t,reject:n}),this.runNext()})}get active(){return this._active}runNext(){0!==this._waiting.length&&this._active!==this._capacity&&r.default().timer.setImmediate(()=>this.doRunNext())}doRunNext(){if(0===this._waiting.length||this._active===this._capacity)return;const e=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{const t=e.thunk();t instanceof Promise?t.then(t=>{this._active--,e.resolve(t),this.runNext()},t=>{this._active--,e.reject(t),this.runNext()}):(this._active--,e.resolve(t),this.runNext())}catch(t){this._active--,e.reject(t),this.runNext()}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createMessageConnection=t.ConnectionOptions=t.CancellationStrategy=t.CancellationSenderStrategy=t.CancellationReceiverStrategy=t.ConnectionStrategy=t.ConnectionError=t.ConnectionErrors=t.LogTraceNotification=t.SetTraceNotification=t.TraceFormat=t.Trace=t.NullLogger=t.ProgressType=void 0;const r=n(8),i=n(16),o=n(42),s=n(121),a=n(17),c=n(43);var u,l,d,f,h,p,m,g,y,v,_,b,R;!function(e){e.type=new o.NotificationType("$/cancelRequest")}(u||(u={})),function(e){e.type=new o.NotificationType("$/progress")}(l||(l={}));t.ProgressType=class{constructor(){}},function(e){e.is=function(e){return i.func(e)}}(d||(d={})),t.NullLogger=Object.freeze({error:()=>{},warn:()=>{},info:()=>{},log:()=>{}}),function(e){e[e.Off=0]="Off",e[e.Messages=1]="Messages",e[e.Verbose=2]="Verbose"}(f=t.Trace||(t.Trace={})),function(e){e.fromString=function(t){if(!i.string(t))return e.Off;switch(t=t.toLowerCase()){case"off":return e.Off;case"messages":return e.Messages;case"verbose":return e.Verbose;default:return e.Off}},e.toString=function(t){switch(t){case e.Off:return"off";case e.Messages:return"messages";case e.Verbose:return"verbose";default:return"off"}}}(f=t.Trace||(t.Trace={})),function(e){e.Text="text",e.JSON="json"}(t.TraceFormat||(t.TraceFormat={})),function(e){e.fromString=function(t){return"json"===(t=t.toLowerCase())?e.JSON:e.Text}}(h=t.TraceFormat||(t.TraceFormat={})),function(e){e.type=new o.NotificationType("$/setTrace")}(p=t.SetTraceNotification||(t.SetTraceNotification={})),function(e){e.type=new o.NotificationType("$/logTrace")}(m=t.LogTraceNotification||(t.LogTraceNotification={})),function(e){e[e.Closed=1]="Closed",e[e.Disposed=2]="Disposed",e[e.AlreadyListening=3]="AlreadyListening"}(g=t.ConnectionErrors||(t.ConnectionErrors={}));class w extends Error{constructor(e,t){super(t),this.code=e,Object.setPrototypeOf(this,w.prototype)}}t.ConnectionError=w,function(e){e.is=function(e){const t=e;return t&&i.func(t.cancelUndispatched)}}(y=t.ConnectionStrategy||(t.ConnectionStrategy={})),function(e){e.Message=Object.freeze({createCancellationTokenSource:e=>new c.CancellationTokenSource}),e.is=function(e){const t=e;return t&&i.func(t.createCancellationTokenSource)}}(v=t.CancellationReceiverStrategy||(t.CancellationReceiverStrategy={})),function(e){e.Message=Object.freeze({sendCancellation(e,t){e.sendNotification(u.type,{id:t})},cleanup(e){}}),e.is=function(e){const t=e;return t&&i.func(t.sendCancellation)&&i.func(t.cleanup)}}(_=t.CancellationSenderStrategy||(t.CancellationSenderStrategy={})),function(e){e.Message=Object.freeze({receiver:v.Message,sender:_.Message}),e.is=function(e){const t=e;return t&&v.is(t.receiver)&&_.is(t.sender)}}(b=t.CancellationStrategy||(t.CancellationStrategy={})),function(e){e.is=function(e){const t=e;return t&&(b.is(t.cancellationStrategy)||y.is(t.connectionStrategy))}}(t.ConnectionOptions||(t.ConnectionOptions={})),function(e){e[e.New=1]="New",e[e.Listening=2]="Listening",e[e.Closed=3]="Closed",e[e.Disposed=4]="Disposed"}(R||(R={})),t.createMessageConnection=function(e,n,y,v){const _=void 0!==y?y:t.NullLogger;let S=0,T=0,C=0,E=void 0;const k=Object.create(null);let x=void 0;const P=Object.create(null),O=new Map;let A,D,M=new s.LinkedMap,L=Object.create(null),N=Object.create(null),F=f.Off,q=h.Text,j=R.New;const I=new a.Emitter,H=new a.Emitter,$=new a.Emitter,W=new a.Emitter,B=new a.Emitter,U=v&&v.cancellationStrategy?v.cancellationStrategy:b.Message;function K(e){if(null===e)throw new Error("Can't send requests with id null since the response can't be correlated.");return"req-"+e.toString()}function V(e,t){var n;o.isRequestMessage(t)?e.set(K(t.id),t):o.isResponseMessage(t)?e.set(null===(n=t.id)?"res-unknown-"+(++C).toString():"res-"+n.toString(),t):e.set("not-"+(++T).toString(),t)}function G(e){}function z(){return j===R.Listening}function Q(){return j===R.Closed}function X(){return j===R.Disposed}function Y(){j!==R.New&&j!==R.Listening||(j=R.Closed,H.fire(void 0))}function J(){A||0===M.size||(A=r.default().timer.setImmediate(()=>{A=void 0,function(){if(0===M.size)return;const e=M.shift();try{o.isRequestMessage(e)?function(e){if(X())return;function t(t,r,i){const s={jsonrpc:"2.0",id:e.id};t instanceof o.ResponseError?s.error=t.toJson():s.result=void 0===t?null:t,ee(s,r,i),n.write(s)}function r(t,r,i){const o={jsonrpc:"2.0",id:e.id,error:t.toJson()};ee(o,r,i),n.write(o)}!function(e){if(F===f.Off||!D)return;if(q===h.Text){let t=void 0;F===f.Verbose&&e.params&&(t=`Params: ${JSON.stringify(e.params,null,4)}\n\n`),D.log(`Received request '${e.method} - (${e.id})'.`,t)}else te("receive-request",e)}(e);const s=k[e.method];let a,c;s&&(a=s.type,c=s.handler);const u=Date.now();if(c||E){const s=String(e.id),l=U.receiver.createCancellationTokenSource(s);N[s]=l;try{let d;if(c)if(void 0===e.params){if(void 0!==a&&0!==a.numberOfParams)return void r(new o.ResponseError(o.ErrorCodes.InvalidParams,`Request ${e.method} defines ${a.numberOfParams} params but recevied none.`),e.method,u);d=c(l.token)}else if(Array.isArray(e.params)){if(void 0!==a&&a.parameterStructures===o.ParameterStructures.byName)return void r(new o.ResponseError(o.ErrorCodes.InvalidParams,`Request ${e.method} defines parameters by name but received parameters by position`),e.method,u);d=c(...e.params,l.token)}else{if(void 0!==a&&a.parameterStructures===o.ParameterStructures.byPosition)return void r(new o.ResponseError(o.ErrorCodes.InvalidParams,`Request ${e.method} defines parameters by position but received parameters by name`),e.method,u);d=c(e.params,l.token)}else E&&(d=E(e.method,e.params,l.token));const f=d;d?f.then?f.then(n=>{delete N[s],t(n,e.method,u)},t=>{delete N[s],t instanceof o.ResponseError?r(t,e.method,u):t&&i.string(t.message)?r(new o.ResponseError(o.ErrorCodes.InternalError,`Request ${e.method} failed with message: ${t.message}`),e.method,u):r(new o.ResponseError(o.ErrorCodes.InternalError,`Request ${e.method} failed unexpectedly without providing any details.`),e.method,u)}):(delete N[s],t(d,e.method,u)):(delete N[s],function(t,r,i){void 0===t&&(t=null);const o={jsonrpc:"2.0",id:e.id,result:t};ee(o,r,i),n.write(o)}(d,e.method,u))}catch(n){delete N[s],n instanceof o.ResponseError?t(n,e.method,u):n&&i.string(n.message)?r(new o.ResponseError(o.ErrorCodes.InternalError,`Request ${e.method} failed with message: ${n.message}`),e.method,u):r(new o.ResponseError(o.ErrorCodes.InternalError,`Request ${e.method} failed unexpectedly without providing any details.`),e.method,u)}}else r(new o.ResponseError(o.ErrorCodes.MethodNotFound,"Unhandled method "+e.method),e.method,u)}(e):o.isNotificationMessage(e)?function(e){if(X())return;let t,n=void 0;if(e.method===u.type.method)t=e=>{const t=e.id,n=N[String(t)];n&&n.cancel()};else{const r=P[e.method];r&&(t=r.handler,n=r.type)}if(t||x)try{!function(e){if(F===f.Off||!D||e.method===m.type.method)return;if(q===h.Text){let t=void 0;F===f.Verbose&&(t=e.params?`Params: ${JSON.stringify(e.params,null,4)}\n\n`:"No parameters provided.\n\n"),D.log(`Received notification '${e.method}'.`,t)}else te("receive-notification",e)}(e),t?void 0===e.params?(void 0!==n&&0!==n.numberOfParams&&n.parameterStructures!==o.ParameterStructures.byName&&_.error(`Notification ${e.method} defines ${n.numberOfParams} params but recevied none.`),t()):Array.isArray(e.params)?(void 0!==n&&(n.parameterStructures===o.ParameterStructures.byName&&_.error(`Notification ${e.method} defines parameters by name but received parameters by position`),n.numberOfParams!==e.params.length&&_.error(`Notification ${e.method} defines ${n.numberOfParams} params but received ${e.params.length} argumennts`)),t(...e.params)):(void 0!==n&&n.parameterStructures===o.ParameterStructures.byPosition&&_.error(`Notification ${e.method} defines parameters by position but received parameters by name`),t(e.params)):x&&x(e.method,e.params)}catch(t){t.message?_.error(`Notification handler '${e.method}' failed with message: ${t.message}`):_.error(`Notification handler '${e.method}' failed unexpectedly.`)}else $.fire(e)}(e):o.isResponseMessage(e)?function(e){if(X())return;if(null===e.id)e.error?_.error("Received response message without id: Error is: \n"+JSON.stringify(e.error,void 0,4)):_.error("Received response message without id. No further error information provided.");else{const t=String(e.id),n=L[t];if(function(e,t){if(F===f.Off||!D)return;if(q===h.Text){let n=void 0;if(F===f.Verbose&&(e.error&&e.error.data?n=`Error data: ${JSON.stringify(e.error.data,null,4)}\n\n`:e.result?n=`Result: ${JSON.stringify(e.result,null,4)}\n\n`:void 0===e.error&&(n="No result returned.\n\n")),t){const r=e.error?` Request failed: ${e.error.message} (${e.error.code}).`:"";D.log(`Received response '${t.method} - (${e.id})' in ${Date.now()-t.timerStart}ms.${r}`,n)}else D.log(`Received response ${e.id} without active response promise.`,n)}else te("receive-response",e)}(e,n),n){delete L[t];try{if(e.error){const t=e.error;n.reject(new o.ResponseError(t.code,t.message,t.data))}else{if(void 0===e.result)throw new Error("Should never happen.");n.resolve(e.result)}}catch(e){e.message?_.error(`Response handler '${n.method}' failed with message: ${e.message}`):_.error(`Response handler '${n.method}' failed unexpectedly.`)}}}}(e):function(e){if(!e)return void _.error("Received empty message.");_.error("Received message which is neither a response nor a notification message:\n"+JSON.stringify(e,null,4));const t=e;if(i.string(t.id)||i.number(t.id)){const e=String(t.id),n=L[e];n&&n.reject(new Error("The received response has neither a result nor an error property."))}}(e)}finally{J()}}()}))}e.onClose(Y),e.onError((function(e){I.fire([e,void 0,void 0])})),n.onClose(Y),n.onError((function(e){I.fire(e)}));const Z=e=>{try{if(o.isNotificationMessage(e)&&e.method===u.type.method){const t=K(e.params.id),r=M.get(t);if(o.isRequestMessage(r)){const i=null==v?void 0:v.connectionStrategy,o=i&&i.cancelUndispatched?i.cancelUndispatched(r,G):void 0;if(o&&(void 0!==o.error||void 0!==o.result))return M.delete(t),o.id=r.id,ee(o,e.method,Date.now()),void n.write(o)}}V(M,e)}finally{J()}};function ee(e,t,n){if(F!==f.Off&&D)if(q===h.Text){let r=void 0;F===f.Verbose&&(e.error&&e.error.data?r=`Error data: ${JSON.stringify(e.error.data,null,4)}\n\n`:e.result?r=`Result: ${JSON.stringify(e.result,null,4)}\n\n`:void 0===e.error&&(r="No result returned.\n\n")),D.log(`Sending response '${t} - (${e.id})'. Processing request took ${Date.now()-n}ms`,r)}else te("send-response",e)}function te(e,t){if(!D||F===f.Off)return;const n={isLSPMessage:!0,type:e,message:t,timestamp:Date.now()};D.log(n)}function ne(){if(Q())throw new w(g.Closed,"Connection is closed.");if(X())throw new w(g.Disposed,"Connection is disposed.")}function re(e){return void 0===e?null:e}function ie(e){return null===e?void 0:e}function oe(e){return null!=e&&!Array.isArray(e)&&"object"==typeof e}function se(e,t){switch(e){case o.ParameterStructures.auto:return oe(t)?ie(t):[re(t)];case o.ParameterStructures.byName:if(!oe(t))throw new Error("Recevied parameters by name but param is not an object literal.");return ie(t);case o.ParameterStructures.byPosition:return[re(t)];default:throw new Error("Unknown parameter structure "+e.toString())}}function ae(e,t){let n;const r=e.numberOfParams;switch(r){case 0:n=void 0;break;case 1:n=se(e.parameterStructures,t[0]);break;default:n=[];for(let e=0;e<t.length&&e<r;e++)n.push(re(t[e]));if(t.length<r)for(let e=t.length;e<r;e++)n.push(null)}return n}const ce={sendNotification:(e,...t)=>{let r,s;if(ne(),i.string(e)){r=e;const n=t[0];let i=0,a=o.ParameterStructures.auto;o.ParameterStructures.is(n)&&(i=1,a=n);let c=t.length;const u=c-i;switch(u){case 0:s=void 0;break;case 1:s=se(a,t[i]);break;default:if(a===o.ParameterStructures.byName)throw new Error(`Recevied ${u} parameters for 'by Name' notification parameter structure.`);s=t.slice(i,c).map(e=>re(e))}}else{const n=t;r=e.method,s=ae(e,n)}const a={jsonrpc:"2.0",method:r,params:s};!function(e){if(F!==f.Off&&D)if(q===h.Text){let t=void 0;F===f.Verbose&&(t=e.params?`Params: ${JSON.stringify(e.params,null,4)}\n\n`:"No parameters provided.\n\n"),D.log(`Sending notification '${e.method}'.`,t)}else te("send-notification",e)}(a),n.write(a)},onNotification:(e,t)=>{let n;return ne(),i.func(e)?x=e:t&&(i.string(e)?(n=e,P[e]={type:void 0,handler:t}):(n=e.method,P[e.method]={type:e,handler:t})),{dispose:()=>{void 0!==n?delete P[n]:x=void 0}}},onProgress:(e,t,n)=>{if(O.has(t))throw new Error(`Progress handler for token ${t} already registered`);return O.set(t,n),{dispose:()=>{O.delete(t)}}},sendProgress:(e,t,n)=>{ce.sendNotification(l.type,{token:t,value:n})},onUnhandledProgress:W.event,sendRequest:(e,...t)=>{let r,s;ne(),function(){if(!z())throw new Error("Call listen() first.")}();let a=void 0;if(i.string(e)){r=e;const n=t[0],i=t[t.length-1];let u=0,l=o.ParameterStructures.auto;o.ParameterStructures.is(n)&&(u=1,l=n);let d=t.length;c.CancellationToken.is(i)&&(d-=1,a=i);const f=d-u;switch(f){case 0:s=void 0;break;case 1:s=se(l,t[u]);break;default:if(l===o.ParameterStructures.byName)throw new Error(`Recevied ${f} parameters for 'by Name' request parameter structure.`);s=t.slice(u,d).map(e=>re(e))}}else{const n=t;r=e.method,s=ae(e,n);const i=e.numberOfParams;a=c.CancellationToken.is(n[i])?n[i]:void 0}const u=S++;let l;a&&(l=a.onCancellationRequested(()=>{U.sender.sendCancellation(ce,u)}));return new Promise((e,t)=>{const i={jsonrpc:"2.0",id:u,method:r,params:s};let a={method:r,timerStart:Date.now(),resolve:t=>{e(t),U.sender.cleanup(u),null==l||l.dispose()},reject:e=>{t(e),U.sender.cleanup(u),null==l||l.dispose()}};!function(e){if(F!==f.Off&&D)if(q===h.Text){let t=void 0;F===f.Verbose&&e.params&&(t=`Params: ${JSON.stringify(e.params,null,4)}\n\n`),D.log(`Sending request '${e.method} - (${e.id})'.`,t)}else te("send-request",e)}(i);try{n.write(i)}catch(e){a.reject(new o.ResponseError(o.ErrorCodes.MessageWriteError,e.message?e.message:"Unknown reason")),a=null}a&&(L[String(u)]=a)})},onRequest:(e,t)=>{ne();let n=null;return d.is(e)?(n=void 0,E=e):i.string(e)?(n=null,void 0!==t&&(n=e,k[e]={handler:t,type:void 0})):void 0!==t&&(n=e.method,k[e.method]={type:e,handler:t}),{dispose:()=>{null!==n&&(void 0!==n?delete k[n]:E=void 0)}}},trace:(e,t,n)=>{let r=!1,o=h.Text;void 0!==n&&(i.boolean(n)?r=n:(r=n.sendNotification||!1,o=n.traceFormat||h.Text)),F=e,q=o,D=F===f.Off?void 0:t,!r||Q()||X()||ce.sendNotification(p.type,{value:f.toString(e)})},onError:I.event,onClose:H.event,onUnhandledNotification:$.event,onDispose:B.event,end:()=>{n.end()},dispose:()=>{if(X())return;j=R.Disposed,B.fire(void 0);const t=new Error("Connection got disposed.");Object.keys(L).forEach(e=>{L[e].reject(t)}),L=Object.create(null),N=Object.create(null),M=new s.LinkedMap,i.func(n.dispose)&&n.dispose(),i.func(e.dispose)&&e.dispose()},listen:()=>{ne(),function(){if(z())throw new w(g.AlreadyListening,"Connection is already listening")}(),j=R.Listening,e.listen(Z)},inspect:()=>{r.default().console.log("inspect")}};return ce.onNotification(m.type,e=>{F!==f.Off&&D&&D.log(e.message,F===f.Verbose?e.verbose:void 0)}),ce.onNotification(l.type,e=>{const t=O.get(e.token);t?t(e.value):W.fire(e)}),ce}},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.LRUCache=t.LinkedMap=t.Touch=void 0,function(e){e.None=0,e.First=1,e.AsOld=e.First,e.Last=2,e.AsNew=e.Last}(r=t.Touch||(t.Touch={}));class i{constructor(){this[Symbol.toStringTag]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){var e;return null===(e=this._head)||void 0===e?void 0:e.value}get last(){var e;return null===(e=this._tail)||void 0===e?void 0:e.value}has(e){return this._map.has(e)}get(e,t=r.None){const n=this._map.get(e);if(n)return t!==r.None&&this.touch(n,t),n.value}set(e,t,n=r.None){let i=this._map.get(e);if(i)i.value=t,n!==r.None&&this.touch(i,n);else{switch(i={key:e,value:t,next:void 0,previous:void 0},n){case r.None:this.addItemLast(i);break;case r.First:this.addItemFirst(i);break;case r.Last:default:this.addItemLast(i)}this._map.set(e,i),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){const t=this._map.get(e);if(t)return this._map.delete(e),this.removeItem(t),this._size--,t.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");const e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,t){const n=this._state;let r=this._head;for(;r;){if(t?e.bind(t)(r.value,r.key,this):e(r.value,r.key,this),this._state!==n)throw new Error("LinkedMap got modified during iteration.");r=r.next}}keys(){const e=this,t=this._state;let n=this._head;const r={[Symbol.iterator]:()=>r,next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(n){const e={value:n.key,done:!1};return n=n.next,e}return{value:void 0,done:!0}}};return r}values(){const e=this,t=this._state;let n=this._head;const r={[Symbol.iterator]:()=>r,next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(n){const e={value:n.value,done:!1};return n=n.next,e}return{value:void 0,done:!0}}};return r}entries(){const e=this,t=this._state;let n=this._head;const r={[Symbol.iterator]:()=>r,next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(n){const e={value:[n.key,n.value],done:!1};return n=n.next,e}return{value:void 0,done:!0}}};return r}[Symbol.iterator](){return this.entries()}trimOld(e){if(e>=this.size)return;if(0===e)return void this.clear();let t=this._head,n=this.size;for(;t&&n>e;)this._map.delete(t.key),t=t.next,n--;this._head=t,this._size=n,t&&(t.previous=void 0),this._state++}addItemFirst(e){if(this._head||this._tail){if(!this._head)throw new Error("Invalid list");e.next=this._head,this._head.previous=e}else this._tail=e;this._head=e,this._state++}addItemLast(e){if(this._head||this._tail){if(!this._tail)throw new Error("Invalid list");e.previous=this._tail,this._tail.next=e}else this._head=e;this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{const t=e.next,n=e.previous;if(!t||!n)throw new Error("Invalid list");t.previous=n,n.next=t}e.next=void 0,e.previous=void 0,this._state++}touch(e,t){if(!this._head||!this._tail)throw new Error("Invalid list");if(t===r.First||t===r.Last)if(t===r.First){if(e===this._head)return;const t=e.next,n=e.previous;e===this._tail?(n.next=void 0,this._tail=n):(t.previous=n,n.next=t),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(t===r.Last){if(e===this._tail)return;const t=e.next,n=e.previous;e===this._head?(t.previous=void 0,this._head=t):(t.previous=n,n.next=t),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}toJSON(){const e=[];return this.forEach((t,n)=>{e.push([n,t])}),e}fromJSON(e){this.clear();for(const[t,n]of e)this.set(t,n)}}t.LinkedMap=i;t.LRUCache=class extends i{constructor(e,t=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,t),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,t=r.AsNew){return super.get(e,t)}peek(e){return super.get(e,r.None)}set(e,t){return super.set(e,t,r.Last),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}}},function(e,t){e.exports=require("crypto")},function(e,t){e.exports=require("net")},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.LSPErrorCodes=t.createProtocolConnection=void 0,i(n(15),t),i(n(125),t),i(n(2),t),i(n(126),t);var o=n(143);Object.defineProperty(t,"createProtocolConnection",{enumerable:!0,get:function(){return o.createProtocolConnection}}),function(e){e.lspReservedErrorRangeStart=-32899,e.ContentModified=-32801,e.RequestCancelled=-32800,e.lspReservedErrorRangeEnd=-32800}(t.LSPErrorCodes||(t.LSPErrorCodes={}))},function(e,t,n){"use strict";var r,i,o,s,a,c,u,l,d,f,h,p,m,g,y,v,_,b,R,w,S,T,C,E,k,x;n.r(t),n.d(t,"integer",(function(){return r})),n.d(t,"uinteger",(function(){return i})),n.d(t,"Position",(function(){return o})),n.d(t,"Range",(function(){return s})),n.d(t,"Location",(function(){return a})),n.d(t,"LocationLink",(function(){return c})),n.d(t,"Color",(function(){return u})),n.d(t,"ColorInformation",(function(){return l})),n.d(t,"ColorPresentation",(function(){return d})),n.d(t,"FoldingRangeKind",(function(){return f})),n.d(t,"FoldingRange",(function(){return h})),n.d(t,"DiagnosticRelatedInformation",(function(){return p})),n.d(t,"DiagnosticSeverity",(function(){return m})),n.d(t,"DiagnosticTag",(function(){return g})),n.d(t,"CodeDescription",(function(){return y})),n.d(t,"Diagnostic",(function(){return v})),n.d(t,"Command",(function(){return _})),n.d(t,"TextEdit",(function(){return b})),n.d(t,"ChangeAnnotation",(function(){return R})),n.d(t,"ChangeAnnotationIdentifier",(function(){return w})),n.d(t,"AnnotatedTextEdit",(function(){return S})),n.d(t,"TextDocumentEdit",(function(){return T})),n.d(t,"CreateFile",(function(){return C})),n.d(t,"RenameFile",(function(){return E})),n.d(t,"DeleteFile",(function(){return k})),n.d(t,"WorkspaceEdit",(function(){return x})),n.d(t,"WorkspaceChange",(function(){return ae})),n.d(t,"TextDocumentIdentifier",(function(){return P})),n.d(t,"VersionedTextDocumentIdentifier",(function(){return O})),n.d(t,"OptionalVersionedTextDocumentIdentifier",(function(){return A})),n.d(t,"TextDocumentItem",(function(){return D})),n.d(t,"MarkupKind",(function(){return M})),n.d(t,"MarkupContent",(function(){return L})),n.d(t,"CompletionItemKind",(function(){return N})),n.d(t,"InsertTextFormat",(function(){return F})),n.d(t,"CompletionItemTag",(function(){return q})),n.d(t,"InsertReplaceEdit",(function(){return j})),n.d(t,"InsertTextMode",(function(){return I})),n.d(t,"CompletionItem",(function(){return H})),n.d(t,"CompletionList",(function(){return $})),n.d(t,"MarkedString",(function(){return W})),n.d(t,"Hover",(function(){return B})),n.d(t,"ParameterInformation",(function(){return U})),n.d(t,"SignatureInformation",(function(){return K})),n.d(t,"DocumentHighlightKind",(function(){return V})),n.d(t,"DocumentHighlight",(function(){return G})),n.d(t,"SymbolKind",(function(){return z})),n.d(t,"SymbolTag",(function(){return Q})),n.d(t,"SymbolInformation",(function(){return X})),n.d(t,"DocumentSymbol",(function(){return Y})),n.d(t,"CodeActionKind",(function(){return J})),n.d(t,"CodeActionContext",(function(){return Z})),n.d(t,"CodeAction",(function(){return ee})),n.d(t,"CodeLens",(function(){return te})),n.d(t,"FormattingOptions",(function(){return ne})),n.d(t,"DocumentLink",(function(){return re})),n.d(t,"SelectionRange",(function(){return ie})),n.d(t,"EOL",(function(){return ue})),n.d(t,"TextDocument",(function(){return ce})),function(e){e.MIN_VALUE=-2147483648,e.MAX_VALUE=2147483647}(r||(r={})),function(e){e.MIN_VALUE=0,e.MAX_VALUE=2147483647}(i||(i={})),function(e){e.create=function(e,t){return e===Number.MAX_VALUE&&(e=i.MAX_VALUE),t===Number.MAX_VALUE&&(t=i.MAX_VALUE),{line:e,character:t}},e.is=function(e){var t=e;return le.objectLiteral(t)&&le.uinteger(t.line)&&le.uinteger(t.character)}}(o||(o={})),function(e){e.create=function(e,t,n,r){if(le.uinteger(e)&&le.uinteger(t)&&le.uinteger(n)&&le.uinteger(r))return{start:o.create(e,t),end:o.create(n,r)};if(o.is(e)&&o.is(t))return{start:e,end:t};throw new Error("Range#create called with invalid arguments["+e+", "+t+", "+n+", "+r+"]")},e.is=function(e){var t=e;return le.objectLiteral(t)&&o.is(t.start)&&o.is(t.end)}}(s||(s={})),function(e){e.create=function(e,t){return{uri:e,range:t}},e.is=function(e){var t=e;return le.defined(t)&&s.is(t.range)&&(le.string(t.uri)||le.undefined(t.uri))}}(a||(a={})),function(e){e.create=function(e,t,n,r){return{targetUri:e,targetRange:t,targetSelectionRange:n,originSelectionRange:r}},e.is=function(e){var t=e;return le.defined(t)&&s.is(t.targetRange)&&le.string(t.targetUri)&&(s.is(t.targetSelectionRange)||le.undefined(t.targetSelectionRange))&&(s.is(t.originSelectionRange)||le.undefined(t.originSelectionRange))}}(c||(c={})),function(e){e.create=function(e,t,n,r){return{red:e,green:t,blue:n,alpha:r}},e.is=function(e){var t=e;return le.numberRange(t.red,0,1)&&le.numberRange(t.green,0,1)&&le.numberRange(t.blue,0,1)&&le.numberRange(t.alpha,0,1)}}(u||(u={})),function(e){e.create=function(e,t){return{range:e,color:t}},e.is=function(e){var t=e;return s.is(t.range)&&u.is(t.color)}}(l||(l={})),function(e){e.create=function(e,t,n){return{label:e,textEdit:t,additionalTextEdits:n}},e.is=function(e){var t=e;return le.string(t.label)&&(le.undefined(t.textEdit)||b.is(t))&&(le.undefined(t.additionalTextEdits)||le.typedArray(t.additionalTextEdits,b.is))}}(d||(d={})),function(e){e.Comment="comment",e.Imports="imports",e.Region="region"}(f||(f={})),function(e){e.create=function(e,t,n,r,i){var o={startLine:e,endLine:t};return le.defined(n)&&(o.startCharacter=n),le.defined(r)&&(o.endCharacter=r),le.defined(i)&&(o.kind=i),o},e.is=function(e){var t=e;return le.uinteger(t.startLine)&&le.uinteger(t.startLine)&&(le.undefined(t.startCharacter)||le.uinteger(t.startCharacter))&&(le.undefined(t.endCharacter)||le.uinteger(t.endCharacter))&&(le.undefined(t.kind)||le.string(t.kind))}}(h||(h={})),function(e){e.create=function(e,t){return{location:e,message:t}},e.is=function(e){var t=e;return le.defined(t)&&a.is(t.location)&&le.string(t.message)}}(p||(p={})),function(e){e.Error=1,e.Warning=2,e.Information=3,e.Hint=4}(m||(m={})),function(e){e.Unnecessary=1,e.Deprecated=2}(g||(g={})),function(e){e.is=function(e){var t=e;return null!=t&&le.string(t.href)}}(y||(y={})),function(e){e.create=function(e,t,n,r,i,o){var s={range:e,message:t};return le.defined(n)&&(s.severity=n),le.defined(r)&&(s.code=r),le.defined(i)&&(s.source=i),le.defined(o)&&(s.relatedInformation=o),s},e.is=function(e){var t,n=e;return le.defined(n)&&s.is(n.range)&&le.string(n.message)&&(le.number(n.severity)||le.undefined(n.severity))&&(le.integer(n.code)||le.string(n.code)||le.undefined(n.code))&&(le.undefined(n.codeDescription)||le.string(null===(t=n.codeDescription)||void 0===t?void 0:t.href))&&(le.string(n.source)||le.undefined(n.source))&&(le.undefined(n.relatedInformation)||le.typedArray(n.relatedInformation,p.is))}}(v||(v={})),function(e){e.create=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i={title:e,command:t};return le.defined(n)&&n.length>0&&(i.arguments=n),i},e.is=function(e){var t=e;return le.defined(t)&&le.string(t.title)&&le.string(t.command)}}(_||(_={})),function(e){e.replace=function(e,t){return{range:e,newText:t}},e.insert=function(e,t){return{range:{start:e,end:e},newText:t}},e.del=function(e){return{range:e,newText:""}},e.is=function(e){var t=e;return le.objectLiteral(t)&&le.string(t.newText)&&s.is(t.range)}}(b||(b={})),function(e){e.create=function(e,t,n){var r={label:e};return void 0!==t&&(r.needsConfirmation=t),void 0!==n&&(r.description=n),r},e.is=function(e){var t=e;return void 0!==t&&le.objectLiteral(t)&&le.string(t.label)&&(le.boolean(t.needsConfirmation)||void 0===t.needsConfirmation)&&(le.string(t.description)||void 0===t.description)}}(R||(R={})),function(e){e.is=function(e){return"string"==typeof e}}(w||(w={})),function(e){e.replace=function(e,t,n){return{range:e,newText:t,annotationId:n}},e.insert=function(e,t,n){return{range:{start:e,end:e},newText:t,annotationId:n}},e.del=function(e,t){return{range:e,newText:"",annotationId:t}},e.is=function(e){var t=e;return b.is(t)&&(R.is(t.annotationId)||w.is(t.annotationId))}}(S||(S={})),function(e){e.create=function(e,t){return{textDocument:e,edits:t}},e.is=function(e){var t=e;return le.defined(t)&&A.is(t.textDocument)&&Array.isArray(t.edits)}}(T||(T={})),function(e){e.create=function(e,t,n){var r={kind:"create",uri:e};return void 0===t||void 0===t.overwrite&&void 0===t.ignoreIfExists||(r.options=t),void 0!==n&&(r.annotationId=n),r},e.is=function(e){var t=e;return t&&"create"===t.kind&&le.string(t.uri)&&(void 0===t.options||(void 0===t.options.overwrite||le.boolean(t.options.overwrite))&&(void 0===t.options.ignoreIfExists||le.boolean(t.options.ignoreIfExists)))&&(void 0===t.annotationId||w.is(t.annotationId))}}(C||(C={})),function(e){e.create=function(e,t,n,r){var i={kind:"rename",oldUri:e,newUri:t};return void 0===n||void 0===n.overwrite&&void 0===n.ignoreIfExists||(i.options=n),void 0!==r&&(i.annotationId=r),i},e.is=function(e){var t=e;return t&&"rename"===t.kind&&le.string(t.oldUri)&&le.string(t.newUri)&&(void 0===t.options||(void 0===t.options.overwrite||le.boolean(t.options.overwrite))&&(void 0===t.options.ignoreIfExists||le.boolean(t.options.ignoreIfExists)))&&(void 0===t.annotationId||w.is(t.annotationId))}}(E||(E={})),function(e){e.create=function(e,t,n){var r={kind:"delete",uri:e};return void 0===t||void 0===t.recursive&&void 0===t.ignoreIfNotExists||(r.options=t),void 0!==n&&(r.annotationId=n),r},e.is=function(e){var t=e;return t&&"delete"===t.kind&&le.string(t.uri)&&(void 0===t.options||(void 0===t.options.recursive||le.boolean(t.options.recursive))&&(void 0===t.options.ignoreIfNotExists||le.boolean(t.options.ignoreIfNotExists)))&&(void 0===t.annotationId||w.is(t.annotationId))}}(k||(k={})),function(e){e.is=function(e){var t=e;return t&&(void 0!==t.changes||void 0!==t.documentChanges)&&(void 0===t.documentChanges||t.documentChanges.every((function(e){return le.string(e.kind)?C.is(e)||E.is(e)||k.is(e):T.is(e)})))}}(x||(x={}));var P,O,A,D,M,L,N,F,q,j,I,H,$,W,B,U,K,V,G,z,Q,X,Y,J,Z,ee,te,ne,re,ie,oe=function(){function e(e,t){this.edits=e,this.changeAnnotations=t}return e.prototype.insert=function(e,t,n){var r,i;if(void 0===n?r=b.insert(e,t):w.is(n)?(i=n,r=S.insert(e,t,n)):(this.assertChangeAnnotations(this.changeAnnotations),i=this.changeAnnotations.manage(n),r=S.insert(e,t,i)),this.edits.push(r),void 0!==i)return i},e.prototype.replace=function(e,t,n){var r,i;if(void 0===n?r=b.replace(e,t):w.is(n)?(i=n,r=S.replace(e,t,n)):(this.assertChangeAnnotations(this.changeAnnotations),i=this.changeAnnotations.manage(n),r=S.replace(e,t,i)),this.edits.push(r),void 0!==i)return i},e.prototype.delete=function(e,t){var n,r;if(void 0===t?n=b.del(e):w.is(t)?(r=t,n=S.del(e,t)):(this.assertChangeAnnotations(this.changeAnnotations),r=this.changeAnnotations.manage(t),n=S.del(e,r)),this.edits.push(n),void 0!==r)return r},e.prototype.add=function(e){this.edits.push(e)},e.prototype.all=function(){return this.edits},e.prototype.clear=function(){this.edits.splice(0,this.edits.length)},e.prototype.assertChangeAnnotations=function(e){if(void 0===e)throw new Error("Text edit change is not configured to manage change annotations.")},e}(),se=function(){function e(e){this._annotations=void 0===e?Object.create(null):e,this._counter=0,this._size=0}return e.prototype.all=function(){return this._annotations},Object.defineProperty(e.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0}),e.prototype.manage=function(e,t){var n;if(w.is(e)?n=e:(n=this.nextId(),t=e),void 0!==this._annotations[n])throw new Error("Id "+n+" is already in use.");if(void 0===t)throw new Error("No annotation provided for id "+n);return this._annotations[n]=t,this._size++,n},e.prototype.nextId=function(){return this._counter++,this._counter.toString()},e}(),ae=function(){function e(e){var t=this;this._textEditChanges=Object.create(null),void 0!==e?(this._workspaceEdit=e,e.documentChanges?(this._changeAnnotations=new se(e.changeAnnotations),e.changeAnnotations=this._changeAnnotations.all(),e.documentChanges.forEach((function(e){if(T.is(e)){var n=new oe(e.edits,t._changeAnnotations);t._textEditChanges[e.textDocument.uri]=n}}))):e.changes&&Object.keys(e.changes).forEach((function(n){var r=new oe(e.changes[n]);t._textEditChanges[n]=r}))):this._workspaceEdit={}}return Object.defineProperty(e.prototype,"edit",{get:function(){return this.initDocumentChanges(),void 0!==this._changeAnnotations&&(0===this._changeAnnotations.size?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit},enumerable:!1,configurable:!0}),e.prototype.getTextEditChange=function(e){if(A.is(e)){if(this.initDocumentChanges(),void 0===this._workspaceEdit.documentChanges)throw new Error("Workspace edit is not configured for document changes.");var t={uri:e.uri,version:e.version};if(!(r=this._textEditChanges[t.uri])){var n={textDocument:t,edits:i=[]};this._workspaceEdit.documentChanges.push(n),r=new oe(i,this._changeAnnotations),this._textEditChanges[t.uri]=r}return r}if(this.initChanges(),void 0===this._workspaceEdit.changes)throw new Error("Workspace edit is not configured for normal text edit changes.");var r;if(!(r=this._textEditChanges[e])){var i=[];this._workspaceEdit.changes[e]=i,r=new oe(i),this._textEditChanges[e]=r}return r},e.prototype.initDocumentChanges=function(){void 0===this._workspaceEdit.documentChanges&&void 0===this._workspaceEdit.changes&&(this._changeAnnotations=new se,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all())},e.prototype.initChanges=function(){void 0===this._workspaceEdit.documentChanges&&void 0===this._workspaceEdit.changes&&(this._workspaceEdit.changes=Object.create(null))},e.prototype.createFile=function(e,t,n){if(this.initDocumentChanges(),void 0===this._workspaceEdit.documentChanges)throw new Error("Workspace edit is not configured for document changes.");var r,i,o;if(R.is(t)||w.is(t)?r=t:n=t,void 0===r?i=C.create(e,n):(o=w.is(r)?r:this._changeAnnotations.manage(r),i=C.create(e,n,o)),this._workspaceEdit.documentChanges.push(i),void 0!==o)return o},e.prototype.renameFile=function(e,t,n,r){if(this.initDocumentChanges(),void 0===this._workspaceEdit.documentChanges)throw new Error("Workspace edit is not configured for document changes.");var i,o,s;if(R.is(n)||w.is(n)?i=n:r=n,void 0===i?o=E.create(e,t,r):(s=w.is(i)?i:this._changeAnnotations.manage(i),o=E.create(e,t,r,s)),this._workspaceEdit.documentChanges.push(o),void 0!==s)return s},e.prototype.deleteFile=function(e,t,n){if(this.initDocumentChanges(),void 0===this._workspaceEdit.documentChanges)throw new Error("Workspace edit is not configured for document changes.");var r,i,o;if(R.is(t)||w.is(t)?r=t:n=t,void 0===r?i=k.create(e,n):(o=w.is(r)?r:this._changeAnnotations.manage(r),i=k.create(e,n,o)),this._workspaceEdit.documentChanges.push(i),void 0!==o)return o},e}();!function(e){e.create=function(e){return{uri:e}},e.is=function(e){var t=e;return le.defined(t)&&le.string(t.uri)}}(P||(P={})),function(e){e.create=function(e,t){return{uri:e,version:t}},e.is=function(e){var t=e;return le.defined(t)&&le.string(t.uri)&&le.integer(t.version)}}(O||(O={})),function(e){e.create=function(e,t){return{uri:e,version:t}},e.is=function(e){var t=e;return le.defined(t)&&le.string(t.uri)&&(null===t.version||le.integer(t.version))}}(A||(A={})),function(e){e.create=function(e,t,n,r){return{uri:e,languageId:t,version:n,text:r}},e.is=function(e){var t=e;return le.defined(t)&&le.string(t.uri)&&le.string(t.languageId)&&le.integer(t.version)&&le.string(t.text)}}(D||(D={})),function(e){e.PlainText="plaintext",e.Markdown="markdown"}(M||(M={})),function(e){e.is=function(t){var n=t;return n===e.PlainText||n===e.Markdown}}(M||(M={})),function(e){e.is=function(e){var t=e;return le.objectLiteral(e)&&M.is(t.kind)&&le.string(t.value)}}(L||(L={})),function(e){e.Text=1,e.Method=2,e.Function=3,e.Constructor=4,e.Field=5,e.Variable=6,e.Class=7,e.Interface=8,e.Module=9,e.Property=10,e.Unit=11,e.Value=12,e.Enum=13,e.Keyword=14,e.Snippet=15,e.Color=16,e.File=17,e.Reference=18,e.Folder=19,e.EnumMember=20,e.Constant=21,e.Struct=22,e.Event=23,e.Operator=24,e.TypeParameter=25}(N||(N={})),function(e){e.PlainText=1,e.Snippet=2}(F||(F={})),function(e){e.Deprecated=1}(q||(q={})),function(e){e.create=function(e,t,n){return{newText:e,insert:t,replace:n}},e.is=function(e){var t=e;return t&&le.string(t.newText)&&s.is(t.insert)&&s.is(t.replace)}}(j||(j={})),function(e){e.asIs=1,e.adjustIndentation=2}(I||(I={})),function(e){e.create=function(e){return{label:e}}}(H||(H={})),function(e){e.create=function(e,t){return{items:e||[],isIncomplete:!!t}}}($||($={})),function(e){e.fromPlainText=function(e){return e.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")},e.is=function(e){var t=e;return le.string(t)||le.objectLiteral(t)&&le.string(t.language)&&le.string(t.value)}}(W||(W={})),function(e){e.is=function(e){var t=e;return!!t&&le.objectLiteral(t)&&(L.is(t.contents)||W.is(t.contents)||le.typedArray(t.contents,W.is))&&(void 0===e.range||s.is(e.range))}}(B||(B={})),function(e){e.create=function(e,t){return t?{label:e,documentation:t}:{label:e}}}(U||(U={})),function(e){e.create=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i={label:e};return le.defined(t)&&(i.documentation=t),le.defined(n)?i.parameters=n:i.parameters=[],i}}(K||(K={})),function(e){e.Text=1,e.Read=2,e.Write=3}(V||(V={})),function(e){e.create=function(e,t){var n={range:e};return le.number(t)&&(n.kind=t),n}}(G||(G={})),function(e){e.File=1,e.Module=2,e.Namespace=3,e.Package=4,e.Class=5,e.Method=6,e.Property=7,e.Field=8,e.Constructor=9,e.Enum=10,e.Interface=11,e.Function=12,e.Variable=13,e.Constant=14,e.String=15,e.Number=16,e.Boolean=17,e.Array=18,e.Object=19,e.Key=20,e.Null=21,e.EnumMember=22,e.Struct=23,e.Event=24,e.Operator=25,e.TypeParameter=26}(z||(z={})),function(e){e.Deprecated=1}(Q||(Q={})),function(e){e.create=function(e,t,n,r,i){var o={name:e,kind:t,location:{uri:r,range:n}};return i&&(o.containerName=i),o}}(X||(X={})),function(e){e.create=function(e,t,n,r,i,o){var s={name:e,detail:t,kind:n,range:r,selectionRange:i};return void 0!==o&&(s.children=o),s},e.is=function(e){var t=e;return t&&le.string(t.name)&&le.number(t.kind)&&s.is(t.range)&&s.is(t.selectionRange)&&(void 0===t.detail||le.string(t.detail))&&(void 0===t.deprecated||le.boolean(t.deprecated))&&(void 0===t.children||Array.isArray(t.children))&&(void 0===t.tags||Array.isArray(t.tags))}}(Y||(Y={})),function(e){e.Empty="",e.QuickFix="quickfix",e.Refactor="refactor",e.RefactorExtract="refactor.extract",e.RefactorInline="refactor.inline",e.RefactorRewrite="refactor.rewrite",e.Source="source",e.SourceOrganizeImports="source.organizeImports",e.SourceFixAll="source.fixAll"}(J||(J={})),function(e){e.create=function(e,t){var n={diagnostics:e};return null!=t&&(n.only=t),n},e.is=function(e){var t=e;return le.defined(t)&&le.typedArray(t.diagnostics,v.is)&&(void 0===t.only||le.typedArray(t.only,le.string))}}(Z||(Z={})),function(e){e.create=function(e,t,n){var r={title:e},i=!0;return"string"==typeof t?(i=!1,r.kind=t):_.is(t)?r.command=t:r.edit=t,i&&void 0!==n&&(r.kind=n),r},e.is=function(e){var t=e;return t&&le.string(t.title)&&(void 0===t.diagnostics||le.typedArray(t.diagnostics,v.is))&&(void 0===t.kind||le.string(t.kind))&&(void 0!==t.edit||void 0!==t.command)&&(void 0===t.command||_.is(t.command))&&(void 0===t.isPreferred||le.boolean(t.isPreferred))&&(void 0===t.edit||x.is(t.edit))}}(ee||(ee={})),function(e){e.create=function(e,t){var n={range:e};return le.defined(t)&&(n.data=t),n},e.is=function(e){var t=e;return le.defined(t)&&s.is(t.range)&&(le.undefined(t.command)||_.is(t.command))}}(te||(te={})),function(e){e.create=function(e,t){return{tabSize:e,insertSpaces:t}},e.is=function(e){var t=e;return le.defined(t)&&le.uinteger(t.tabSize)&&le.boolean(t.insertSpaces)}}(ne||(ne={})),function(e){e.create=function(e,t,n){return{range:e,target:t,data:n}},e.is=function(e){var t=e;return le.defined(t)&&s.is(t.range)&&(le.undefined(t.target)||le.string(t.target))}}(re||(re={})),function(e){e.create=function(e,t){return{range:e,parent:t}},e.is=function(t){var n=t;return void 0!==n&&s.is(n.range)&&(void 0===n.parent||e.is(n.parent))}}(ie||(ie={}));var ce,ue=["\n","\r\n","\r"];!function(e){e.create=function(e,t,n,r){return new de(e,t,n,r)},e.is=function(e){var t=e;return!!(le.defined(t)&&le.string(t.uri)&&(le.undefined(t.languageId)||le.string(t.languageId))&&le.uinteger(t.lineCount)&&le.func(t.getText)&&le.func(t.positionAt)&&le.func(t.offsetAt))},e.applyEdits=function(e,t){for(var n=e.getText(),r=function e(t,n){if(t.length<=1)return t;var r=t.length/2|0,i=t.slice(0,r),o=t.slice(r);e(i,n),e(o,n);var s=0,a=0,c=0;for(;s<i.length&&a<o.length;){var u=n(i[s],o[a]);t[c++]=u<=0?i[s++]:o[a++]}for(;s<i.length;)t[c++]=i[s++];for(;a<o.length;)t[c++]=o[a++];return t}(t,(function(e,t){var n=e.range.start.line-t.range.start.line;return 0===n?e.range.start.character-t.range.start.character:n})),i=n.length,o=r.length-1;o>=0;o--){var s=r[o],a=e.offsetAt(s.range.start),c=e.offsetAt(s.range.end);if(!(c<=i))throw new Error("Overlapping edit");n=n.substring(0,a)+s.newText+n.substring(c,n.length),i=a}return n}}(ce||(ce={}));var le,de=function(){function e(e,t,n,r){this._uri=e,this._languageId=t,this._version=n,this._content=r,this._lineOffsets=void 0}return Object.defineProperty(e.prototype,"uri",{get:function(){return this._uri},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"languageId",{get:function(){return this._languageId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),e.prototype.getText=function(e){if(e){var t=this.offsetAt(e.start),n=this.offsetAt(e.end);return this._content.substring(t,n)}return this._content},e.prototype.update=function(e,t){this._content=e.text,this._version=t,this._lineOffsets=void 0},e.prototype.getLineOffsets=function(){if(void 0===this._lineOffsets){for(var e=[],t=this._content,n=!0,r=0;r<t.length;r++){n&&(e.push(r),n=!1);var i=t.charAt(r);n="\r"===i||"\n"===i,"\r"===i&&r+1<t.length&&"\n"===t.charAt(r+1)&&r++}n&&t.length>0&&e.push(t.length),this._lineOffsets=e}return this._lineOffsets},e.prototype.positionAt=function(e){e=Math.max(Math.min(e,this._content.length),0);var t=this.getLineOffsets(),n=0,r=t.length;if(0===r)return o.create(0,e);for(;n<r;){var i=Math.floor((n+r)/2);t[i]>e?r=i:n=i+1}var s=n-1;return o.create(s,e-t[s])},e.prototype.offsetAt=function(e){var t=this.getLineOffsets();if(e.line>=t.length)return this._content.length;if(e.line<0)return 0;var n=t[e.line],r=e.line+1<t.length?t[e.line+1]:this._content.length;return Math.max(Math.min(n+e.character,r),n)},Object.defineProperty(e.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!1,configurable:!0}),e}();!function(e){var t=Object.prototype.toString;e.defined=function(e){return void 0!==e},e.undefined=function(e){return void 0===e},e.boolean=function(e){return!0===e||!1===e},e.string=function(e){return"[object String]"===t.call(e)},e.number=function(e){return"[object Number]"===t.call(e)},e.numberRange=function(e,n,r){return"[object Number]"===t.call(e)&&n<=e&&e<=r},e.integer=function(e){return"[object Number]"===t.call(e)&&-2147483648<=e&&e<=2147483647},e.uinteger=function(e){return"[object Number]"===t.call(e)&&0<=e&&e<=2147483647},e.func=function(e){return"[object Function]"===t.call(e)},e.objectLiteral=function(e){return null!==e&&"object"==typeof e},e.typedArray=function(e,t){return Array.isArray(e)&&e.every(t)}}(le||(le={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DocumentLinkRequest=t.CodeLensRefreshRequest=t.CodeLensResolveRequest=t.CodeLensRequest=t.WorkspaceSymbolRequest=t.CodeActionResolveRequest=t.CodeActionRequest=t.DocumentSymbolRequest=t.DocumentHighlightRequest=t.ReferencesRequest=t.DefinitionRequest=t.SignatureHelpRequest=t.SignatureHelpTriggerKind=t.HoverRequest=t.CompletionResolveRequest=t.CompletionRequest=t.CompletionTriggerKind=t.PublishDiagnosticsNotification=t.WatchKind=t.FileChangeType=t.DidChangeWatchedFilesNotification=t.WillSaveTextDocumentWaitUntilRequest=t.WillSaveTextDocumentNotification=t.TextDocumentSaveReason=t.DidSaveTextDocumentNotification=t.DidCloseTextDocumentNotification=t.DidChangeTextDocumentNotification=t.TextDocumentContentChangeEvent=t.DidOpenTextDocumentNotification=t.TextDocumentSyncKind=t.TelemetryEventNotification=t.LogMessageNotification=t.ShowMessageRequest=t.ShowMessageNotification=t.MessageType=t.DidChangeConfigurationNotification=t.ExitNotification=t.ShutdownRequest=t.InitializedNotification=t.InitializeError=t.InitializeRequest=t.WorkDoneProgressOptions=t.TextDocumentRegistrationOptions=t.StaticRegistrationOptions=t.FailureHandlingKind=t.ResourceOperationKind=t.UnregistrationRequest=t.RegistrationRequest=t.DocumentSelector=t.DocumentFilter=void 0,t.MonikerRequest=t.MonikerKind=t.UniquenessLevel=t.WillDeleteFilesRequest=t.DidDeleteFilesNotification=t.WillRenameFilesRequest=t.DidRenameFilesNotification=t.WillCreateFilesRequest=t.DidCreateFilesNotification=t.FileOperationPatternKind=t.LinkedEditingRangeRequest=t.ShowDocumentRequest=t.SemanticTokensRegistrationType=t.SemanticTokensRefreshRequest=t.SemanticTokensRangeRequest=t.SemanticTokensDeltaRequest=t.SemanticTokensRequest=t.TokenFormat=t.SemanticTokens=t.SemanticTokenModifiers=t.SemanticTokenTypes=t.CallHierarchyPrepareRequest=t.CallHierarchyOutgoingCallsRequest=t.CallHierarchyIncomingCallsRequest=t.WorkDoneProgressCancelNotification=t.WorkDoneProgressCreateRequest=t.WorkDoneProgress=t.SelectionRangeRequest=t.DeclarationRequest=t.FoldingRangeRequest=t.ColorPresentationRequest=t.DocumentColorRequest=t.ConfigurationRequest=t.DidChangeWorkspaceFoldersNotification=t.WorkspaceFoldersRequest=t.TypeDefinitionRequest=t.ImplementationRequest=t.ApplyWorkspaceEditRequest=t.ExecuteCommandRequest=t.PrepareRenameRequest=t.RenameRequest=t.PrepareSupportDefaultBehavior=t.DocumentOnTypeFormattingRequest=t.DocumentRangeFormattingRequest=t.DocumentFormattingRequest=t.DocumentLinkResolveRequest=void 0;const r=n(127),i=n(2),o=n(128);Object.defineProperty(t,"ImplementationRequest",{enumerable:!0,get:function(){return o.ImplementationRequest}});const s=n(129);Object.defineProperty(t,"TypeDefinitionRequest",{enumerable:!0,get:function(){return s.TypeDefinitionRequest}});const a=n(130);Object.defineProperty(t,"WorkspaceFoldersRequest",{enumerable:!0,get:function(){return a.WorkspaceFoldersRequest}}),Object.defineProperty(t,"DidChangeWorkspaceFoldersNotification",{enumerable:!0,get:function(){return a.DidChangeWorkspaceFoldersNotification}});const c=n(131);Object.defineProperty(t,"ConfigurationRequest",{enumerable:!0,get:function(){return c.ConfigurationRequest}});const u=n(132);Object.defineProperty(t,"DocumentColorRequest",{enumerable:!0,get:function(){return u.DocumentColorRequest}}),Object.defineProperty(t,"ColorPresentationRequest",{enumerable:!0,get:function(){return u.ColorPresentationRequest}});const l=n(133);Object.defineProperty(t,"FoldingRangeRequest",{enumerable:!0,get:function(){return l.FoldingRangeRequest}});const d=n(134);Object.defineProperty(t,"DeclarationRequest",{enumerable:!0,get:function(){return d.DeclarationRequest}});const f=n(135);Object.defineProperty(t,"SelectionRangeRequest",{enumerable:!0,get:function(){return f.SelectionRangeRequest}});const h=n(136);Object.defineProperty(t,"WorkDoneProgress",{enumerable:!0,get:function(){return h.WorkDoneProgress}}),Object.defineProperty(t,"WorkDoneProgressCreateRequest",{enumerable:!0,get:function(){return h.WorkDoneProgressCreateRequest}}),Object.defineProperty(t,"WorkDoneProgressCancelNotification",{enumerable:!0,get:function(){return h.WorkDoneProgressCancelNotification}});const p=n(137);Object.defineProperty(t,"CallHierarchyIncomingCallsRequest",{enumerable:!0,get:function(){return p.CallHierarchyIncomingCallsRequest}}),Object.defineProperty(t,"CallHierarchyOutgoingCallsRequest",{enumerable:!0,get:function(){return p.CallHierarchyOutgoingCallsRequest}}),Object.defineProperty(t,"CallHierarchyPrepareRequest",{enumerable:!0,get:function(){return p.CallHierarchyPrepareRequest}});const m=n(138);Object.defineProperty(t,"SemanticTokenTypes",{enumerable:!0,get:function(){return m.SemanticTokenTypes}}),Object.defineProperty(t,"SemanticTokenModifiers",{enumerable:!0,get:function(){return m.SemanticTokenModifiers}}),Object.defineProperty(t,"SemanticTokens",{enumerable:!0,get:function(){return m.SemanticTokens}}),Object.defineProperty(t,"TokenFormat",{enumerable:!0,get:function(){return m.TokenFormat}}),Object.defineProperty(t,"SemanticTokensRequest",{enumerable:!0,get:function(){return m.SemanticTokensRequest}}),Object.defineProperty(t,"SemanticTokensDeltaRequest",{enumerable:!0,get:function(){return m.SemanticTokensDeltaRequest}}),Object.defineProperty(t,"SemanticTokensRangeRequest",{enumerable:!0,get:function(){return m.SemanticTokensRangeRequest}}),Object.defineProperty(t,"SemanticTokensRefreshRequest",{enumerable:!0,get:function(){return m.SemanticTokensRefreshRequest}}),Object.defineProperty(t,"SemanticTokensRegistrationType",{enumerable:!0,get:function(){return m.SemanticTokensRegistrationType}});const g=n(139);Object.defineProperty(t,"ShowDocumentRequest",{enumerable:!0,get:function(){return g.ShowDocumentRequest}});const y=n(140);Object.defineProperty(t,"LinkedEditingRangeRequest",{enumerable:!0,get:function(){return y.LinkedEditingRangeRequest}});const v=n(141);Object.defineProperty(t,"FileOperationPatternKind",{enumerable:!0,get:function(){return v.FileOperationPatternKind}}),Object.defineProperty(t,"DidCreateFilesNotification",{enumerable:!0,get:function(){return v.DidCreateFilesNotification}}),Object.defineProperty(t,"WillCreateFilesRequest",{enumerable:!0,get:function(){return v.WillCreateFilesRequest}}),Object.defineProperty(t,"DidRenameFilesNotification",{enumerable:!0,get:function(){return v.DidRenameFilesNotification}}),Object.defineProperty(t,"WillRenameFilesRequest",{enumerable:!0,get:function(){return v.WillRenameFilesRequest}}),Object.defineProperty(t,"DidDeleteFilesNotification",{enumerable:!0,get:function(){return v.DidDeleteFilesNotification}}),Object.defineProperty(t,"WillDeleteFilesRequest",{enumerable:!0,get:function(){return v.WillDeleteFilesRequest}});const _=n(142);var b,R;Object.defineProperty(t,"UniquenessLevel",{enumerable:!0,get:function(){return _.UniquenessLevel}}),Object.defineProperty(t,"MonikerKind",{enumerable:!0,get:function(){return _.MonikerKind}}),Object.defineProperty(t,"MonikerRequest",{enumerable:!0,get:function(){return _.MonikerRequest}}),function(e){e.is=function(e){const t=e;return r.string(t.language)||r.string(t.scheme)||r.string(t.pattern)}}(b=t.DocumentFilter||(t.DocumentFilter={})),function(e){e.is=function(e){if(!Array.isArray(e))return!1;for(let t of e)if(!r.string(t)&&!b.is(t))return!1;return!0}}(R=t.DocumentSelector||(t.DocumentSelector={})),function(e){e.type=new i.ProtocolRequestType("client/registerCapability")}(t.RegistrationRequest||(t.RegistrationRequest={})),function(e){e.type=new i.ProtocolRequestType("client/unregisterCapability")}(t.UnregistrationRequest||(t.UnregistrationRequest={})),function(e){e.Create="create",e.Rename="rename",e.Delete="delete"}(t.ResourceOperationKind||(t.ResourceOperationKind={})),function(e){e.Abort="abort",e.Transactional="transactional",e.TextOnlyTransactional="textOnlyTransactional",e.Undo="undo"}(t.FailureHandlingKind||(t.FailureHandlingKind={})),function(e){e.hasId=function(e){const t=e;return t&&r.string(t.id)&&t.id.length>0}}(t.StaticRegistrationOptions||(t.StaticRegistrationOptions={})),function(e){e.is=function(e){const t=e;return t&&(null===t.documentSelector||R.is(t.documentSelector))}}(t.TextDocumentRegistrationOptions||(t.TextDocumentRegistrationOptions={})),function(e){e.is=function(e){const t=e;return r.objectLiteral(t)&&(void 0===t.workDoneProgress||r.boolean(t.workDoneProgress))},e.hasWorkDoneProgress=function(e){const t=e;return t&&r.boolean(t.workDoneProgress)}}(t.WorkDoneProgressOptions||(t.WorkDoneProgressOptions={})),function(e){e.type=new i.ProtocolRequestType("initialize")}(t.InitializeRequest||(t.InitializeRequest={})),function(e){e.unknownProtocolVersion=1}(t.InitializeError||(t.InitializeError={})),function(e){e.type=new i.ProtocolNotificationType("initialized")}(t.InitializedNotification||(t.InitializedNotification={})),function(e){e.type=new i.ProtocolRequestType0("shutdown")}(t.ShutdownRequest||(t.ShutdownRequest={})),function(e){e.type=new i.ProtocolNotificationType0("exit")}(t.ExitNotification||(t.ExitNotification={})),function(e){e.type=new i.ProtocolNotificationType("workspace/didChangeConfiguration")}(t.DidChangeConfigurationNotification||(t.DidChangeConfigurationNotification={})),function(e){e.Error=1,e.Warning=2,e.Info=3,e.Log=4}(t.MessageType||(t.MessageType={})),function(e){e.type=new i.ProtocolNotificationType("window/showMessage")}(t.ShowMessageNotification||(t.ShowMessageNotification={})),function(e){e.type=new i.ProtocolRequestType("window/showMessageRequest")}(t.ShowMessageRequest||(t.ShowMessageRequest={})),function(e){e.type=new i.ProtocolNotificationType("window/logMessage")}(t.LogMessageNotification||(t.LogMessageNotification={})),function(e){e.type=new i.ProtocolNotificationType("telemetry/event")}(t.TelemetryEventNotification||(t.TelemetryEventNotification={})),function(e){e.None=0,e.Full=1,e.Incremental=2}(t.TextDocumentSyncKind||(t.TextDocumentSyncKind={})),function(e){e.method="textDocument/didOpen",e.type=new i.ProtocolNotificationType(e.method)}(t.DidOpenTextDocumentNotification||(t.DidOpenTextDocumentNotification={})),function(e){e.isIncremental=function(e){let t=e;return null!=t&&"string"==typeof t.text&&void 0!==t.range&&(void 0===t.rangeLength||"number"==typeof t.rangeLength)},e.isFull=function(e){let t=e;return null!=t&&"string"==typeof t.text&&void 0===t.range&&void 0===t.rangeLength}}(t.TextDocumentContentChangeEvent||(t.TextDocumentContentChangeEvent={})),function(e){e.method="textDocument/didChange",e.type=new i.ProtocolNotificationType(e.method)}(t.DidChangeTextDocumentNotification||(t.DidChangeTextDocumentNotification={})),function(e){e.method="textDocument/didClose",e.type=new i.ProtocolNotificationType(e.method)}(t.DidCloseTextDocumentNotification||(t.DidCloseTextDocumentNotification={})),function(e){e.method="textDocument/didSave",e.type=new i.ProtocolNotificationType(e.method)}(t.DidSaveTextDocumentNotification||(t.DidSaveTextDocumentNotification={})),function(e){e.Manual=1,e.AfterDelay=2,e.FocusOut=3}(t.TextDocumentSaveReason||(t.TextDocumentSaveReason={})),function(e){e.method="textDocument/willSave",e.type=new i.ProtocolNotificationType(e.method)}(t.WillSaveTextDocumentNotification||(t.WillSaveTextDocumentNotification={})),function(e){e.method="textDocument/willSaveWaitUntil",e.type=new i.ProtocolRequestType(e.method)}(t.WillSaveTextDocumentWaitUntilRequest||(t.WillSaveTextDocumentWaitUntilRequest={})),function(e){e.type=new i.ProtocolNotificationType("workspace/didChangeWatchedFiles")}(t.DidChangeWatchedFilesNotification||(t.DidChangeWatchedFilesNotification={})),function(e){e.Created=1,e.Changed=2,e.Deleted=3}(t.FileChangeType||(t.FileChangeType={})),function(e){e.Create=1,e.Change=2,e.Delete=4}(t.WatchKind||(t.WatchKind={})),function(e){e.type=new i.ProtocolNotificationType("textDocument/publishDiagnostics")}(t.PublishDiagnosticsNotification||(t.PublishDiagnosticsNotification={})),function(e){e.Invoked=1,e.TriggerCharacter=2,e.TriggerForIncompleteCompletions=3}(t.CompletionTriggerKind||(t.CompletionTriggerKind={})),function(e){e.method="textDocument/completion",e.type=new i.ProtocolRequestType(e.method)}(t.CompletionRequest||(t.CompletionRequest={})),function(e){e.method="completionItem/resolve",e.type=new i.ProtocolRequestType(e.method)}(t.CompletionResolveRequest||(t.CompletionResolveRequest={})),function(e){e.method="textDocument/hover",e.type=new i.ProtocolRequestType(e.method)}(t.HoverRequest||(t.HoverRequest={})),function(e){e.Invoked=1,e.TriggerCharacter=2,e.ContentChange=3}(t.SignatureHelpTriggerKind||(t.SignatureHelpTriggerKind={})),function(e){e.method="textDocument/signatureHelp",e.type=new i.ProtocolRequestType(e.method)}(t.SignatureHelpRequest||(t.SignatureHelpRequest={})),function(e){e.method="textDocument/definition",e.type=new i.ProtocolRequestType(e.method)}(t.DefinitionRequest||(t.DefinitionRequest={})),function(e){e.method="textDocument/references",e.type=new i.ProtocolRequestType(e.method)}(t.ReferencesRequest||(t.ReferencesRequest={})),function(e){e.method="textDocument/documentHighlight",e.type=new i.ProtocolRequestType(e.method)}(t.DocumentHighlightRequest||(t.DocumentHighlightRequest={})),function(e){e.method="textDocument/documentSymbol",e.type=new i.ProtocolRequestType(e.method)}(t.DocumentSymbolRequest||(t.DocumentSymbolRequest={})),function(e){e.method="textDocument/codeAction",e.type=new i.ProtocolRequestType(e.method)}(t.CodeActionRequest||(t.CodeActionRequest={})),function(e){e.method="codeAction/resolve",e.type=new i.ProtocolRequestType(e.method)}(t.CodeActionResolveRequest||(t.CodeActionResolveRequest={})),function(e){e.method="workspace/symbol",e.type=new i.ProtocolRequestType(e.method)}(t.WorkspaceSymbolRequest||(t.WorkspaceSymbolRequest={})),function(e){e.method="textDocument/codeLens",e.type=new i.ProtocolRequestType(e.method)}(t.CodeLensRequest||(t.CodeLensRequest={})),function(e){e.method="codeLens/resolve",e.type=new i.ProtocolRequestType(e.method)}(t.CodeLensResolveRequest||(t.CodeLensResolveRequest={})),function(e){e.method="workspace/codeLens/refresh",e.type=new i.ProtocolRequestType0(e.method)}(t.CodeLensRefreshRequest||(t.CodeLensRefreshRequest={})),function(e){e.method="textDocument/documentLink",e.type=new i.ProtocolRequestType(e.method)}(t.DocumentLinkRequest||(t.DocumentLinkRequest={})),function(e){e.method="documentLink/resolve",e.type=new i.ProtocolRequestType(e.method)}(t.DocumentLinkResolveRequest||(t.DocumentLinkResolveRequest={})),function(e){e.method="textDocument/formatting",e.type=new i.ProtocolRequestType(e.method)}(t.DocumentFormattingRequest||(t.DocumentFormattingRequest={})),function(e){e.method="textDocument/rangeFormatting",e.type=new i.ProtocolRequestType(e.method)}(t.DocumentRangeFormattingRequest||(t.DocumentRangeFormattingRequest={})),function(e){e.method="textDocument/onTypeFormatting",e.type=new i.ProtocolRequestType(e.method)}(t.DocumentOnTypeFormattingRequest||(t.DocumentOnTypeFormattingRequest={})),function(e){e.Identifier=1}(t.PrepareSupportDefaultBehavior||(t.PrepareSupportDefaultBehavior={})),function(e){e.method="textDocument/rename",e.type=new i.ProtocolRequestType(e.method)}(t.RenameRequest||(t.RenameRequest={})),function(e){e.method="textDocument/prepareRename",e.type=new i.ProtocolRequestType(e.method)}(t.PrepareRenameRequest||(t.PrepareRenameRequest={})),function(e){e.type=new i.ProtocolRequestType("workspace/executeCommand")}(t.ExecuteCommandRequest||(t.ExecuteCommandRequest={})),function(e){e.type=new i.ProtocolRequestType("workspace/applyEdit")}(t.ApplyWorkspaceEditRequest||(t.ApplyWorkspaceEditRequest={}))},function(e,t,n){"use strict";function r(e){return"string"==typeof e||e instanceof String}function i(e){return Array.isArray(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.objectLiteral=t.typedArray=t.stringArray=t.array=t.func=t.error=t.number=t.string=t.boolean=void 0,t.boolean=function(e){return!0===e||!1===e},t.string=r,t.number=function(e){return"number"==typeof e||e instanceof Number},t.error=function(e){return e instanceof Error},t.func=function(e){return"function"==typeof e},t.array=i,t.stringArray=function(e){return i(e)&&e.every(e=>r(e))},t.typedArray=function(e,t){return Array.isArray(e)&&e.every(t)},t.objectLiteral=function(e){return null!==e&&"object"==typeof e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ImplementationRequest=void 0;const r=n(2);!function(e){e.method="textDocument/implementation",e.type=new r.ProtocolRequestType(e.method)}(t.ImplementationRequest||(t.ImplementationRequest={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TypeDefinitionRequest=void 0;const r=n(2);!function(e){e.method="textDocument/typeDefinition",e.type=new r.ProtocolRequestType(e.method)}(t.TypeDefinitionRequest||(t.TypeDefinitionRequest={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DidChangeWorkspaceFoldersNotification=t.WorkspaceFoldersRequest=void 0;const r=n(2);!function(e){e.type=new r.ProtocolRequestType0("workspace/workspaceFolders")}(t.WorkspaceFoldersRequest||(t.WorkspaceFoldersRequest={})),function(e){e.type=new r.ProtocolNotificationType("workspace/didChangeWorkspaceFolders")}(t.DidChangeWorkspaceFoldersNotification||(t.DidChangeWorkspaceFoldersNotification={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConfigurationRequest=void 0;const r=n(2);!function(e){e.type=new r.ProtocolRequestType("workspace/configuration")}(t.ConfigurationRequest||(t.ConfigurationRequest={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ColorPresentationRequest=t.DocumentColorRequest=void 0;const r=n(2);!function(e){e.method="textDocument/documentColor",e.type=new r.ProtocolRequestType(e.method)}(t.DocumentColorRequest||(t.DocumentColorRequest={})),function(e){e.type=new r.ProtocolRequestType("textDocument/colorPresentation")}(t.ColorPresentationRequest||(t.ColorPresentationRequest={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FoldingRangeRequest=t.FoldingRangeKind=void 0;const r=n(2);!function(e){e.Comment="comment",e.Imports="imports",e.Region="region"}(t.FoldingRangeKind||(t.FoldingRangeKind={})),function(e){e.method="textDocument/foldingRange",e.type=new r.ProtocolRequestType(e.method)}(t.FoldingRangeRequest||(t.FoldingRangeRequest={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DeclarationRequest=void 0;const r=n(2);!function(e){e.method="textDocument/declaration",e.type=new r.ProtocolRequestType(e.method)}(t.DeclarationRequest||(t.DeclarationRequest={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SelectionRangeRequest=void 0;const r=n(2);!function(e){e.method="textDocument/selectionRange",e.type=new r.ProtocolRequestType(e.method)}(t.SelectionRangeRequest||(t.SelectionRangeRequest={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WorkDoneProgressCancelNotification=t.WorkDoneProgressCreateRequest=t.WorkDoneProgress=void 0;const r=n(15),i=n(2);!function(e){e.type=new r.ProgressType,e.is=function(t){return t===e.type}}(t.WorkDoneProgress||(t.WorkDoneProgress={})),function(e){e.type=new i.ProtocolRequestType("window/workDoneProgress/create")}(t.WorkDoneProgressCreateRequest||(t.WorkDoneProgressCreateRequest={})),function(e){e.type=new i.ProtocolNotificationType("window/workDoneProgress/cancel")}(t.WorkDoneProgressCancelNotification||(t.WorkDoneProgressCancelNotification={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CallHierarchyOutgoingCallsRequest=t.CallHierarchyIncomingCallsRequest=t.CallHierarchyPrepareRequest=void 0;const r=n(2);!function(e){e.method="textDocument/prepareCallHierarchy",e.type=new r.ProtocolRequestType(e.method)}(t.CallHierarchyPrepareRequest||(t.CallHierarchyPrepareRequest={})),function(e){e.method="callHierarchy/incomingCalls",e.type=new r.ProtocolRequestType(e.method)}(t.CallHierarchyIncomingCallsRequest||(t.CallHierarchyIncomingCallsRequest={})),function(e){e.method="callHierarchy/outgoingCalls",e.type=new r.ProtocolRequestType(e.method)}(t.CallHierarchyOutgoingCallsRequest||(t.CallHierarchyOutgoingCallsRequest={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SemanticTokensRefreshRequest=t.SemanticTokensRangeRequest=t.SemanticTokensDeltaRequest=t.SemanticTokensRequest=t.SemanticTokensRegistrationType=t.TokenFormat=t.SemanticTokens=t.SemanticTokenModifiers=t.SemanticTokenTypes=void 0;const r=n(2);!function(e){e.namespace="namespace",e.type="type",e.class="class",e.enum="enum",e.interface="interface",e.struct="struct",e.typeParameter="typeParameter",e.parameter="parameter",e.variable="variable",e.property="property",e.enumMember="enumMember",e.event="event",e.function="function",e.method="method",e.macro="macro",e.keyword="keyword",e.modifier="modifier",e.comment="comment",e.string="string",e.number="number",e.regexp="regexp",e.operator="operator"}(t.SemanticTokenTypes||(t.SemanticTokenTypes={})),function(e){e.declaration="declaration",e.definition="definition",e.readonly="readonly",e.static="static",e.deprecated="deprecated",e.abstract="abstract",e.async="async",e.modification="modification",e.documentation="documentation",e.defaultLibrary="defaultLibrary"}(t.SemanticTokenModifiers||(t.SemanticTokenModifiers={})),function(e){e.is=function(e){const t=e;return void 0!==t&&(void 0===t.resultId||"string"==typeof t.resultId)&&Array.isArray(t.data)&&(0===t.data.length||"number"==typeof t.data[0])}}(t.SemanticTokens||(t.SemanticTokens={})),function(e){e.Relative="relative"}(t.TokenFormat||(t.TokenFormat={})),function(e){e.method="textDocument/semanticTokens",e.type=new r.RegistrationType(e.method)}(t.SemanticTokensRegistrationType||(t.SemanticTokensRegistrationType={})),function(e){e.method="textDocument/semanticTokens/full",e.type=new r.ProtocolRequestType(e.method)}(t.SemanticTokensRequest||(t.SemanticTokensRequest={})),function(e){e.method="textDocument/semanticTokens/full/delta",e.type=new r.ProtocolRequestType(e.method)}(t.SemanticTokensDeltaRequest||(t.SemanticTokensDeltaRequest={})),function(e){e.method="textDocument/semanticTokens/range",e.type=new r.ProtocolRequestType(e.method)}(t.SemanticTokensRangeRequest||(t.SemanticTokensRangeRequest={})),function(e){e.method="workspace/semanticTokens/refresh",e.type=new r.ProtocolRequestType0(e.method)}(t.SemanticTokensRefreshRequest||(t.SemanticTokensRefreshRequest={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ShowDocumentRequest=void 0;const r=n(2);!function(e){e.method="window/showDocument",e.type=new r.ProtocolRequestType(e.method)}(t.ShowDocumentRequest||(t.ShowDocumentRequest={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LinkedEditingRangeRequest=void 0;const r=n(2);!function(e){e.method="textDocument/linkedEditingRange",e.type=new r.ProtocolRequestType(e.method)}(t.LinkedEditingRangeRequest||(t.LinkedEditingRangeRequest={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WillDeleteFilesRequest=t.DidDeleteFilesNotification=t.DidRenameFilesNotification=t.WillRenameFilesRequest=t.DidCreateFilesNotification=t.WillCreateFilesRequest=t.FileOperationPatternKind=void 0;const r=n(2);!function(e){e.file="file",e.folder="folder"}(t.FileOperationPatternKind||(t.FileOperationPatternKind={})),function(e){e.method="workspace/willCreateFiles",e.type=new r.ProtocolRequestType(e.method)}(t.WillCreateFilesRequest||(t.WillCreateFilesRequest={})),function(e){e.method="workspace/didCreateFiles",e.type=new r.ProtocolNotificationType(e.method)}(t.DidCreateFilesNotification||(t.DidCreateFilesNotification={})),function(e){e.method="workspace/willRenameFiles",e.type=new r.ProtocolRequestType(e.method)}(t.WillRenameFilesRequest||(t.WillRenameFilesRequest={})),function(e){e.method="workspace/didRenameFiles",e.type=new r.ProtocolNotificationType(e.method)}(t.DidRenameFilesNotification||(t.DidRenameFilesNotification={})),function(e){e.method="workspace/didDeleteFiles",e.type=new r.ProtocolNotificationType(e.method)}(t.DidDeleteFilesNotification||(t.DidDeleteFilesNotification={})),function(e){e.method="workspace/willDeleteFiles",e.type=new r.ProtocolRequestType(e.method)}(t.WillDeleteFilesRequest||(t.WillDeleteFilesRequest={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MonikerRequest=t.MonikerKind=t.UniquenessLevel=void 0;const r=n(2);!function(e){e.document="document",e.project="project",e.group="group",e.scheme="scheme",e.global="global"}(t.UniquenessLevel||(t.UniquenessLevel={})),function(e){e.import="import",e.export="export",e.local="local"}(t.MonikerKind||(t.MonikerKind={})),function(e){e.method="textDocument/moniker",e.type=new r.ProtocolRequestType(e.method)}(t.MonikerRequest||(t.MonikerRequest={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createProtocolConnection=void 0;const r=n(15);t.createProtocolConnection=function(e,t,n,i){return r.ConnectionStrategy.is(i)&&(i={connectionStrategy:i}),r.createMessageConnection(e,t,n,i)}},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.pubUpdateProvider=void 0;const i=n(0),o=n(12),s=n(4).logger.getlog("Pub provider");t.pubUpdateProvider=()=>i.workspace.onDidSaveTextDocument(e=>r(void 0,void 0,void 0,(function*(){if(e.uri&&e.uri.endsWith("pubspec.yaml")){if(!(yield o.getFlutterWorkspaceFolder()))return void s("Flutter project not found!");i.commands.executeCommand("flutter.pub.get")}})))},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.LspServer=void 0;const i=n(0),o=n(6),s=n(10),a=n(44),c=n(1),u=n(4),l=n(146),d=n(147),f=n(148),h=n(149),p=n(151),m=n(152),g=u.logger.getlog("lsp-server");class y{get command(){return s.flutterSDK.dartCommand}get args(){return[s.flutterSDK.analyzerSnapshotPath,"--lsp"]}}class v extends c.Dispose{constructor(){super(),this.execOptions=new y,this.init()}get client(){return this._client}init(){return r(this,void 0,void 0,(function*(){this.outchannel=i.window.createOutputChannel("flutter-lsp"),this.push(this.outchannel);const e=i.workspace.getConfiguration("flutter"),t=e.get("lsp.debug");if(s.flutterSDK.state||(yield s.flutterSDK.init(e)),!s.flutterSDK.state)return void g("flutter SDK not found!");const n={run:this.execOptions,debug:this.execOptions},r=e.get("lsp.initialization",{onlyAnalyzeProjectsWithOpenFiles:!0,suggestFromUnimportedLibraries:!0,closingLabels:!0,outline:!0}),c=yield s.flutterSDK.isVersionGreatOrEqualTo([2,6,0]);g("rightVersion "+c);const u={disableDynamicRegister:!c,documentSelector:[{scheme:"file",language:"dart"}],initializationOptions:r,outputChannel:this.outchannel,revealOutputChannelOn:i.RevealOutputChannelOn.Never,middleware:{provideCompletionItem:e.get("provider.enableSnippet",!0)?h.completionProvider:void 0,provideCodeActions:f.codeActionProvider,executeCommand:p.executeCommandProvider,workspace:{didChangeWorkspaceFolders(t,n){if(t.added.length&&""!==s.flutterSDK.sdkHome){const n=e.get("workspaceFolder.ignore",[]).concat(s.flutterSDK.sdkHome).map(e=>(e=e.replace(/^(~|\$HOME)/,o.homedir()),i.Uri.file(e).toString()));t.added=t.added.filter(e=>!n.some(t=>e.uri.startsWith(t)))}(t.added.length||t.removed.length)&&n(t)}}}},y=new i.LanguageClient("flutter","flutter analysis server",n,u,t);this._client=y,a.statusBar.isInitialized||(a.statusBar.init(),this.push(a.statusBar)),y.onReady().then(()=>{g("analysis server ready!"),r.closingLabels&&this.push(new l.ClosingLabels(y)),this.push(new d.Outline(y)),r.closingLabels&&this.push(new l.ClosingLabels(y)),setTimeout(()=>{this.push(new m.SignatureHelpProvider(y))},2e3),a.statusBar.ready()}).catch(e=>{a.statusBar.hide(),g(e.message||"start analysis server fail!"),g(e.stack)}),this.push(i.services.registLanguageClient(y))}))}reloadSdk(){return r(this,void 0,void 0,(function*(){const e=i.workspace.getConfiguration("flutter");yield s.flutterSDK.init(e)}))}restart(){var e,t,n;return r(this,void 0,void 0,(function*(){a.statusBar.restartingLsp(),yield this.reloadSdk(),yield null===(e=this._client)||void 0===e?void 0:e.stop(),null===(t=this._client)||void 0===t||t.onReady().then(()=>{a.statusBar.ready()}),null===(n=this._client)||void 0===n||n.start()}))}}t.LspServer=v},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ClosingLabels=void 0;const i=n(0),o=n(1),s=n(4).logger.getlog("lsp-closing-labels");class a extends o.Dispose{constructor(e){super(),this.nsIds={},this.onClosingLabels=e=>r(this,void 0,void 0,(function*(){const{uri:t,labels:n}=e;if(!n.length)return;const r=i.workspace.getDocument(t);if(!r)return;const{nvim:o}=i.workspace,{buffer:s}=r;void 0!==this.nsIds[t]&&s.clearNamespace(this.nsIds[t],1,-1),this.nsIds[t]=yield o.createNamespace("flutter-closing-lablel"),o.pauseNotification();for(const e of n)s.setVirtualText(this.nsIds[t],e.range.end.line,[["// "+e.label,"FlutterClosingLabel"]]);yield o.resumeNotification()})),this.init(e),s("register closing labels")}init(e){return r(this,void 0,void 0,(function*(){const{nvim:t}=i.workspace;t.hasFunction("nvim_buf_set_virtual_text")&&(yield t.command("highlight default link FlutterClosingLabel Comment"),e.onNotification("dart/textDocument/publishClosingLabels",this.onClosingLabels))}))}dispose(){super.dispose();const e=Object.keys(this.nsIds);e.length&&e.forEach(e=>{const t=i.workspace.getDocument(e);t&&t.buffer.clearNamespace(this.nsIds[e],1,-1)})}}t.ClosingLabels=a},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Outline=void 0;const i=n(0),o=n(44),s=n(5),a=n(1),c={TOP_LEVEL_VARIABLE:" ",CLASS:" ",FIELD:"",CONSTRUCTOR:" ",CONSTRUCTOR_INVOCATION:" ",FUNCTION:" ",METHOD:" ",GETTER:"",ENUM:" ",ENUM_CONSTANT:" "};function u(e){return encodeURIComponent(e).replace(/%([0-9A-F]{2})/gi,(function(e,t){const n=parseInt(t,16);return String.fromCharCode(n)}))}class l extends a.Dispose{constructor(e){super(),this.outlines={},this.outlineStrings={},this.outlinePanelData={},this.outlineVersions={},this.outlineVersions_Rendered={},this.renderedOutlineUri="",this.highlightIds=[],this.outlineWidth=30,this.curUri="",this.iconSpacing="",this.generateOutlineStrings=e=>{const t=this.outlines[e],n=[],r=[],i=this.iconSpacing;function o(e,t){let s=t,a="  ",l=c[e.element.kind];void 0===l&&(l=" "),Array.isArray(e.children)&&e.children.length>0&&e.folded;const d=`${s} ${l}${i}${e.element.name}: ${e.codeRange.start.line+1}`;e.lineNumber=n.length,e.startCol=u(s).length,e.endCol=u(d).length,n.push(d),r.push(e);const f=s.length;if(f>0&&(""==s[f-1]?s=s.substr(0,f-1)+"":""==s[f-1]&&(s=s.substr(0,f-1)+" ")),Array.isArray(e.children))if(1==e.children.length)o(e.children[0],s+" ");else if(e.children.length>1)for(let t=0;t<e.children.length;++t)t==e.children.length-1?o(e.children[t],s+""):o(e.children[t],s+"")}if(Array.isArray(t.children)&&t.children.length>0)for(const e of t.children)o(e,"");this.outlineStrings[e]=n,this.outlinePanelData[e]=r,void 0===this.outlineVersions[e]?this.outlineVersions[e]=0:this.outlineVersions[e]+=1},this.highlightCurrentOutlineItem=()=>r(this,void 0,void 0,(function*(){if(void 0!==this.curOutlineItem&&void 0!==this.outlineBuffer&&void 0!==this.curOutlineItem.lineNumber&&void 0!==this.curOutlineItem.startCol&&void 0!==this.curOutlineItem.endCol){const e=yield i.workspace.nvim.windows;for(const t of e)try{const e=yield t.buffer;e.id===this.outlineBuffer.id&&(e.clearHighlight(),t.setCursor([this.curOutlineItem.lineNumber+1,0]).catch(()=>{}),e.addHighlight({hlGroup:"HighlightedOutlineArea",line:this.curOutlineItem.lineNumber,colStart:this.curOutlineItem.startCol,colEnd:this.curOutlineItem.endCol}).catch(()=>{}))}catch(e){}}})),this.updateOutlineBuffer=(e,t=!1)=>r(this,void 0,void 0,(function*(){if((this.outlineVersions[e]===this.outlineVersions_Rendered[e]&&void 0===this.outlineVersions[e]||this.outlineVersions[e]!==this.outlineVersions_Rendered[e]||e!==this.renderedOutlineUri||t)&&this.outlineBuffer){this.renderedOutlineUri=e;let t=[];this.outlineStrings[e]&&(this.outlineVersions_Rendered[e]=this.outlineVersions[e],t=this.outlineStrings[e]),yield this.outlineBuffer.length.then(e=>r(this,void 0,void 0,(function*(){Number.isInteger(e)&&(yield this.outlineBuffer.setOption("modifiable",!0),e>t.length?(yield this.outlineBuffer.setLines([],{start:0,end:e-1,strictIndexing:!1}),yield this.outlineBuffer.setLines(t,{start:0,end:0,strictIndexing:!1})):yield this.outlineBuffer.setLines(t,{start:0,end:e-1,strictIndexing:!1}),yield this.outlineBuffer.setOption("modifiable",!1))}))).catch(()=>{}),yield this.outlineBuffer.length.then(e=>r(this,void 0,void 0,(function*(){yield this.outlineBuffer.setOption("modifiable",!0),e>t.length&&(yield this.outlineBuffer.setLines([],{start:0,end:e-1,strictIndexing:!1}),yield this.outlineBuffer.setLines(t,{start:0,end:0,strictIndexing:!1})),yield this.outlineBuffer.setOption("modifiable",!1)}))).catch(()=>{})}yield this.highlightCurrentOutlineItem()})),this.onOutline=e=>r(this,void 0,void 0,(function*(){const{uri:t,outline:n}=e;i.workspace.getDocument(t)&&(this.outlines[t]=n,this.generateOutlineStrings(t),this.updateOutlineBuffer(t))})),this.init(e);const t=i.workspace.getConfiguration("flutter");this.showPath=t.get("UIPath",!0),this.outlineWidth=t.get("outlineWidth",30),this.iconSpacing=" ".repeat(t.get("outlineIconPadding",0))}getUIPathFromCursor(e,t){let n="",r=!0;for(;r;){if(r=!1,Array.isArray(e.children)&&e.children.length>0)for(const n of e.children){const i=t[0]-1,o=t[1]-1,s=n.codeRange.start.line,a=n.codeRange.start.character,c=n.codeRange.end.line,u=n.codeRange.end.character;if((i>s||i==s&&o>=a)&&(i<c||i==c&&o<u)){e=n,r=!0;break}}if(!r)break;n+=" > "+e.element.name}this.curOutlineItem=e,this.showPath&&o.statusBar.show(n,!1)}getCurrentUri(){return r(this,void 0,void 0,(function*(){return"file://"+(yield i.workspace.nvim.commandOutput('echo expand("%:p")'))}))}init(e){return r(this,void 0,void 0,(function*(){const{nvim:t}=i.workspace;t.on("notification",(...e)=>r(this,void 0,void 0,(function*(){if("CocAutocmd"===e[0])if("CursorMoved"===e[1][0]){const t=e[1][1],n=e[1][2];if(this.outlineBuffer&&t===this.outlineBuffer.id);else{this.curUri=yield this.getCurrentUri();const e=this.outlines[this.curUri];e&&(this.getUIPathFromCursor(e,n),this.updateOutlineBuffer(this.curUri))}}else if("BufEnter"===e[1][0]&&Number.isInteger(e[1][1])&&this.outlineBuffer&&e[1][1]===this.outlineBuffer.id){const e=yield t.windows;if(Array.isArray(e))if(1===e.length)t.command("q");else{const n=yield t.window,r=yield n.tabpage;let i=0;for(const t of e){const e=yield t.tabpage;(yield e.number)===(yield r.number)&&(i+=1)}1===i&&n.close(!0)}}}))),e.onNotification("dart/textDocument/publishOutline",this.onOutline);const n=()=>r(this,void 0,void 0,(function*(){const e=yield t.window;yield t.command("set splitright"),yield t.command(this.outlineWidth+"vsplit Flutter Outline");const n=yield t.window;yield t.command("setlocal filetype=flutterOutline"),yield t.command("set buftype=nofile"),yield t.command("setlocal noswapfile"),yield t.command("setlocal nomodifiable"),yield t.command("setlocal winfixwidth"),yield t.command("setlocal nocursorline"),yield t.command("setlocal nobuflisted"),yield t.command("setlocal bufhidden=wipe"),yield t.command("setlocal nonumber"),yield t.command("setlocal norelativenumber"),yield t.command("setlocal nowrap"),yield t.command("syntax match OutlineLine /^\\(\\| \\)*\\(\\|\\)\\?/"),yield t.command("highlight default link HighlightedOutlineArea IncSearch"),yield t.command("highlight default link OutlineLine Comment"),yield t.command(`syntax match FlutterOutlineFunction /${c.FUNCTION}/`),yield t.command("highlight default link FlutterOutlineFunction Function"),yield t.command(`syntax match FlutterOutlineType /${c.FIELD}/`),yield t.command("highlight default link FlutterOutlineType Identifier"),yield t.command(`syntax match FlutterOutlineClass /${c.CLASS}/`),yield t.command("highlight default link FlutterOutlineClass Type"),yield t.command(`syntax match FlutterOutlineMethod /${c.METHOD}/`),yield t.command("highlight default link FlutterOutlineMethod Function"),yield t.command(`syntax match FlutterOutlineTopLevelVar /${c.TOP_LEVEL_VARIABLE}/`),yield t.command("highlight default link FlutterOutlineTopLevelVar Identifier"),yield t.command(`syntax match FlutterOutlineConstructor /${c.CONSTRUCTOR}/`),yield t.command("highlight default link FlutterOutlineConstructor Identifier"),yield t.command(`syntax match FlutterOutlineGetter /${c.GETTER}/`),yield t.command("highlight default link FlutterOutlineGetter Function"),yield t.command(`syntax match FlutterOutlineConstructorInvocation /${c.CONSTRUCTOR_INVOCATION}/`),yield t.command("highlight default link FlutterOutlineConstructorInvocation Special"),yield t.command(`syntax match FlutterOutlineEnum /${c.ENUM}/`),yield t.command("highlight default link FlutterOutlineEnum Type"),yield t.command(`syntax match FlutterOutlineEnumMember /${c.ENUM_CONSTANT}/`),yield t.command("highlight default link FlutterOutlineEnumMember Identifier"),yield t.command("syntax match FlutterOutlineLineNumber /: \\d\\+$/"),yield t.command("highlight default link FlutterOutlineLineNumber Number"),this.outlineBuffer=yield n.buffer,i.workspace.registerLocalKeymap("n","<CR>",()=>r(this,void 0,void 0,(function*(){const e=yield t.window,n=yield e.cursor,r=this.outlinePanelData[this.curUri];if(!Array.isArray(r))return;const i=r[n[0]-1];if(void 0===i)return;const o=yield t.windows;if(Array.isArray(o)){const e=yield t.window,n=yield e.tabpage;for(const e of o){const r=yield e.tabpage;if((yield r.number)===(yield n.number)&&"file://"+(yield(yield e.buffer).name)===this.curUri){e.setCursor([i.codeRange.start.line+1,i.codeRange.start.character]).catch(()=>{}),yield t.call("win_gotoid",[e.id]);break}}}}))),yield t.call("win_gotoid",[e.id]);const o=yield this.getCurrentUri();this.updateOutlineBuffer(o,!0)}));i.commands.registerCommand(s.cmdPrefix+".outline",()=>r(this,void 0,void 0,(function*(){yield n()}))),i.commands.registerCommand(s.cmdPrefix+".toggleOutline",()=>r(this,void 0,void 0,(function*(){if(void 0===this.outlineBuffer)return void(yield n());const e=yield t.window,r=yield e.tabpage,i=yield t.windows;let o=!0;for(const e of i){const t=yield e.tabpage;(yield t.number)===(yield r.number)&&(yield e.buffer).id===this.outlineBuffer.id&&(o=!1,e.close(!0).catch(()=>{}))}o&&(yield n())})))}))}}t.Outline=l},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.codeActionProvider=void 0;t.codeActionProvider=(e,t,n,i,o)=>r(void 0,void 0,void 0,(function*(){let r=yield o(e,t,n,i);if(!r)return r;r=r.map(e=>e.kind&&e.kind.startsWith("quickfix.import")?Object.assign(Object.assign({},e),{isPreferred:!0}):e);const s=r.slice();return r.some(e=>{if("Wrap with widget..."===e.title&&e.edit){const t=e.edit;if(!t||!t.documentChanges)return!0;const n=t.documentChanges;if(!n||0===n.length)return!0;const r=Object.assign(Object.assign({},e),{title:"Delete this widget",edit:Object.assign(Object.assign({},t),{documentChanges:[Object.assign(Object.assign({},n[0]),{edits:[Object.assign(Object.assign({},n[0].edits[0]||{}),{newText:""})]})]})});return s.push(r),!0}return!1}),s}))},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.completionProvider=void 0;const i=n(0),o=n(150);t.completionProvider=(e,t,n,s,a)=>r(void 0,void 0,void 0,(function*(){var r,c,u,l;let d=[];try{const f=e.getText(i.Range.create(i.Position.create(t.line,t.character-1),t)),h=yield a(e,t,n,s);null!=h&&(d=null!=(null===(r=h)||void 0===r?void 0:r.isIncomplete)?h.items:h),d.length>1e3&&/[a-zA-Z]/i.test(f)&&(d=d.filter(e=>new RegExp(f,"i").test(e.label)));const p=i.workspace.getConfiguration("dart"),m=o.getResolveCompleteItemFunc({completeFunctionCalls:p.get("completeFunctionCalls",!0)});return d=d.map(m),null!=(null===(c=h)||void 0===c?void 0:c.isIncomplete)?{items:d,isIncomplete:null!==(l=null===(u=h)||void 0===u?void 0:u.isIncomplete)&&void 0!==l&&l}:d}catch(e){return d}}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getResolveCompleteItemFunc=void 0;const r=n(0),i=/^(.*)\(\)$/,o=/^(.*)\(\)$/,s=/^([^ ]+?:\s+),$/;t.getResolveCompleteItemFunc=e=>t=>{const{label:n,insertTextFormat:a}=t;if(t.insertTextFormat===r.InsertTextFormat.Snippet&&t.filterText&&delete t.filterText,t.textEdit&&delete t.textEdit,t.insertTextFormat===r.InsertTextFormat.Snippet&&t.insertText&&t.insertText.endsWith("${1:}")&&(t.insertTextFormat=r.InsertTextFormat.PlainText,t.insertText=t.insertText.slice(0,-5)),"import '';"===n&&a!==r.InsertTextFormat.Snippet)return t.insertText="import '${1}';${0}",t.insertTextFormat=r.InsertTextFormat.Snippet,t;if("setState(() {});"===n&&a!==r.InsertTextFormat.Snippet)return t.insertText=["setState(() {","\t${1}","});${0}"].join("\n"),t.insertTextFormat=r.InsertTextFormat.Snippet,t;let c=n.match(s);if(c)return t.insertText=c[1]+"${1},${0}",t.insertTextFormat=r.InsertTextFormat.Snippet,t;if(e.completeFunctionCalls&&t.insertTextFormat!==r.InsertTextFormat.Snippet){if(c=n.match(o),c)return t.insertText=c[1]+"()${0}",t.insertTextFormat=r.InsertTextFormat.Snippet,t;if(c=n.match(i),c)return t.insertText=c[1]+"(${1})${0}",t.insertTextFormat=r.InsertTextFormat.Snippet,t}return t}},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.executeCommandProvider=void 0;const i=n(0),o=n(5);t.executeCommandProvider=(e,t,n)=>r(void 0,void 0,void 0,(function*(){if("refactor.perform"===e){const r=6;if(t&&t.length===r){const r=-32011,s=5;let a;switch(t[0]){case"EXTRACT_METHOD":if(a=yield i.window.requestInput("Enter a name for the method","NewMethod"),!a)return;if(!o.validMethodNameRegex.test(a))return i.window.showErrorMessage("Enter a valid method name");t[s]=Object.assign({},t[s],{name:a});break;case"EXTRACT_WIDGET":if(a=yield i.window.requestInput("Enter a name for the widget","NewWidget"),!a)return;if(!o.validClassNameRegex.test(a))return i.window.showErrorMessage("Enter a valid widget name");t[s]=Object.assign({},t[s],{name:a});break;case"EXTRACT_LOCAL_VARIABLE":if(a=yield i.window.requestInput("Enter a name for the variable","NewVariable"),!a)return;if(!o.validVariableNameRegex.test(a))return i.window.showErrorMessage("Enter a valid variable name");t[s]=Object.assign({},t[s],{name:a})}try{return yield n(e,t)}catch(e){if(i.window.showErrorMessage(e.message),(null==e?void 0:e.code)===r)return void i.window.showErrorMessage(e.message);throw e}}}return n(e,t)}))},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.SignatureHelpProvider=void 0;const i=n(0),o=n(1);class s extends o.Dispose{constructor(e){super(),this.push(i.languages.registerSignatureHelpProvider([{language:"dart",scheme:"file"}],{provideSignatureHelp(t,n,i){return r(this,void 0,void 0,(function*(){return e.sendRequest("textDocument/signatureHelp",{textDocument:{uri:t.uri},position:n},i)}))}},["(",","]))}}t.SignatureHelpProvider=s},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.SourceList=void 0;const i=n(0),o=n(1),s=r(n(154)),a=r(n(165)),c=r(n(166));class u extends o.Dispose{constructor(e){super(),this.push(i.listManager.registerList(new s.default),i.listManager.registerList(new a.default),i.listManager.registerList(new c.default(e)))}}t.SourceList=u},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=n(0),s=i(n(28)),a=n(5),c=n(10);t.default=class{constructor(){this.name="FlutterDevices",this.description="flutter devices list",this.defaultAction="run",this.actions=[],this.actions.push({name:"run",multiple:!1,execute:(e,t)=>r(this,void 0,void 0,(function*(){Array.isArray(e)||o.commands.executeCommand("flutter.run","-d",e.data.deviceId,...t.args)}))})}loadItems(){return r(this,void 0,void 0,(function*(){const e=o.workspace.getConfiguration("flutter").get("commands.devicesTimeout",1),{err:t,stdout:n}=yield c.flutterSDK.execFlutterCommand("devices --device-timeout="+e);let r=[];return t||(r=n.split(a.lineBreak).filter(e=>4===e.split("").length).map(e=>{const t=e.split("");return{name:t[0].trim(),deviceId:t[1].trim(),platform:t[2].trim(),system:t[3].trim()}})),r.map(e=>({label:`${s.default.yellow(e.name)}  ${s.default.gray(`${e.deviceId}  ${e.platform}  ${e.system}`)}`,filterText:e.name,data:e}))}))}}},function(e,t,n){var r={};e.exports=r,r.themes={};var i=n(19),o=r.styles=n(156),s=Object.defineProperties,a=new RegExp(/[\r\n]+/g);r.supportsColor=n(157).supportsColor,void 0===r.enabled&&(r.enabled=!1!==r.supportsColor()),r.enable=function(){r.enabled=!0},r.disable=function(){r.enabled=!1},r.stripColors=r.strip=function(e){return(""+e).replace(/\x1B\[\d+m/g,"")};r.stylize=function(e,t){if(!r.enabled)return e+"";var n=o[t];return!n&&t in r?r[t](e):n.open+e+n.close};var c=/[|\\{}()[\]^$+*?.]/g;function u(e){var t=function e(){return h.apply(e,arguments)};return t._styles=e,t.__proto__=f,t}var l,d=(l={},o.grey=o.gray,Object.keys(o).forEach((function(e){o[e].closeRe=new RegExp(function(e){if("string"!=typeof e)throw new TypeError("Expected a string");return e.replace(c,"\\$&")}(o[e].close),"g"),l[e]={get:function(){return u(this._styles.concat(e))}}})),l),f=s((function(){}),d);function h(){var e=Array.prototype.slice.call(arguments),t=e.map((function(e){return null!=e&&e.constructor===String?e:i.inspect(e)})).join(" ");if(!r.enabled||!t)return t;for(var n=-1!=t.indexOf("\n"),s=this._styles,c=s.length;c--;){var u=o[s[c]];t=u.open+t.replace(u.closeRe,u.open)+u.close,n&&(t=t.replace(a,(function(e){return u.close+e+u.open})))}return t}r.setTheme=function(e){if("string"!=typeof e)for(var t in e)!function(t){r[t]=function(n){if("object"==typeof e[t]){var i=n;for(var o in e[t])i=r[e[t][o]](i);return i}return r[e[t]](n)}}(t);else console.log("colors.setTheme now only accepts an object, not a string.  If you are trying to set a theme from a file, it is now your (the caller's) responsibility to require the file.  The old syntax looked like colors.setTheme(__dirname + '/../themes/generic-logging.js'); The new syntax looks like colors.setTheme(require(__dirname + '/../themes/generic-logging.js'));")};var p=function(e,t){var n=t.split("");return(n=n.map(e)).join("")};for(var m in r.trap=n(159),r.zalgo=n(160),r.maps={},r.maps.america=n(161)(r),r.maps.zebra=n(162)(r),r.maps.rainbow=n(163)(r),r.maps.random=n(164)(r),r.maps)!function(e){r[e]=function(t){return p(r.maps[e],t)}}(m);s(r,function(){var e={};return Object.keys(d).forEach((function(t){e[t]={get:function(){return u([t])}}})),e}())},function(e,t){var n={};e.exports=n;var r={reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],inverse:[7,27],hidden:[8,28],strikethrough:[9,29],black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],gray:[90,39],grey:[90,39],brightRed:[91,39],brightGreen:[92,39],brightYellow:[93,39],brightBlue:[94,39],brightMagenta:[95,39],brightCyan:[96,39],brightWhite:[97,39],bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgGray:[100,49],bgGrey:[100,49],bgBrightRed:[101,49],bgBrightGreen:[102,49],bgBrightYellow:[103,49],bgBrightBlue:[104,49],bgBrightMagenta:[105,49],bgBrightCyan:[106,49],bgBrightWhite:[107,49],blackBG:[40,49],redBG:[41,49],greenBG:[42,49],yellowBG:[43,49],blueBG:[44,49],magentaBG:[45,49],cyanBG:[46,49],whiteBG:[47,49]};Object.keys(r).forEach((function(e){var t=r[e],i=n[e]=[];i.open="["+t[0]+"m",i.close="["+t[1]+"m"}))},function(e,t,n){"use strict";var r=n(6),i=n(158),o=process.env,s=void 0;function a(e){return function(e){return 0!==e&&{level:e,hasBasic:!0,has256:e>=2,has16m:e>=3}}(function(e){if(!1===s)return 0;if(i("color=16m")||i("color=full")||i("color=truecolor"))return 3;if(i("color=256"))return 2;if(e&&!e.isTTY&&!0!==s)return 0;var t=s?1:0;if("win32"===process.platform){var n=r.release().split(".");return Number(process.versions.node.split(".")[0])>=8&&Number(n[0])>=10&&Number(n[2])>=10586?Number(n[2])>=14931?3:2:1}if("CI"in o)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI"].some((function(e){return e in o}))||"codeship"===o.CI_NAME?1:t;if("TEAMCITY_VERSION"in o)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(o.TEAMCITY_VERSION)?1:0;if("TERM_PROGRAM"in o){var a=parseInt((o.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(o.TERM_PROGRAM){case"iTerm.app":return a>=3?3:2;case"Hyper":return 3;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(o.TERM)?2:/^screen|^xterm|^vt100|^rxvt|color|ansi|cygwin|linux/i.test(o.TERM)||"COLORTERM"in o?1:(o.TERM,t)}(e))}i("no-color")||i("no-colors")||i("color=false")?s=!1:(i("color")||i("colors")||i("color=true")||i("color=always"))&&(s=!0),"FORCE_COLOR"in o&&(s=0===o.FORCE_COLOR.length||0!==parseInt(o.FORCE_COLOR,10)),e.exports={supportsColor:a,stdout:a(process.stdout),stderr:a(process.stderr)}},function(e,t,n){"use strict";e.exports=function(e,t){var n=(t=t||process.argv).indexOf("--"),r=/^-{1,2}/.test(e)?"":"--",i=t.indexOf(r+e);return-1!==i&&(-1===n||i<n)}},function(e,t){e.exports=function(e,t){var n="";e=(e=e||"Run the trap, drop the bass").split("");var r={a:["@","","","","","",""],b:["","","","","",""],c:["","",""],d:["","","","","",""],e:["","","","","","","",""],f:[""],g:[""],h:["","","","","",""],i:[""],j:[""],k:["","","",""],l:[""],m:["","","","","",""],n:["","","","","",""],o:["","","","","","","","",""],p:["",""],q:[""],r:["","","","","",""],s:["","","",""],t:["","",""],u:["",""],v:[""],w:["","","",""],x:["","","",""],y:["","",""],z:["",""]};return e.forEach((function(e){e=e.toLowerCase();var t=r[e]||[" "],i=Math.floor(Math.random()*t.length);n+=void 0!==r[e]?r[e][i]:e})),n}},function(e,t){e.exports=function(e,t){e=e||"   he is here   ";var n={up:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],down:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],mid:["","","","","","","","","","","","","","","","","","","","",""," "]},r=[].concat(n.up,n.down,n.mid);function i(e){return Math.floor(Math.random()*e)}function o(e){var t=!1;return r.filter((function(n){t=n===e})),t}return function(e,t){var r,s,a="";for(s in(t=t||{}).up=void 0===t.up||t.up,t.mid=void 0===t.mid||t.mid,t.down=void 0===t.down||t.down,t.size=void 0!==t.size?t.size:"maxi",e=e.split(""))if(!o(s)){switch(a+=e[s],r={up:0,down:0,mid:0},t.size){case"mini":r.up=i(8),r.mid=i(2),r.down=i(8);break;case"maxi":r.up=i(16)+3,r.mid=i(4)+1,r.down=i(64)+3;break;default:r.up=i(8)+1,r.mid=i(6)/2,r.down=i(8)+1}var c=["up","mid","down"];for(var u in c)for(var l=c[u],d=0;d<=r[l];d++)t[l]&&(a+=n[l][i(n[l].length)])}return a}(e,t)}},function(e,t){e.exports=function(e){return function(t,n,r){if(" "===t)return t;switch(n%3){case 0:return e.red(t);case 1:return e.white(t);case 2:return e.blue(t)}}}},function(e,t){e.exports=function(e){return function(t,n,r){return n%2==0?t:e.inverse(t)}}},function(e,t){e.exports=function(e){var t=["red","yellow","green","blue","magenta"];return function(n,r,i){return" "===n?n:e[t[r++%t.length]](n)}}},function(e,t){e.exports=function(e){var t=["underline","inverse","grey","yellow","red","green","blue","white","cyan","magenta","brightYellow","brightRed","brightGreen","brightBlue","brightWhite","brightCyan","brightMagenta"];return function(n,r,i){return" "===n?n:e[t[Math.round(Math.random()*(t.length-2))]](n)}}},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=i(n(28)),s=n(5),a=n(9),c=n(10);t.default=class{constructor(){this.name="FlutterEmulators",this.description="flutter emulators list",this.defaultAction="run",this.actions=[],this.actions.push({name:"run",multiple:!1,execute:e=>r(this,void 0,void 0,(function*(){Array.isArray(e)||(a.notification.show("launch emulator "+e.data.id),yield c.flutterSDK.execFlutterCommand("emulators --launch "+e.data.id))}))})}loadItems(){return r(this,void 0,void 0,(function*(){const{err:e,stdout:t}=yield c.flutterSDK.execFlutterCommand("emulators");let n=[];return e||(n=t.split(s.lineBreak).filter(e=>4===e.split("").length).map(e=>{const t=e.split("");return{name:t[1].trim(),id:t[0].trim(),platform:t[2].trim(),system:t[3].trim()}})),n.map(e=>({label:`${o.default.yellow(e.id)}  ${o.default.gray(`${e.name}  ${e.platform}  ${e.system}`)}`,filterText:e.name,data:e}))}))}}},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=n(0),s=i(n(28)),a=n(10),c=n(12),u=n(4).logger.getlog("SdksList");t.default=class{constructor(e){this.name="FlutterSDKs",this.description="list of local flutter sdks",this.defaultAction="switch",this.actions=[],this.actions.push({name:"switch",multiple:!1,execute:t=>r(this,void 0,void 0,(function*(){if(Array.isArray(t))return;const n=t.data;if(n.isCurrent)return;const r=o.workspace.getConfiguration("flutter");n.isFvm?(yield c.execCommand("fvm use "+n.fvmVersion),r.update("sdk.path",".fvm/flutter_sdk"),u(`swithed to ${n.version} using fvm`)):r.update("sdk.path",n.location),yield e.reloadSdk(),yield o.commands.executeCommand("flutter.pub.get"),yield e.restart()}))}),this.actions.push({name:"global switch",multiple:!1,execute:t=>r(this,void 0,void 0,(function*(){if(Array.isArray(t))return;const n=t.data;if(n.isCurrent)return;o.workspace.getConfiguration("flutter").update("sdk.path",n.location,!0),yield e.restart(),o.commands.executeCommand("flutter.pub.get")}))})}loadItems(){return r(this,void 0,void 0,(function*(){return(yield a.flutterSDK.findSdks()).map(e=>({label:`${e.isCurrent?s.default.yellow(e.version)+s.default.bold(" (current)"):s.default.yellow(e.version)}  ${s.default.gray(""+e.location)}`,filterText:e.location,data:e}))}))}}}]));